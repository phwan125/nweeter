/*! For license information please see main.5b018551.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Te=null;function Ie(e){if(e=yi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Te?Te.push(e):Te=[e]:xe=e}function Se(){if(xe){var e=xe,t=Te;if(Te=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Te)&&(Ae(),Se())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,je=null,Ve={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Ue=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,_t,xt,Tt,It=!1,Et=[],St=null,Ct=null,At=null,Nt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function jt(){It=!1,null!==St&&Ut(St)&&(St=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),Nt.forEach(Ft),Rt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&Vt(St,e),null!==Ct&&Vt(Ct,e),null!==At&&Vt(At,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig;function Bt(e,t,n,r){var i=gt,a=qt.transition;qt.transition=null;try{gt=1,Ht(e,t,n,r)}finally{gt=i,qt.transition=a}}function Wt(e,t,n,r){var i=gt,a=qt.transition;qt.transition=null;try{gt=4,Ht(e,t,n,r)}finally{gt=i,qt.transition=a}}function Ht(e,t,n,r){var i=Gt(e,t,n,r);if(null===i)qr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return St=Lt(St,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Lt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Gt(e,t,n,r))&&qr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=vi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Yt=null,Jt=null;function Xt(){if(Jt)return Jt;var e,t,n=Yt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=U({},un,{view:0,detail:0}),ln=nn(cn),fn=U({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(U({},fn,{dataTransfer:0})),pn=nn(U({},cn,{relatedTarget:0})),vn=nn(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(U({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function xn(){return _n}var Tn=U({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=nn(Tn),En=nn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=nn(U({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Cn=nn(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=nn(An),Rn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Dn=l&&"TextEvent"in window&&!On,Ln=l&&(!Pn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Bn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Kn(e){Mr(e,0)}function Gn(e){if(G(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(l){var Yn;if(l){var Jn="oninput"in document;if(!Jn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Jn="function"===typeof Xn.oninput}Yn=Jn}else Yn=!1;$n=Yn&&(!document.documentMode||9<document.documentMode)}function Zn(){Wn&&(Wn.detachEvent("onpropertychange",er),Hn=Wn=null)}function er(e){if("value"===e.propertyName&&Gn(Hn)){var t=[];Bn(t,Hn,e,be(e)),Re(Kn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Hn=n,(Wn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Hn)}function rr(e,t){if("click"===e)return Gn(t)}function ir(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},br={},_r={};function xr(e){if(br[e])return br[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return br[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=xr("animationend"),Ir=xr("animationiteration"),Er=xr("animationstart"),Sr=xr("transitionend"),Cr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Cr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Pr=Ar[Rr];Nr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Nr(Tr,"onAnimationEnd"),Nr(Ir,"onAnimationIteration"),Nr(Er,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Sr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Fe)throw e=je,Fe=!1,je=null,e}function Ur(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Fr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Qt(t)){case 1:var i=Bt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Sn;break;case Tr:case Ir:case Er:s=vn;break;case Sr:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=Nn;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=En}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Br(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=En,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:mi(s),d=null==c?u:mi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Kr(o,u,s,l,!1),null!==c&&null!==f&&Kr(o,f,c,l,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(qn(u))if($n)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?Bn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(qn(m)||"true"===m.contentEditable)&&(pr=m,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vn?Fn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Vn&&(g=Xt()):(Yt="value"in($t=i)?$t.value:$t.textContent,Vn=!0)),0<(m=Wr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Dn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=Xt(),Jt=Yt=$t=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function Br(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Br(e,a,i)),null!=(a=Pe(e,t))&&r.push(Br(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Br(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Br(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Qr,"")}function Yr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var Xr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],wi=-1;function bi(e){return{current:e}}function _i(e){0>wi||(e.current=ki[wi],ki[wi]=null,wi--)}function xi(e,t){wi++,ki[wi]=e.current,e.current=t}var Ti={},Ii=bi(Ti),Ei=bi(!1),Si=Ti;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){_i(Ei),_i(Ii)}function Ri(e,t,n){if(Ii.current!==Ti)throw Error(a(168));xi(Ii,t),xi(Ei,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return U({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Si=Ii.current,xi(Ii,e),xi(Ei,Ei.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Si),r.__reactInternalMemoizedMergedChildContext=e,_i(Ei),_i(Ii),xi(Ii,e)):_i(Ei),xi(Ei,n)}var Li=null,Mi=!1,Ui=!1;function Fi(e){null===Li?Li=[e]:Li.push(e)}function ji(){if(!Ui&&null!==Li){Ui=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Ge(Ze,ji),i}finally{gt=t,Ui=!1}}return null}var Vi=w.ReactCurrentBatchConfig;function zi(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qi=bi(null),Bi=null,Wi=null,Hi=null;function Ki(){Hi=Wi=Bi=null}function Gi(e){var t=qi.current;_i(qi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $i(e,t){Bi=e,Hi=Wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function Yi(e){var t=e._currentValue;if(Hi!==e)if(e={context:e,memoizedValue:t,next:null},null===Wi){if(null===Bi)throw Error(a(308));Wi=e,Bi.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var Ji=null,Xi=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===Ji?Ji=[n]:Ji.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=U({},f,h);break e;case 2:Xi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Is|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qs(),i=Bs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qs(),i=Bs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qs(),r=Bs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ws(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Yi(a):(i=Ai(t)?Si:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Yi(a):(a=Ai(t)?Si:Ii.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ya=null,ma=0,ga=[],ka=0,wa=null,ba=1,_a="";function xa(e,t){pa[va++]=ma,pa[va++]=ya,ya=e,ma=t}function Ta(e,t,n){ga[ka++]=ba,ga[ka++]=_a,ga[ka++]=wa,wa=e;var r=ba;e=_a;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ba=1<<32-ot(t)+i|n<<i|r,_a=a+e}else ba=1<<a|n<<i|r,_a=e}function Ia(e){null!==e.return&&(xa(e,1),Ta(e,1,0))}function Ea(e){for(;e===ya;)ya=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null;for(;e===wa;)wa=ga[--ka],ga[ka]=null,_a=ga[--ka],ga[ka]=null,ba=ga[--ka],ga[ka]=null}var Sa=null,Ca=null,Aa=!1,Na=null;function Ra(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Pa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Sa=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Sa=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==wa?{id:ba,overflow:_a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Sa=e,Ca=null,!0);default:return!1}}function Oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Da(e){if(Aa){var t=Ca;if(t){var n=t;if(!Pa(e,t)){if(Oa(e))throw Error(a(418));t=oi(n.nextSibling);var r=Sa;t&&Pa(e,t)?Ra(r,n):(e.flags=-4097&e.flags|2,Aa=!1,Sa=e)}}else{if(Oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,Aa=!1,Sa=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Sa=e}function Ma(e){if(e!==Sa)return!1;if(!Aa)return La(e),Aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Oa(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Ra(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Sa?oi(e.stateNode.nextSibling):null;return!0}function Ua(){Ca=Sa=null,Aa=!1}function Fa(e){null===Na?Na=[e]:Na.push(e)}function ja(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function za(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=_c(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ec(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&za(a)===t.type)?((r=i(t,n.props)).ref=ja(e,t,n),r.return=e,r):((r=xc(n.type,n.key,n.props,null,e.mode,r)).ref=ja(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Tc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ec(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=xc(t.type,t.key,t.props,null,e.mode,n)).ref=ja(e,null,t),n.return=e,n;case _:return(t=Sc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Tc(t,e.mode,n,null)).return=e,t;Va(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Va(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Va(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Aa&&xa(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Aa&&xa(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Aa&&xa(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Aa&&xa(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Aa&&xa(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Aa&&xa(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&za(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=ja(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Tc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=xc(o.type,o.key,o.props,null,r.mode,s)).ref=ja(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Sc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ec(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ba=qa(!0),Wa=qa(!1),Ha={},Ka=bi(Ha),Ga=bi(Ha),Qa=bi(Ha);function $a(e){if(e===Ha)throw Error(a(174));return e}function Ya(e,t){switch(xi(Qa,t),xi(Ga,e),xi(Ka,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Ka),xi(Ka,t)}function Ja(){_i(Ka),_i(Ga),_i(Qa)}function Xa(e){$a(Qa.current);var t=$a(Ka.current),n=se(t,e.type);t!==n&&(xi(Ga,e),xi(Ka,n))}function Za(e){Ga.current===e&&(_i(Ka),_i(Ga))}var eo=bi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Xo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Is|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Is|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Io(e,t){var n=uo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ro(9,So.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&Ws(e,1,-1)}function Co(e,t,n){return n((function(){Ao(t)&&Ws(e,1,-1)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,uo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return wo().memoizedState}function Oo(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Ro(t,n,a,r))}uo.flags|=e,i.memoizedState=Ro(1|t,n,a,r)}function Lo(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function Uo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,jo.bind(null,t,e),n)}function zo(){}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Ho(){return wo().memoizedState}function Ko(e,t,n){var r=Bs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?$o(t,n):(Yo(e,t,n),null!==(e=Ws(e,r,n=qs()))&&Jo(e,t,r))}function Go(e,t,n){var r=Bs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,i);else{Yo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ws(e,r,n=qs()))&&Jo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function $o(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===Ji?Ji=[t]:Ji.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Xo={readContext:Yi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Zo={readContext:Yi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Yi,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:No,useDebugValue:zo,useDeferredValue:function(e){var t=No(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=No(!1),t=e[0];return e=Wo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,So.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Aa){var n=_a;t=":"+t+"R"+(n=(ba&~(1<<32-ot(ba)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Yi,useCallback:qo,useContext:Yi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:Bo,useReducer:_o,useRef:Po,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=_o(bo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:To,useSyncExternalStore:Io,useId:Ho,unstable_isNewReconciler:!1},tu={readContext:Yi,useCallback:qo,useContext:Yi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:Bo,useReducer:xo,useRef:Po,useState:function(){return xo(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=xo(bo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:To,useSyncExternalStore:Io,useId:Ho,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ps||(Ps=!0,Os=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Ds?Ds=new Set([this]):Ds.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ai(t.type)&&Ni(),pu(t),null;case 3:return r=t.stateNode,Ja(),_i(Ei),_i(Ii),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Na&&($s(Na),Na=null))),pu(t),null;case 5:Za(t);var i=$a(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=$a(Ka.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Yr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=$a(Qa.current),$a(Ka.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Sa))switch(s=0!==(1&e.mode),e.tag){case 3:Yr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Yr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(_i(eo),r=t.memoizedState,Aa&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Ua(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Ua(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Na&&($s(Na),Na=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===xs&&(xs=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Ja(),null===e&&Vr(t.stateNode.containerInfo),pu(t),null;case 10:return Gi(t.type._context),pu(t),null;case 19:if(_i(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==xs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Rs&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Aa)return pu(t),null}else 2*Je()-o.renderingStartTime>Rs&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=eo.current,xi(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&bs)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$a(Ka.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=w.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Wa(t,null,n,r):Ba(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return $i(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Aa&&n&&Ia(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ju(e,t,i))}function wu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||bc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=xc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,bu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return ju(e,t,i)}return t.flags|=1,(e=_c(a,r)).ref=t.ref,e.return=t,t.child=e}function bu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,ju(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return Tu(e,t,n,r,i)}function _u(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},xi(_s,bs),bs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,xi(_s,bs),bs|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,xi(_s,bs),bs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xi(_s,bs),bs|=r;return gu(e,t,i,n),t.child}function xu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ai(n)?Si:Ii.current;return a=Ci(t,a),$i(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Aa&&r&&Ia(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ju(e,t,i))}function Iu(e,t,n,r,i){if(Ai(n)){var a=!0;Oi(t)}else a=!1;if($i(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Yi(c):c=Ci(t,c=Ai(n)?Si:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Xi=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ei.current||Xi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Xi||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:zi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Yi(s):s=Ci(t,s=Ai(n)?Si:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Xi=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ei.current||Xi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Xi||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Eu(e,t,n,r,a,i)}function Eu(e,t,n,r,i,a){xu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Di(t,n,!1),ju(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ba(t,e.child,null,a),t.child=Ba(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Di(t,n,!0),t.child}function Su(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ya(e,t.containerInfo)}function Cu(e,t,n,r,i){return Ua(),Fa(i),t.flags|=256,gu(e,t,n,r),t.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function Nu(e){return{baseLanes:e,cachePool:null}}function Ru(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(eo,1&o),null===e)return Da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ic(o,i,0,null),e=Tc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Nu(n),t.memoizedState=Au,e):Pu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ic({mode:"visible",children:i.children},o,0,null),(u=Tc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ba(t,e.child,null,n),t.child.memoizedState=Nu(n),t.memoizedState=Au,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ws(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Sa=t,Aa=!0,Na=null,null!==n&&(ga[ka++]=ba,ga[ka++]=_a,ga[ka++]=wa,ba=n.id,_a=n.overflow,wa=t),(t=Pu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Du(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Nu(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Au,i):(n=Ou(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Du(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Nu(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Au,i):(n=Ou(e,t,i.children,n),t.memoizedState=null,n)}function Pu(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ou(e,t,n,r){var i=e.child;return e=i.sibling,n=_c(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Du(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=_c(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=_c(o,r):(r=Tc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Fa(r),Ba(t,e.child,null,n),(e=Pu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Uu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Fu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uu(t,!0,n,null,a);break;case"together":Uu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ju(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Is|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=_c(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_c(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vu(e,t){switch(Ea(t),t.tag){case 1:return Ai(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),_i(Ei),_i(Ii),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(_i(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Ua()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(eo),null;case 4:return Ja(),null;case 10:return Gi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var zu=!1,qu=!1,Bu="function"===typeof WeakSet?WeakSet:Set,Wu=null;function Hu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Ku(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Gu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Ku(t,n,a)}i=i.next}while(i!==r)}}function $u(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Ju(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Ku(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Hu(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Hu(t,n);break;case 4:is(e,t,n)}}function Xu(e){var t=e.alternate;null!==t&&(e.alternate=null,Xu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if(Ju(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),zt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ju(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),$u(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&J(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":X(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&zt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Bu),t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Wu=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Wu;){var i=Wu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||zu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||qu;u=zu;var c=qu;if(zu=o,(qu=s)&&!c)for(Wu=i;null!==Wu;)s=(o=Wu).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Wu=s):fs(i);for(;null!==a;)Wu=a,ss(a,t,n),a=a.sibling;Wu=i,zu=u,qu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Wu=a):cs(e)}}function cs(e){for(;null!==Wu;){var t=Wu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qu||$u(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:zi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}qu||512&t.flags&&Yu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Wu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}function ls(e){for(;null!==Wu;){var t=Wu;if(t===e){Wu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Wu=n;break}Wu=t.return}}function fs(e){for(;null!==Wu;){var t=Wu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$u(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Yu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Yu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Wu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Wu=u;break}Wu=t.return}}var hs,ds=Math.ceil,ps=w.ReactCurrentDispatcher,vs=w.ReactCurrentOwner,ys=w.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,ws=0,bs=0,_s=bi(0),xs=0,Ts=null,Is=0,Es=0,Ss=0,Cs=null,As=null,Ns=0,Rs=1/0,Ps=!1,Os=null,Ds=null,Ls=!1,Ms=null,Us=0,Fs=0,js=null,Vs=-1,zs=0;function qs(){return 0!==(6&ms)?Je():-1!==Vs?Vs:Vs=Je()}function Bs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==ws?ws&-ws:null!==Vi.transition?(0===zs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),zs=e),zs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ws(e,t,n){if(50<Fs)throw Fs=0,js=null,Error(a(185));var r=Hs(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Es|=t),4===xs&&Ys(r,ws)),Ks(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Rs=Je()+500,Mi&&ji())),r)}function Hs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ks(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?ws:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Fi(e)}(Js.bind(null,e)):Fi(Js.bind(null,e)),ri((function(){0===ms&&ji()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Gs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gs(e,t){if(Vs=-1,zs=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?ws:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ms;ms|=2;var o=rc();for(gs===e&&ws===t||(Rs=Je()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Ki(),ps.current=o,ms=i,null!==ks?t=0:(gs=null,ws=0,t=xs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Ts,tc(e,0),Ys(e,r),Ks(e,Je()),n;if(6===t)Ys(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Ts,tc(e,0),Ys(e,r),Ks(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,As);break;case 3:if(Ys(e,r),(130023424&r)===r&&10<(t=Ns+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){qs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,As),t);break}lc(e,As);break;case 4:if(Ys(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,As),r);break}lc(e,As);break;default:throw Error(a(329))}}}return Ks(e,Je()),e.callbackNode===n?Gs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=As,As=n,null!==t&&$s(t)),e}function $s(e){null===As?As=e:As.push.apply(As,e)}function Ys(e,t){for(t&=~Ss,t&=~Es,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Js(e){if(0!==(6&ms))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Ks(e,Je()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Ts,tc(e,0),Ys(e,t),Ks(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,As),Ks(e,Je()),null}function Xs(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Rs=Je()+500,Mi&&ji())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&fc();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&ji()}}function ec(){bs=_s.current,_i(_s)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Ja(),_i(Ei),_i(Ii),ro();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:_i(eo);break;case 10:Gi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=_c(e.current,null),ws=bs=t,xs=0,Ts=null,Ss=Es=Is=0,As=Cs=null,null!==Ji){for(t=0;t<Ji.length;t++)if(null!==(r=(n=Ji[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ji=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Ki(),io.current=Xo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){xs=1,Ts=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=ws,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Aa&&1&s.mode){var m=fu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),hu(m,u,s,0,t),Fa(c);break e}}o=c,4!==xs&&(xs=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ds||!Ds.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(w){t=w,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Xo,null===e?Xo:e}function ic(){0!==xs&&3!==xs&&2!==xs||(xs=4),null===gs||0===(268435455&Is)&&0===(268435455&Es)||Ys(gs,ws)}function ac(e,t){var n=ms;ms|=2;var r=rc();for(gs===e&&ws===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Ki(),ms=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,ws=0,xs}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!$e();)sc(ks)}function sc(e){var t=hs(e.alternate,e,bs);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,bs)))return void(ks=n)}else{if(null!==(n=Vu(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return xs=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===xs&&(xs=5)}function lc(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,ws=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xr={focusedElem:e,selectionRange:n},Wu=t;null!==Wu;)if(e=(t=Wu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Wu=e;else for(;null!==Wu;){t=Wu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:zi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var b=w.body;null!=b&&(b.textContent="")}break;default:throw Error(a(163))}}catch(_){dc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Wu=e;break}Wu=t.return}v=Gu,Gu=!1}(e,r),function(e,t){for(Wu=t;null!==Wu;){var n=(t=Wu).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(T){dc(i,t,T)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Wu=n;else for(;null!==Wu;){t=Wu;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(Ns=Je())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var y=v.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Wu=n;for(var w=n.child;null!==w;){for(n=Wu=w;null!==Wu;){var b=(r=Wu).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Hu(r,r.return);var _=r.stateNode;if("function"===typeof _.componentWillUnmount){var x=r.return;try{_.props=r.memoizedProps,_.state=r.memoizedState,_.componentWillUnmount()}catch(T){dc(r,x,T)}}break;case 5:Hu(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==b?(b.return=r,Wu=b):ls(n)}w=w.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(T){dc(t,t.return,T)}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}}(e,r),hr(Xr),Xr=null,e.current=r,us(r,e,i),Ye(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Us=i),0===(o=e.pendingLanes)&&(Ds=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Ks(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Ps)throw Ps=!1,e=Os,Os=null,e;0!==(1&Us)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===js?Fs++:(Fs=0,js=e):Fs=0,ji()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=kt(Us),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Us=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Wu=e.current;null!==Wu;){var o=Wu,u=o.child;if(0!==(16&Wu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Wu=l;null!==Wu;){var f=Wu;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Wu=h;else for(;null!==Wu;){var d=(f=Wu).sibling,p=f.return;if(Xu(f),f===l){Wu=null;break}if(null!==d){d.return=p,Wu=d;break}Wu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Wu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Wu=u;else e:for(;null!==Wu;){if(0!==(2048&(o=Wu).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Wu=g;break e}Wu=o.return}}var k=e.current;for(Wu=k;null!==Wu;){var w=(u=Wu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Wu=w;else e:for(u=k;null!==Wu;){if(0!==(2048&(s=Wu).flags))try{switch(s.tag){case 0:case 11:case 15:$u(9,s)}}catch(_){dc(s,s.return,_)}if(s===u){Wu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Wu=b;break e}Wu=s.return}}if(ms=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=qs(),null!==(e=Hs(e,1))&&(yt(e,1,t),Ks(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ds||!Ds.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=qs(),null!==(t=Hs(t,1))&&(yt(t,1,e),Ks(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=qs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(ws&n)===n&&(4===xs||3===xs&&(130023424&ws)===ws&&500>Je()-Ns?tc(e,0):Ss|=n),Ks(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=qs();null!==(e=Hs(e,t))&&(yt(e,t,n),Ks(e,n))}function yc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return Ge(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,r){return new kc(e,t,n,r)}function bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _c(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)bc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Tc(n.children,i,o,t);case T:u=8,i|=8;break;case I:return(e=wc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=wc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=wc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Ic(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case S:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=wc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Tc(e,t,n,r){return(e=wc(7,e,r,t)).lanes=n,e}function Ic(e,t,n,r){return(e=wc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Ec(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Sc(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ac(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=wc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Nc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Rc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Pi(e,n,t)}return t}function Pc(e,t,n,r,i,a,o,u,s){return(e=Ac(n,r,!0,e,0,a,0,u,s)).context=Rc(null),n=e.current,(a=ta(r=qs(),i=Bs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Ks(e,r),e}function Oc(e,t,n,r){var i=t.current,a=qs(),o=Bs(i);return n=Rc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ws(i,o,a))&&ra(e,i,o),o}function Dc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Su(t),Ua();break;case 5:Xa(t);break;case 1:Ai(t.type)&&Oi(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(qi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ru(e,t,n):(xi(eo,1&eo.current),null!==(e=ju(e,t,n))?e.sibling:null);xi(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Fu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,_u(e,t,n)}return ju(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Aa&&0!==(1048576&t.flags)&&Ta(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ii.current);$i(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Eu(null,t,r,!0,o,n)):(t.tag=0,Aa&&o&&Ia(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=zi(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=wu(null,t,r,zi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:zi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:zi(r,i),n);case 3:e:{if(Su(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Sa=t,Aa=!0,Na=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ua(),r===i){t=ju(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&Da(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),xu(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Da(t),null;case 13:return Ru(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ba(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:zi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,xi(qi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Ei.current){t=ju(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$i(t,n),r=r(i=Yi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=zi(r=t.type,t.pendingProps),wu(e,t,r,i=zi(r.type,i),n);case 15:return bu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:zi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ai(r)?(e=!0,Oi(t)):e=!1,$i(t,n),fa(t,r,i),da(t,r,i,n),Eu(null,t,r,!0,e,n);case 19:return Fu(e,t,n);case 22:return _u(e,t,n)}throw Error(a(156,t.tag))};var Uc="function"===typeof reportError?reportError:function(e){console.error(e)};function Fc(e){this._internalRoot=e}function jc(e){this._internalRoot=e}function Vc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qc(){}function Bc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Dc(o);u.call(e)}}Oc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Dc(o);a.call(e)}}var o=Pc(t,r,e,0,null,!1,0,"",qc);return e._reactRootContainer=o,e[fi]=o.current,Vr(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Dc(s);u.call(e)}}var s=Ac(e,0,!1,null,0,!1,0,"",qc);return e._reactRootContainer=s,e[fi]=s.current,Vr(8===e.nodeType?e.parentNode:e),Zs((function(){Oc(t,s,n,r)})),s}(n,t,e,i,r);return Dc(o)}jc.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Oc(e,t,null,null)},jc.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Oc(null,e,null,null)})),t[fi]=null}},jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(mt(t,1|n),Ks(t,Je()),0===(6&ms)&&(Rs=Je()+500,ji()))}break;case 13:var r=qs();Zs((function(){return Ws(e,1,r)})),Mc(e,1)}},bt=function(e){13===e.tag&&(Ws(e,134217728,qs()),Mc(e,134217728))},_t=function(e){if(13===e.tag){var t=qs(),n=Bs(e);Ws(e,n,t),Mc(e,n)}},xt=function(){return gt},Tt=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Xs,Ae=Zs;var Wc={usingClientEntryPoint:!1,Events:[yi,mi,gi,Ee,Se,Xs]},Hc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Kc={bundleType:Hc.bundleType,version:Hc.version,rendererPackageName:Hc.rendererPackageName,rendererConfig:Hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:Hc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{it=Gc.inject(Kc),at=Gc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vc(t))throw Error(a(200));return Nc(e,t,null,n)},t.createRoot=function(e,t){if(!Vc(e))throw Error(a(299));var n=!1,r="",i=Uc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ac(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Fc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!zc(t))throw Error(a(200));return Bc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Vc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Uc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Pc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new jc(t)},t.render=function(e,t,n){if(!zc(t))throw Error(a(200));return Bc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!zc(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){Bc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Xs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Bc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,T=n[2]||l,I=m||g;r.push({name:y||a++,prefix:v||"",delimiter:T,optional:x,repeat:_,partial:b,asterisk:!!w,pattern:I?c(I):w?".*":"[^"+s(T)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(A([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(T.prototype),s(T.prototype,o,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,T=!1,I=null,E=-1,S=5,C=-1;function A(){return!(t.unstable_now()-C<S)}function N(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(T=!1,I=null)}}else T=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,x=function(){P.postMessage(null)}}else x=function(){m(N,0)};function O(e){I=e,T||(T=!0,x())}function D(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,D(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Je},SDK_VERSION:function(){return Kt},_DEFAULT_ENTRY_NAME:function(){return Rt},_addComponent:function(){return Lt},_addOrOverwriteComponent:function(){return Mt},_apps:function(){return Ot},_clearComponents:function(){return Vt},_components:function(){return Dt},_getProvider:function(){return Ft},_registerComponent:function(){return Ut},_removeServiceInstance:function(){return jt},deleteApp:function(){return Yt},getApp:function(){return Qt},getApps:function(){return $t},initializeApp:function(){return Gt},onLog:function(){return Zt},registerVersion:function(){return Xt},setLogLevel:function(){return en}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var p=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&h(e),o=t&&h(t),u=a||o;if(e&&h(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?d(i,l):".."===f?(d(i,l),c++):c&&(d(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&h(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},v="Invariant failed";function y(e,t){if(!e)throw new Error(v)}function m(e){return"/"===e.charAt(0)?e:"/"+e}function g(e){return"/"===e.charAt(0)?e.substr(1):e}function k(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function w(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function _(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=f({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=p(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function x(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var T=!("undefined"===typeof window||!window.document||!window.document.createElement);function I(e,t){t(window.confirm(e))}var E="popstate",S="hashchange";function C(){try{return window.history.state||{}}catch(e){return{}}}function A(e){void 0===e&&{},T||y(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?I:u,c=i.keyLength,l=void 0===c?6:c,h=e.basename?w(m(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&k(a,h),_(a,r,n)}function p(){return Math.random().toString(36).substr(2,l)}var v=x();function g(e){f(V,e),V.length=t.length,v.notifyListeners(V.location,V.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(d(e.state))}function N(){P(d(C()))}var R=!1;function P(e){if(R)!1,g();else{v.confirmTransitionTo(e,"POP",s,(function(t){t?g({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&0;var r=D.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}var O=d(C()),D=[O.key];function L(e){return h+b(e)}function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?(window.addEventListener(E,A),r&&window.addEventListener(S,N)):0===U&&(window.removeEventListener(E,A),r&&window.removeEventListener(S,N))}var j=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",a=_(e,r,p(),V.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=D.indexOf(V.location.key),l=D.slice(0,c+1);l.push(a.key),l,g({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=_(e,r,p(),V.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=D.indexOf(V.location.key);-1!==c&&(D[c]=a.key),g({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return j||(F(1),!0),function(){return j&&(!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return V}var N="hashchange",R={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:m},slash:{encodePath:m,decodePath:m}};function P(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function D(e){window.location.replace(P(window.location.href)+"#"+e)}function L(e){void 0===e&&(e={}),T||y(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?I:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?w(m(e.basename)):"",s=R[o],c=s.encodePath,l=s.decodePath;function h(){var e=l(O());return u&&(e=k(e,u)),_(e)}var d=x();function p(e){f(V,e),V.length=t.length,d.notifyListeners(V.location,V.action)}var v=!1,g=null;function E(){var e,t,n=O(),r=c(n);if(n!==r)D(r);else{var a=h(),o=V.location;if(!v&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(g===b(a))return;g=null,function(e){if(v)v=!1,p();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(b(t));-1===n&&(n=0);var r=L.lastIndexOf(b(e));-1===r&&(r=0);var i=n-r;i&&(v=!0,M(i))}(e)}))}}(a)}}var S=O(),C=c(S);S!==C&&D(C);var A=h(),L=[b(A)];function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?window.addEventListener(N,E):0===U&&window.removeEventListener(N,E)}var j=!1;var V={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=P(window.location.href)),n+"#"+c(u+b(e))},push:function(e,t){var n="PUSH",r=_(e,void 0,void 0,V.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=c(u+t);if(O()!==i){g=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(b(V.location)),o=L.slice(0,a+1);o.push(t),L=o,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=_(e,void 0,void 0,V.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=c(u+t);O()!==i&&(g=t,D(i));var a=L.indexOf(b(V.location));-1!==a&&(L[a]=t),p({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return j||(F(1),j=!0),function(){return j&&(j=!1,F(-1)),t()}},listen:function(e){var t=d.appendListener(e);return F(1),function(){F(-1),t()}}};return V}function M(e,t,n){return Math.min(Math.max(e,t),n)}function U(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=x();function l(e){f(m,e),m.length=m.entries.length,c.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,s)}var d=M(o,0,i.length-1),p=i.map((function(e){return _(e,void 0,"string"===typeof e?h():e.key||h())})),v=b;function y(e){var t=M(m.index+e,0,m.entries.length-1),r=m.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=_(e,t,h(),m.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=_(e,t,h(),m.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,l({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return m}var F=n(7),j=n.n(F),V=1073741823,z="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function q(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var B=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return z[e]=(z[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=q(t.props.value),t}l(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):V,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=j().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}l(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?V:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?V:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=j().object,i),{Provider:o,Consumer:u}},W=B,H=n(239),K=n.n(H);n(228);function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var Q=function(e){var t=W();return t.displayName=e,t},$=Q("Router-History"),Y=Q("Router"),J=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}l(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(Y.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement($.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var X={},Z=0;function ee(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=X[n]||(X[n]={});if(r[e])return r[e];var i=[],a={regexp:K()(e,i,t),keys:i};return Z<1e4&&(r[e]=a,Z++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var te=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement(Y.Consumer,null,(function(n){n||y(!1);var r=e.props.location||n.location,i=f({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ee(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(Y.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function ne(e){return"/"===e.charAt(0)?e:"/"+e}function re(e,t){if(!e)return t;var n=ne(e);return 0!==t.pathname.indexOf(n)?t:f({},t,{pathname:t.pathname.substr(n.length)})}function ie(e){return"string"===typeof e?e:b(e)}function ae(e){return function(){y(!1)}}function oe(){}t.Component;var ue=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement(Y.Consumer,null,(function(n){n||y(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?ee(a.pathname,f({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var se=t.useContext;t.Component;var ce=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=L(t.props),t}return l(n,e),n.prototype.render=function(){return t.createElement(J,{history:this.history,children:this.props.children})},n}(t.Component);var le=function(e,t){return"function"===typeof e?e(t):e},fe=function(e,t){return"string"===typeof e?_(e,null,null,t):e},he=function(e){return e},de=t.forwardRef;"undefined"===typeof de&&(de=he);var pe=de((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=G(e,["innerRef","navigate","onClick"]),u=o.target,s=f({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=he!==de&&n||r,t.createElement("a",s)}));var ve=de((function(e,n){var r=e.component,i=void 0===r?pe:r,a=e.replace,o=e.to,u=e.innerRef,s=G(e,["component","replace","to","innerRef"]);return t.createElement(Y.Consumer,null,(function(e){e||y(!1);var r=e.history,c=fe(le(o,e.location),e.location),l=c?r.createHref(c):"",h=f({},s,{href:l,navigate:function(){var t=le(o,e.location),n=b(e.location)===b(fe(t));(a||n?r.replace:r.push)(t)}});return he!==de?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),ye=function(e){return e},me=t.forwardRef;"undefined"===typeof me&&(me=ye);me((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,h=e.location,d=e.sensitive,p=e.strict,v=e.style,m=e.to,g=e.innerRef,k=G(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Y.Consumer,null,(function(e){e||y(!1);var r=h||e.location,a=fe(le(m,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=b?ee(r.pathname,{path:b,exact:c,sensitive:d,strict:p}):null,x=!!(l?l(_,r):_),T="function"===typeof s?s(x):s,I="function"===typeof v?v(x):v;x&&(T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(T,o),I=f({},I,u));var E=f({"aria-current":x&&i||null,className:T,style:I,to:a},k);return ye!==me?E.ref=n||g:E.innerRef=g,t.createElement(ve,E)}))}));function ge(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ge(a,r,i,o,u,"next",e)}function u(e){ge(a,r,i,o,u,"throw",e)}o(void 0)}))}}var we=n(757),be=n.n(we);function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Ne(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Pe(e,t){if(t&&("object"===Re(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}function Oe(e){var t=Ne();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pe(this,n)}}function De(e,t,n){return De=Ne()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},De.apply(null,arguments)}function Le(e){var t="function"===typeof Map?new Map:void 0;return Le=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return De(e,arguments,Ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},Le(e)}var Me=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Me(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Fe=function(e){return function(e){var t=Me(e);return Ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},je=function(e){try{return Ue.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ve(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&ze(n)&&(e[n]=Ve(e[n],t[n]));return e}function ze(e){return"__proto__"!==e}var qe=function(){function e(){var t=this;xe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ie(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Be(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(a)),""].join(".")}function We(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Ke(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ge(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Qe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function $e(){var e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ye(){return"object"===typeof indexedDB}var Je=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Se(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Se(a),Xe.prototype.create),a}return Ie(n)}(Le(Error)),Xe=function(){function e(t,n,r){xe(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ie(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ze(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Je(n,a,t);return o}}]),e}();function Ze(e,t){return e.replace(et,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var et=/\{\$([^}]+)}/g;function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(rt(u)&&rt(s)){if(!nt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function rt(e){return null!==e&&"object"===typeof e}function it(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function at(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ot(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ut(e,t){var n=new st(e,t);return n.subscribe.bind(n)}var st=function(){function e(t,n){var r=this;xe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ie(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ee(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ct),void 0===r.error&&(r.error=ct),void 0===r.complete&&(r.complete=ct);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ct(){}function lt(e){return e&&e._delegate?e._delegate:e}function ft(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ht(e){return function(e){if(Array.isArray(e))return a(e)}(e)||ft(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dt=function(){function e(t,n,r){xe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ie(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),pt="[DEFAULT]",vt=function(){function e(t,n){xe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ie(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new qe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pt})}catch(c){}var t,n=Ee(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ke(we.mark((function e(){var t;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ht(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ht(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Ee(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(qb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===pt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(qb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.component?this.component.multipleInstances?e:pt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var yt,mt,gt=function(){function e(t){xe(this,e),this.name=t,this.providers=new Map}return Ie(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new vt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),kt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(mt||(mt={}));var wt,bt,_t={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},xt=mt.INFO,Tt=(_e(yt={},mt.DEBUG,"log"),_e(yt,mt.VERBOSE,"log"),_e(yt,mt.INFO,"info"),_e(yt,mt.WARN,"warn"),_e(yt,mt.ERROR,"error"),yt),It=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Tt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Et=function(){function e(t){xe(this,e),this.name=t,this._logLevel=xt,this._logHandler=It,this._userLogHandler=null,kt.push(this)}return Ie(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in mt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?_t[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,mt.DEBUG].concat(t)),this._logHandler.apply(this,[this,mt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,mt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,mt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,mt.INFO].concat(t)),this._logHandler.apply(this,[this,mt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,mt.WARN].concat(t)),this._logHandler.apply(this,[this,mt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,mt.ERROR].concat(t)),this._logHandler.apply(this,[this,mt.ERROR].concat(t))}}]),e}();var St=function(){function e(t){xe(this,e),this.container=t}return Ie(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ct="@firebase/app",At="0.7.11",Nt=new Et("@firebase/app"),Rt="[DEFAULT]",Pt=(_e(wt={},Ct,"fire-core"),_e(wt,"@firebase/app-compat","fire-core-compat"),_e(wt,"@firebase/analytics","fire-analytics"),_e(wt,"@firebase/analytics-compat","fire-analytics-compat"),_e(wt,"@firebase/app-check","fire-app-check"),_e(wt,"@firebase/app-check-compat","fire-app-check-compat"),_e(wt,"@firebase/auth","fire-auth"),_e(wt,"@firebase/auth-compat","fire-auth-compat"),_e(wt,"@firebase/database","fire-rtdb"),_e(wt,"@firebase/database-compat","fire-rtdb-compat"),_e(wt,"@firebase/functions","fire-fn"),_e(wt,"@firebase/functions-compat","fire-fn-compat"),_e(wt,"@firebase/installations","fire-iid"),_e(wt,"@firebase/installations-compat","fire-iid-compat"),_e(wt,"@firebase/messaging","fire-fcm"),_e(wt,"@firebase/messaging-compat","fire-fcm-compat"),_e(wt,"@firebase/performance","fire-perf"),_e(wt,"@firebase/performance-compat","fire-perf-compat"),_e(wt,"@firebase/remote-config","fire-rc"),_e(wt,"@firebase/remote-config-compat","fire-rc-compat"),_e(wt,"@firebase/storage","fire-gcs"),_e(wt,"@firebase/storage-compat","fire-gcs-compat"),_e(wt,"@firebase/firestore","fire-fst"),_e(wt,"@firebase/firestore-compat","fire-fst-compat"),_e(wt,"fire-js","fire-js"),_e(wt,"firebase","fire-js-all"),wt),Ot=new Map,Dt=new Map;function Lt(e,t){try{e.container.addComponent(t)}catch(n){Nt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Mt(e,t){e.container.addOrOverwriteComponent(t)}function Ut(e){var t=e.name;if(Dt.has(t))return Nt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Dt.set(t,e);var n,r=Ee(Ot.values());try{for(r.s();!(n=r.n()).done;){Lt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ft(e,t){return e.container.getProvider(t)}function jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rt;Ft(e,t).clearInstance(n)}function Vt(){Dt.clear()}var zt,qt,Bt=(_e(bt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),_e(bt,"bad-app-name","Illegal App name: '{$appName}"),_e(bt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),_e(bt,"app-deleted","Firebase App named '{$appName}' already deleted"),_e(bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_e(bt,"invalid-log-argument","First argument to `onLog` must be null or a function."),bt),Wt=new Xe("app","Firebase",Bt),Ht=function(){function e(t,n,r){var i=this;xe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dt("app",(function(){return i}),"PUBLIC"))}return Ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}]),e}(),Kt="9.6.1";function Gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Wt.create("bad-app-name",{appName:String(i)});var a=Ot.get(i);if(a){if(nt(e,a.options)&&nt(r,a.config))return a;throw Wt.create("duplicate-app",{appName:i})}var o,u=new gt(i),s=Ee(Dt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ht(e,r,u);return Ot.set(i,l),l}function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=Ot.get(e);if(!t)throw Wt.create("no-app",{appName:e});return t}function $t(){return Array.from(Ot.values())}function Yt(e){return Jt.apply(this,arguments)}function Jt(){return(Jt=ke(we.mark((function e(t){var n;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ot.has(n)){e.next=6;break}return Ot.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t,n){var r,i=null!==(r=Pt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Nt.warn(u.join(" "))}Ut(new dt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Zt(e,t){if(null!==e&&"function"!==typeof e)throw Wt.create("invalid-log-argument");!function(e,t){var n,r=Ee(kt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=_t[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:mt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function en(e){var t;t=e,kt.forEach((function(e){e.setLogLevel(t)}))}zt="",Ut(new dt("platform-logger",(function(e){return new St(e)}),"PRIVATE")),Xt(Ct,At,zt),Xt(Ct,At,"esm2017"),Xt("fire-js","");var tn=function(){function e(t,n){var r=this;xe(this,e),this._delegate=t,this.firebase=n,Lt(t,new dt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Yt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Lt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Mt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),nn=(_e(qt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),_e(qt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),qt),rn=new Xe("app-compat","Firebase",nn);var an=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Gt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(tt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Xt,setLogLevel:en,onLog:Zt,apps:null,SDK_VERSION:Kt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ut(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw rn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ve(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!tt(n,e=e||Rt))throw rn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(tn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ve(n,e)},createSubscribe:ut,ErrorFactory:Xe,deepExtend:Ve}),n}(),on=new Et("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){on.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var un=self.firebase.SDK_VERSION;un&&un.indexOf("LITE")>=0&&on.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var sn=an;!function(e){Xt("@firebase/app-compat","0.1.12",e)}();function cn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}function ln(){return ln="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=cn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ln.apply(this,arguments)}sn.registerVersion("firebase","9.6.1","app-compat");function fn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var hn;Object.create;var dn="facebook.com",pn="github.com",vn="google.com",yn="password",mn="twitter.com",gn="EMAIL_SIGNIN",kn="PASSWORD_RESET",wn="RECOVER_EMAIL",bn="REVERT_SECOND_FACTOR_ADDITION",_n="VERIFY_AND_CHANGE_EMAIL",xn="VERIFY_EMAIL";function Tn(){return _e({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var In=function(){var e;return _e(e={},"admin-restricted-operation","This operation is restricted to administrators only."),_e(e,"argument-error",""),_e(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),_e(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),_e(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),_e(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),_e(e,"cordova-not-ready","Cordova framework is not ready."),_e(e,"cors-unsupported","This browser is not supported."),_e(e,"credential-already-in-use","This credential is already associated with a different user account."),_e(e,"custom-token-mismatch","The custom token corresponds to a different audience."),_e(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),_e(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),_e(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),_e(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),_e(e,"email-already-in-use","The email address is already in use by another account."),_e(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),_e(e,"expired-action-code","The action code has expired."),_e(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),_e(e,"internal-error","An internal AuthError has occurred."),_e(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),_e(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),_e(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),_e(e,"invalid-auth-event","An internal AuthError has occurred."),_e(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),_e(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),_e(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),_e(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),_e(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),_e(e,"invalid-email","The email address is badly formatted."),_e(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),_e(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),_e(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),_e(e,"invalid-credential","The supplied auth credential is malformed or has expired."),_e(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),_e(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),_e(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),_e(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),_e(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),_e(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),_e(e,"wrong-password","The password is invalid or the user does not have a password."),_e(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),_e(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),_e(e,"invalid-provider-id","The specified provider ID is invalid."),_e(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),_e(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),_e(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),_e(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),_e(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),_e(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),_e(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),_e(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),_e(e,"missing-continue-uri","A continue URL must be provided in the request."),_e(e,"missing-iframe-start","An internal AuthError has occurred."),_e(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),_e(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),_e(e,"missing-multi-factor-info","No second factor identifier is provided."),_e(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),_e(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),_e(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),_e(e,"app-deleted","This instance of FirebaseApp has been deleted."),_e(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),_e(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),_e(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),_e(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),_e(e,"no-auth-event","An internal AuthError has occurred."),_e(e,"no-such-provider","User was not linked to an account with the given provider."),_e(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),_e(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),_e(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),_e(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),_e(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),_e(e,"provider-already-linked","User can only be linked to one identity for the given provider."),_e(e,"quota-exceeded","The project's quota for this operation has been exceeded."),_e(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),_e(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),_e(e,"rejected-credential","The request contains malformed or mismatching credentials."),_e(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),_e(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),_e(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),_e(e,"timeout","The operation has timed out."),_e(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),_e(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),_e(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),_e(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),_e(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),_e(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),_e(e,"unverified-email","The operation requires a verified email."),_e(e,"user-cancelled","The user did not grant your application the permissions it requested."),_e(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),_e(e,"user-disabled","The user account has been disabled by an administrator."),_e(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),_e(e,"user-signed-out",""),_e(e,"weak-password","The password must be 6 characters long or more."),_e(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),_e(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},En=Tn,Sn=new Xe("auth","Firebase",Tn()),Cn=new Et("@firebase/auth");function An(e){if(Cn.logLevel<=mt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Cn.error.apply(Cn,["Auth (".concat(Kt,"): ").concat(e)].concat(n))}}function Nn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Dn.apply(void 0,[e].concat(n))}function Rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dn.apply(void 0,[e].concat(n))}function Pn(e,t,n){var r=Object.assign(Object.assign({},En()),_e({},t,n));return new Xe("auth","Firebase",r).create(t,{appName:e.name})}function On(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Nn(e,"argument-error"),Pn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ht(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ht(o)))}return Sn.create.apply(Sn,[e].concat(n))}function Ln(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Dn.apply(void 0,[t].concat(r))}}function Mn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw An(t),new Error(t)}function Un(e,t){e||Mn(t)}var Fn=new Map;function jn(e){Un(e instanceof Function,"Expected a class definition");var t=Fn.get(e);return t?(Un(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fn.set(e,t),t)}function Vn(e,t){var n=Ft(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(nt(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Nn(r,"already-initialized")}return n.initialize({options:t})}function zn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qn(){return"http:"===Bn()||"https:"===Bn()}function Bn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Wn=function(){function e(t,n){xe(this,e),this.shortDelay=t,this.longDelay=n,Un(n>t,"Short delay should be less than long delay!"),this.isMobile=He()||Qe()}return Ie(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qn()||Ge()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Hn(e,t){Un(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Kn=function(){function e(){xe(this,e)}return Ie(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Gn=(_e(hn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),_e(hn,"MISSING_CUSTOM_TOKEN","internal-error"),_e(hn,"INVALID_IDENTIFIER","invalid-email"),_e(hn,"MISSING_CONTINUE_URI","internal-error"),_e(hn,"INVALID_PASSWORD","wrong-password"),_e(hn,"MISSING_PASSWORD","internal-error"),_e(hn,"EMAIL_EXISTS","email-already-in-use"),_e(hn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),_e(hn,"INVALID_IDP_RESPONSE","invalid-credential"),_e(hn,"INVALID_PENDING_TOKEN","invalid-credential"),_e(hn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),_e(hn,"MISSING_REQ_TYPE","internal-error"),_e(hn,"EMAIL_NOT_FOUND","user-not-found"),_e(hn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),_e(hn,"EXPIRED_OOB_CODE","expired-action-code"),_e(hn,"INVALID_OOB_CODE","invalid-action-code"),_e(hn,"MISSING_OOB_CODE","internal-error"),_e(hn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),_e(hn,"INVALID_ID_TOKEN","invalid-user-token"),_e(hn,"TOKEN_EXPIRED","user-token-expired"),_e(hn,"USER_NOT_FOUND","user-token-expired"),_e(hn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),_e(hn,"INVALID_CODE","invalid-verification-code"),_e(hn,"INVALID_SESSION_INFO","invalid-verification-id"),_e(hn,"INVALID_TEMPORARY_PROOF","invalid-credential"),_e(hn,"MISSING_SESSION_INFO","missing-verification-id"),_e(hn,"SESSION_EXPIRED","code-expired"),_e(hn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),_e(hn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),_e(hn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),_e(hn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),_e(hn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),_e(hn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),_e(hn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),_e(hn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),_e(hn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),_e(hn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),_e(hn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),hn),Qn=new Wn(3e4,6e4);function $n(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Yn(e,t,n,r){return Jn.apply(this,arguments)}function Jn(){return Jn=ke(be().mark((function e(t,n,r,i){var a,o=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Xn(t,a,ke(be().mark((function e(){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=it(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Kn.fetch()(nr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Xn(e,t,n){return Zn.apply(this,arguments)}function Zn(){return(Zn=ke(be().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Gn),n),e.prev=2,a=new rr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ir(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ir(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw ir(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Pn(t,p,d);case 30:Nn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Je)){e.next=37;break}throw e.t0;case 37:Nn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function er(e,t,n,r){return tr.apply(this,arguments)}function tr(){return tr=ke(be().mark((function e(t,n,r,i){var a,o,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Yn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Nn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),tr.apply(this,arguments)}function nr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Hn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var rr=function(){function e(t){var n=this;xe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Rn(n.auth,"timeout"))}),Qn.get())}))}return Ie(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ir(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Rn(e,t,r);return i.customData._tokenResponse=n,i}function ar(e,t){return or.apply(this,arguments)}function or(){return(or=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e,t){return sr.apply(this,arguments)}function sr(){return(sr=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t){return lr.apply(this,arguments)}function lr(){return(lr=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function hr(){return hr=ke(be().mark((function e(t){var n,r,i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=lt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ln((a=pr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:fr(dr(a.auth_time)),issuedAtTime:fr(dr(a.iat)),expirationTime:fr(dr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function dr(e){return 1e3*Number(e)}function pr(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return An("JWT malformed, contained fewer than 3 sections"),null;try{var a=je(r);return a?JSON.parse(a):(An("Failed to decode base64 JWT payload"),null)}catch(o){return An("Caught error parsing JWT payload as JSON",o),null}}function vr(e,t){return yr.apply(this,arguments)}function yr(){return yr=ke(be().mark((function e(t,n){var r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Je&&mr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),yr.apply(this,arguments)}function mr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var gr=function(){function e(t){xe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ie(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),kr=function(){function e(t,n){xe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ie(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function wr(e){return br.apply(this,arguments)}function br(){return br=ke(be().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,vr(t,cr(r,{idToken:i}));case 6:Ln(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Tr(o.providerUserInfo):[],s=xr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new kr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function _r(){return(_r=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt(t),e.next=3,wr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ht(n),ht(t))}function Tr(e){return e.map((function(e){var t=e.providerId,n=fn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ir(e,t){return Er.apply(this,arguments)}function Er(){return(Er=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(t,{},ke(be().mark((function e(){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=nr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Kn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sr=function(){function e(){xe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ie(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ln(e.idToken,"internal-error"),Ln("undefined"!==typeof e.idToken,"internal-error"),Ln("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=pr(e);return Ln(t,"internal-error"),Ln("undefined"!==typeof t.exp,"internal-error"),Ln("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ke(be().mark((function e(t){var n,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ln(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Mn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ln("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ln("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ln("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Cr(e,t){Ln("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ar=function(){function e(t){xe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=fn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new kr(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ie(e,[{key:"getIdToken",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ln(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return hr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return _r.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ln(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Ln(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ke(be().mark((function e(t){var n,r,i=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,wr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,vr(this,ar(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Ln(k&&x,t,"internal-error");var T=Sr.fromJSON(this.name,x);Ln("string"===typeof k,t,"internal-error"),Cr(f,t.name),Cr(h,t.name),Ln("boolean"===typeof w,t,"internal-error"),Ln("boolean"===typeof b,t,"internal-error"),Cr(d,t.name),Cr(p,t.name),Cr(v,t.name),Cr(y,t.name),Cr(m,t.name),Cr(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=ke(be().mark((function t(n,r){var i,a,o,u=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Sr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,wr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Nr=function(){function e(){xe(this,e),this.type="NONE",this.storage={}}return Ie(e,[{key:"_isAvailable",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Nr.type="NONE";var Rr=Nr;function Pr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Or=function(){function e(t,n,r){xe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Pr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Pr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ie(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ar._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ke(be().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(jn(Rr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||jn(Rr),u=Pr(i,n.config.apiKey,n.name),s=null,c=Ee(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ar._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Dr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Lr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vr(t))return"Blackberry";if(zr(t))return"Webos";if(Mr(t))return"Safari";if((t.includes("chrome/")||Ur(t))&&!t.includes("edge/"))return"Chrome";if(jr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/firefox\//i.test(e)}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/crios\//i.test(e)}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iemobile/i.test(e)}function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/android/i.test(e)}function Vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/blackberry/i.test(e)}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/webos/i.test(e)}function qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iphone|ipad|ipod/i.test(e)}function Br(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return qr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Wr(){return $e()&&10===document.documentMode}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return qr(e)||jr(e)||zr(e)||Vr(e)||/windows phone/i.test(e)||Fr(e)}function Kr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Dr(We());break;case"Worker":t="".concat(Dr(We()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Kt,"/").concat(r)}var Gr=function(){function e(t,n){xe(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return Ie(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=jn(t)),this._initializationPromise=this.queue(ke(be().mark((function r(){var i,a;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Or.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Ln(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?lt(t):null)&&Ln(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Ln(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(jn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Xe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ln(n=t&&jn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Or.create(this,[jn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ln(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ln(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_e({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qr(e){return lt(e)}var $r=function(){function e(t){var n=this;xe(this,e),this.auth=t,this.observer=null,this.addObserver=ut((function(e){return n.observer=e}))}return Ie(e,[{key:"next",get:function(){return Ln(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Yr(e,t,n){var r=Qr(e);Ln(r._canInitEmulator,r,"emulator-config-failed"),Ln(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Jr(t),o=function(e){var t=Jr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Xr(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Xr(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Jr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Zr=function(){function e(t,n){xe(this,e),this.providerId=t,this.signInMethod=n}return Ie(e,[{key:"toJSON",value:function(){return Mn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Mn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Mn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Mn("not implemented")}}]),e}();function ei(e,t){return ti.apply(this,arguments)}function ti(){return(ti=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:resetPassword",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return(ri=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return(ai=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:update",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oi(e,t){return ui.apply(this,arguments)}function ui(){return(ui=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signInWithPassword",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function si(e,t){return ci.apply(this,arguments)}function ci(){return(ci=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:sendOobCode",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e,t){return fi.apply(this,arguments)}function fi(){return(fi=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",si(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hi(e,t){return di.apply(this,arguments)}function di(){return(di=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",si(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pi(e,t){return vi.apply(this,arguments)}function vi(){return(vi=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",si(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",si(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signInWithEmailLink",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return(bi=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signInWithEmailLink",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _i=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return xe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ie(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",oi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",gi(t,{email:this._email,oobCode:this._password}));case 5:Nn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ni(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Nn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Zr);function xi(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signInWithIdp",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ii=function(e){Ce(n,e);var t=Oe(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ie(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return xi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,xi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=it(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=fn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Zr);function Ei(e,t){return Si.apply(this,arguments)}function Si(){return(Si=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:sendVerificationCode",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(){return(Ci=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signInWithPhoneNumber",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(){return(Ai=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t,"POST","/v1/accounts:signInWithPhoneNumber",$n(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ir(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ni=_e({},"USER_NOT_FOUND","user-not-found");function Ri(){return(Ri=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",er(t,"POST","/v1/accounts:signInWithPhoneNumber",$n(t,r),Ni));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pi=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ie(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ci.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ai.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ri.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Zr);var Oi=function(){function e(t){var n,r,i,a,o,u;xe(this,e);var s=at(ot(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Ln(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ie(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=at(ot(e)).link,n=t?at(ot(t)).deep_link_id:null,r=at(ot(e)).deep_link_id;return(r?at(ot(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(qb){return null}}}]),e}();var Di=function(){function e(){xe(this,e),this.providerId=e.PROVIDER_ID}return Ie(e,null,[{key:"credential",value:function(e,t){return _i._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Oi.parseLink(t);return Ln(n,"argument-error"),_i._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Di.PROVIDER_ID="password",Di.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Li=function(){function e(t){xe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ie(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Mi=function(e){Ce(n,e);var t=Oe(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ie(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ht(this.scopes)}}]),n}(Li),Ui=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ln(e.idToken||e.accessToken,"argument-error"),Ii._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ln("providerId"in t&&"signInMethod"in t,"argument-error"),Ii._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Mi),Fi=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.call(this,"facebook.com")}return Ie(n,null,[{key:"credential",value:function(e){return Ii._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(qb){return null}}}]),n}(Mi);Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fi.PROVIDER_ID="facebook.com";var ji=function(e){Ce(n,e);var t=Oe(n);function n(){var e;return xe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ie(n,null,[{key:"credential",value:function(e,t){return Ii._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(qb){return null}}}]),n}(Mi);ji.GOOGLE_SIGN_IN_METHOD="google.com",ji.PROVIDER_ID="google.com";var Vi=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.call(this,"github.com")}return Ie(n,null,[{key:"credential",value:function(e){return Ii._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(qb){return null}}}]),n}(Mi);Vi.GITHUB_SIGN_IN_METHOD="github.com",Vi.PROVIDER_ID="github.com";var zi=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ie(n,[{key:"_getIdTokenResponse",value:function(e){return xi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,xi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Zr),qi=function(e){Ce(n,e);var t=Oe(n);function n(e){return xe(this,n),Ln(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ie(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=zi.fromJSON(e);return Ln(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return zi._create(r,n)}catch(i){return null}}}]),n}(Li),Bi=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.call(this,"twitter.com")}return Ie(n,null,[{key:"credential",value:function(e,t){return Ii._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(qb){return null}}}]),n}(Mi);function Wi(e,t){return Hi.apply(this,arguments)}function Hi(){return(Hi=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signUp",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Bi.TWITTER_SIGN_IN_METHOD="twitter.com",Bi.PROVIDER_ID="twitter.com";var Ki=function(){function e(t){xe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ie(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ke(be().mark((function t(n,r,i){var a,o,u,s,c=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ar._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Gi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ke(be().mark((function t(n,r,i){var a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Gi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Gi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Qi(){return Qi=ke(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ki({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Wi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ki._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}var $i=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a){var o,u;return xe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Se(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ie(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Je);function Yi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw $i._fromErrorAndOperation(e,n,t,r);throw n}))}function Ji(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Xi(e,t){return Zi.apply(this,arguments)}function Zi(){return Zi=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,na(!0,r,n);case 3:return e.t0=ur,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ji(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return ta=ke(be().mark((function e(t,n){var r,i,a=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=vr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ki._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}function na(e,t,n){return ra.apply(this,arguments)}function ra(){return(ra=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(n);case 2:i=Ji(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ln(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t){return aa.apply(this,arguments)}function aa(){return aa=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,vr(t,Yi(i,a,n,t),r);case 6:return Ln((o=e.sent).idToken,i,"internal-error"),Ln(u=pr(o.idToken),i,"internal-error"),s=u.sub,Ln(t.uid===s,i,"user-mismatch"),e.abrupt("return",Ki._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Nn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),aa.apply(this,arguments)}function oa(e,t){return ua.apply(this,arguments)}function ua(){return ua=ke(be().mark((function e(t,n){var r,i,a,o,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Yi(t,i,n);case 4:return a=e.sent,e.next=7,Ki._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function sa(e,t){return ca.apply(this,arguments)}function ca(){return(ca=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(Qr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(e,t){return fa.apply(this,arguments)}function fa(){return(fa=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,na(!1,r,n.providerId);case 3:return e.abrupt("return",ea(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(e,t){return da.apply(this,arguments)}function da(){return(da=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ia(lt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(e,t){return va.apply(this,arguments)}function va(){return(va=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:signInWithCustomToken",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(){return(ya=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qr(t),e.next=3,pa(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ki._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ma=function(){function e(t,n){xe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ie(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ga._fromServerResponse(e,t):Nn(e,"internal-error")}}]),e}(),ga=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ie(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ma);function ka(e,t,n){var r;Ln((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ln("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ln(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ln(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function wa(){return(wa=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),a={requestType:"PASSWORD_RESET",email:n},r&&ka(i,a,r),e.next=5,hi(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(){return(ba=ke(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ei(lt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _a(){return(_a=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii(lt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t){return Ta.apply(this,arguments)}function Ta(){return(Ta=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,ei(r,{oobCode:n});case 3:i=e.sent,Ln(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ln(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ln(i.mfaInfo,r,"internal-error");case 13:Ln(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ma._fromServerResponse(Qr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(){return(Ia=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(lt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t,n){return Sa.apply(this,arguments)}function Sa(){return(Sa=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qr(t),e.next=3,Wi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Ki._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t,n){return sa(lt(e),Di.credential(t,n))}function Aa(){return(Aa=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),a={requestType:"EMAIL_SIGNIN",email:n},Ln(r.handleCodeInApp,i,"argument-error"),r&&ka(i,a,r),e.next=6,pi(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(){return(Na=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),Ln((a=Di.credentialWithLink(n,r||zn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",sa(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:createAuthUri",$n(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(){return(Oa=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qn()?zn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ra(lt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(){return(Da=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ka(r.auth,a,n),e.next=8,li(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(){return(La=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ka(i.auth,o,r),e.next=8,yi(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t){return ja.apply(this,arguments)}function ja(){return(ja=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=lt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,vr(a,Ma(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e,t,n){return za.apply(this,arguments)}function za(){return(za=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,vr(t,ni(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qa=Ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ba=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a){var o;return xe(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ie(n)}(qa),Wa=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"facebook.com",r)}return Ie(n)}(qa),Ha=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ie(n)}(Ba),Ka=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"google.com",r)}return Ie(n)}(qa),Ga=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){return xe(this,n),t.call(this,e,"twitter.com",r,i)}return Ie(n)}(Ba);function Qa(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=pr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new qa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Wa(a,i);case"github.com":return new Ha(a,i);case"google.com":return new Ka(a,i);case"twitter.com":return new Ga(a,i,e.screenName||null);case"custom":case"anonymous":return new qa(a,null);default:return new qa(a,r,i)}}(n)}var $a=function(){function e(t,n){xe(this,e),this.type=t,this.credential=n}return Ie(e,[{key:"toJSON",value:function(){return{multiFactorSession:_e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ya=function(){function e(t,n,r){xe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ie(e,[{key:"resolveSignIn",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Qr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ma._fromServerResponse(r,e)}));Ln(i.mfaPendingCredential,r,"internal-error");var o=$a._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ke(be().mark((function e(t){var a,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ki._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Ln(n.user,r,"internal-error"),e.abrupt("return",Ki._forOperation(n.user,n.operationType,u));case 17:Nn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ja(e,t){return Yn(e,"POST","/v2/accounts/mfaEnrollment:start",$n(e,t))}var Xa=function(){function e(t){var n=this;xe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ma._fromServerResponse(t.auth,e)})))}))}return Ie(e,[{key:"getSession",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=$a,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,vr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,vr(this.user,Yn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",$n(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Za=new WeakMap;var eo="__sak",to=function(){function e(t,n){xe(this,e),this.storageRetriever=t,this.type=n}return Ie(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(eo,"1"),this.storage.removeItem(eo),Promise.resolve(!0)):Promise.resolve(!1)}catch(qb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var no=function(e){Ce(n,e);var t=Oe(n);function n(){var e;return xe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=We();return Mr(e)||qr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Hr(),e._shouldAllowMigration=!0,e}return Ie(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Wr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ke(be().mark((function e(t,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(Ae(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ke(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(Ae(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(Ae(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(to);no.type="LOCAL";var ro=no,io=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ie(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(to);io.type="SESSION";var ao=io;function oo(e){return Promise.all(e.map(function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var uo=function(){function e(t){xe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ie(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,oo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function so(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}uo.receivers=[];var co=function(){function e(t){xe(this,e),this.target=t,this.handlers=new Set}return Ie(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=so("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function lo(){return window}function fo(){return"undefined"!==typeof lo().WorkerGlobalScope&&"function"===typeof lo().importScripts}function ho(){return po.apply(this,arguments)}function po(){return(po=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function vo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var yo="firebaseLocalStorageDb",mo="firebaseLocalStorage",go="fbase_key",ko=function(){function e(t){xe(this,e),this.request=t}return Ie(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function wo(e,t){return e.transaction([mo],t?"readwrite":"readonly").objectStore(mo)}function bo(){var e=indexedDB.deleteDatabase(yo);return new ko(e).toPromise()}function _o(){var e=indexedDB.open(yo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(mo,{keyPath:go})}catch(r){n(r)}})),e.addEventListener("success",ke(be().mark((function n(){var r;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(mo)){n.next=12;break}return r.close(),n.next=5,bo();case 5:return n.t0=t,n.next=8,_o();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function xo(e,t,n){return To.apply(this,arguments)}function To(){return To=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wo(t,!0).put((_e(i={},go,n),_e(i,"value",r),i)),e.abrupt("return",new ko(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return Eo=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t,!1).get(n),e.next=3,new ko(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function So(e,t){var n=wo(e,!0).delete(t);return new ko(n).toPromise()}var Co=function(){function e(){xe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ie(e,[{key:"_openDb",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,_o();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ke(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=uo._getInstance(fo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ke(be().mark((function e(n,r){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ke(be().mark((function e(){var t,n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ho();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new co(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&vo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,_o();case 5:return t=e.sent,e.next=8,xo(t,eo,"1");case 8:return e.next=10,So(t,eo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ke(be().mark((function e(t,n){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return xo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Io(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return So(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=wo(e,!1).getAll();return new ko(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ee(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Co.type="LOCAL";var Ao=Co;function No(e,t){return Yn(e,"POST","/v2/accounts/mfaSignIn:start",$n(e,t))}function Ro(e){return Po.apply(this,arguments)}function Po(){return(Po=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Rn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Do(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Lo=1e12,Mo=function(){function e(t){xe(this,e),this.auth=t,this.counter=Lo,this._widgets=new Map}return Ie(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Uo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Lo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Lo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Lo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Uo=function(){function e(t,n,r){var i=this;xe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ln(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ie(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Fo=Do("rcb"),jo=new Wn(3e4,6e4),Vo="https://www.google.com/recaptcha/api.js?",zo=function(){function e(){xe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!lo().grecaptcha}return Ie(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ln(qo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(lo().grecaptcha):new Promise((function(r,i){var a=lo().setTimeout((function(){i(Rn(e,"network-request-failed"))}),jo.get());lo()[Fo]=function(){lo().clearTimeout(a),delete lo()[Fo];var o=lo().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Rn(e,"internal-error"))},Oo("".concat(Vo,"?").concat(it({onload:Fo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Rn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!lo().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function qo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Bo=function(){function e(){xe(this,e)}return Ie(e,[{key:"load",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Mo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Wo="recaptcha",Ho={theme:"light",type:"image"},Ko=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ho),r=arguments.length>2?arguments[2]:void 0;xe(this,e),this.parameters=n,this.type=Wo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qr(r),this.isInvisible="invisible"===this.parameters.size,Ln("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ln(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bo:new zo,this.validateStartingState()}return Ie(e,[{key:"verify",value:function(){var e=ke(be().mark((function e(){var t,n,r,i=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ln(!this.parameters.sitekey,this.auth,"argument-error"),Ln(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ln("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=lo()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ln(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ln(qn()&&!fo(),this.auth,"internal-error"),e.next=3,Go();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ro(this.auth);case 8:Ln(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ln(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Go(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Qo=function(){function e(t,n){xe(this,e),this.verificationId=t,this.onConfirmation=n}return Ie(e,[{key:"confirm",value:function(e){var t=Pi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function $o(){return($o=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qr(t),e.next=3,Zo(i,n,lt(r));case 3:return a=e.sent,e.abrupt("return",new Qo(a,(function(e){return sa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t,n){return Jo.apply(this,arguments)}function Jo(){return(Jo=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),e.next=3,na(!1,i,"phone");case 3:return e.next=5,Zo(i.auth,n,lt(r));case 5:return a=e.sent,e.abrupt("return",new Qo(a,(function(e){return la(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),e.next=3,Zo(i.auth,n,lt(r));case 3:return a=e.sent,e.abrupt("return",new Qo(a,(function(e){return ha(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t,n){return eu.apply(this,arguments)}function eu(){return eu=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ln("string"===typeof a,t,"argument-error"),Ln(r.type===Wo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Ln("enroll"===u.type,t,"internal-error"),e.next=13,Ja(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Ln("signin"===u.type,t,"internal-error"),Ln(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,No(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ei(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),eu.apply(this,arguments)}function tu(){return(tu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea(lt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nu=function(){function e(t){xe(this,e),this.providerId=e.PROVIDER_ID,this.auth=Qr(t)}return Ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return Zo(this.auth,e,lt(t))}}],[{key:"credential",value:function(e,t){return Pi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Pi._fromTokenResponse(n,r):null}}]),e}();function ru(e,t){return t?jn(t):(Ln(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}nu.PROVIDER_ID="phone",nu.PHONE_SIGN_IN_METHOD="phone";var iu=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ie(n,[{key:"_getIdTokenResponse",value:function(e){return xi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return xi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return xi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Zr);function au(e){return oa(e.auth,new iu(e),e.bypassAuthState)}function ou(e){var t=e.auth,n=e.user;return Ln(n,t,"internal-error"),ia(n,new iu(e),e.bypassAuthState)}function uu(e){return su.apply(this,arguments)}function su(){return(su=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ln(r=t.user,n,"internal-error"),e.abrupt("return",ea(r,new iu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];xe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ie(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ke(be().mark((function t(n,r){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return au;case"linkViaPopup":case"linkViaRedirect":return uu;case"reauthViaPopup":case"reauthViaRedirect":return ou;default:Nn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),lu=new Wn(2e3,1e4);function fu(e,t,n){return hu.apply(this,arguments)}function hu(){return(hu=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qr(t),On(t,n,Li),a=ru(i,r),o=new yu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function du(){return(du=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=lt(t)).auth,n,Li),a=ru(i.auth,r),o=new yu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pu(e,t,n){return vu.apply(this,arguments)}function vu(){return(vu=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=lt(t)).auth,n,Li),a=ru(i.auth,r),o=new yu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yu=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a,o){var u;return xe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Se(u),u}return Ie(n,[{key:"executeNotNull",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ln(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ke(be().mark((function e(){var t,n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Un(1===this.filter.length,"Popup operations only handle one event"),t=so(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Rn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Rn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Rn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,lu.get())}()}}]),n}(cu);yu.currentPopupAction=null;var mu=new Map,gu=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ie(n,[{key:"execute",value:function(){var e=ke(be().mark((function e(){var t,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=mu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ku(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ln(Ae(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:mu.set(this.auth._key(),t);case 21:return this.bypassAuthState||mu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ke(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ln(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ln(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(cu);function ku(e,t){return wu.apply(this,arguments)}function wu(){return wu=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tu(n),i=xu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}function bu(e,t){return _u.apply(this,arguments)}function _u(){return(_u=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xu(t)._set(Tu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xu(e){return jn(e._redirectPersistence)}function Tu(e){return Pr("pendingRedirect",e.config.apiKey,e.name)}function Iu(e,t,n){return function(e,t,n){return Eu.apply(this,arguments)}(e,t,n)}function Eu(){return(Eu=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qr(t),On(t,n,Li),a=ru(i,r),e.next=5,bu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t,n){return function(e,t,n){return Cu.apply(this,arguments)}(e,t,n)}function Cu(){return(Cu=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=lt(t)).auth,n,Li),a=ru(i.auth,r),e.next=5,bu(a,i.auth);case 5:return e.next=7,Lu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(e,t,n){return function(e,t,n){return Nu.apply(this,arguments)}(e,t,n)}function Nu(){return(Nu=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=lt(t)).auth,n,Li),a=ru(i.auth,r),e.next=5,na(!1,i,n.providerId);case 5:return e.next=7,bu(a,i.auth);case 7:return e.next=9,Lu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr(t)._initializationPromise;case 2:return e.abrupt("return",Ou(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(e,t){return Du.apply(this,arguments)}function Du(){return Du=ke(be().mark((function e(t,n){var r,i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Qr(t),a=ru(i,n),o=new gu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Lu(e){return Mu.apply(this,arguments)}function Mu(){return(Mu=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uu=function(){function e(t){xe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ie(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ju(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ju(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Rn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Fu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Fu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ju(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Vu(e){return zu.apply(this,arguments)}function zu(){return zu=ke(be().mark((function e(t){var n,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Yn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}var qu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bu=/^https?/;function Wu(){return(Wu=ke(be().mark((function e(t){var n,r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Vu(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ee(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Hu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Nn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Hu(e){var t=zn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Bu.test(r))return!1;if(qu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ku=new Wn(3e4,6e4);function Gu(){var e=lo().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ht(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Qu=null;function $u(e){return Qu=Qu||function(e){return new Promise((function(t,n){var r,i,a;function o(){Gu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Gu(),n(Rn(e,"network-request-failed"))},timeout:Ku.get()})}if(null===(i=null===(r=lo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=lo().gapi)||void 0===a?void 0:a.load)){var u=Do("iframefcb");return lo()[u]=function(){gapi.load?o():n(Rn(e,"network-request-failed"))},Oo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Qu=null,e}))}(e),Qu}var Yu=new Wn(5e3,15e3),Ju={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zu(e){var t=e.config;Ln(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Hn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Kt},i=Xu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(it(r).slice(1))}function es(e){return ts.apply(this,arguments)}function ts(){return ts=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$u(t);case 2:return n=e.sent,Ln(r=lo().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Zu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ju,dontclear:!0},(function(e){return new Promise(function(){var n=ke(be().mark((function n(r,i){var a,o,u;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){lo().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Rn(t,"network-request-failed"),o=lo().setTimeout((function(){i(a)}),Yu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}var ns={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rs="_blank",is="http://localhost",as=function(){function e(t){xe(this,e),this.window=t,this.associatedEvent=null}return Ie(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function os(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},ns),{width:r.toString(),height:i.toString(),top:a,left:o}),l=We().toLowerCase();n&&(u=Ur(l)?rs:n),Lr(l)&&(t=t||is,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Br(l)&&"_self"!==u)return us(t||"",u),new as(null);var h=window.open(t||"",u,f);Ln(h,e,"popup-blocked");try{h.focus()}catch(d){}return new as(h)}function us(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ss="__/auth/handler",cs="emulator/auth/handler";function ls(e,t,n,r,i,a){Ln(e.config.authDomain,e,"auth-domain-config-required"),Ln(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Kt,eventId:i};if(t instanceof Li){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Mi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ss);return Hn(t,cs)}(e),"?").concat(it(p).slice(1))}var fs="webStorageSupport",hs=function(){function e(){xe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ao,this._completeRedirectFn=Ou}return Ie(e,[{key:"_openPopup",value:function(){var e=ke(be().mark((function e(t,n,r,i){var a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Un(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=ls(t,n,r,zn(),i),e.abrupt("return",os(t,o,so()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ke(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=ls(t,n,r,zn(),i),lo().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Un(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(t);case 2:return n=e.sent,r=new Uu(t),n.register("authEvent",(function(e){return Ln(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fs,{type:fs},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Nn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Wu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Hr()||Mr()||qr()}}]),e}(),ds=hs,ps=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this,"phone")).credential=e,r}return Ie(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Yn(e,"POST","/v2/accounts/mfaEnrollment:finalize",$n(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Yn(e,"POST","/v2/accounts/mfaSignIn:finalize",$n(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){xe(this,e),this.factorId=t}return Ie(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Mn("unexpected MultiFactorSessionType")}}}]),e}()),vs=function(){function e(){xe(this,e)}return Ie(e,null,[{key:"assertion",value:function(e){return ps._fromCredential(e)}}]),e}();vs.FACTOR_ID="phone";var ys,ms="@firebase/auth",gs="0.19.4",ks=function(){function e(t){xe(this,e),this.auth=t,this.internalListeners=new Map}return Ie(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ln(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt(),t=Ft(e,"auth");return t.isInitialized()?t.getImmediate():Vn(e,{popupRedirectResolver:ds,persistence:[Ao,ro,ao]})}function bs(){return window}ys="Browser",Ut(new dt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Ln(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Ln(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:ys,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kr(ys)},r=new Gr(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ut(new dt("auth-internal",(function(e){return function(e){return new ks(e)}(Qr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Xt(ms,gs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ys)),Xt(ms,gs,"esm2017");function _s(e,t,n){return xs.apply(this,arguments)}function xs(){return xs=ke(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bs(),o=a.BuildInfo,Un(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,As(n.sessionId);case 4:return u=e.sent,s={},qr()?s.ibi=o.packageName:jr()?s.apn=o.packageName:Nn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",ls(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}function Ts(){return(Ts=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bs(),r=n.BuildInfo,i={},qr()?i.iosBundleId=r.packageName:jr()?i.androidPackageName=r.packageName:Nn(t,"operation-not-supported-in-this-environment"),e.next=5,Vu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(e){var t=bs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Es(e,t,n){return Ss.apply(this,arguments)}function Ss(){return Ss=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Rn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),jr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ss.apply(this,arguments)}function Cs(e){var t,n,r,i,a,o,u,s,c,l,f=bs();Ln("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ln("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ln("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ln("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ln("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function As(e){return Ns.apply(this,arguments)}function Ns(){return(Ns=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rs(e){if(Un(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ps=function(e){Ce(n,e);var t=Oe(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ie(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ln(Ae(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uu);function Os(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Fs(),postBody:null,tenantId:e.tenantId,error:Rn(e,"no-auth-event")}}function Ds(e,t){return js()._set(Vs(e),t)}function Ls(e){return Ms.apply(this,arguments)}function Ms(){return(Ms=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,js()._get(Vs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,js()._remove(Vs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t){var n,r,i=function(e){var t=zs(e),n=t.link?decodeURIComponent(t.link):void 0,r=zs(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return zs(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=zs(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Rn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Fs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function js(){return jn(ro)}function Vs(e){return Pr("authEvent",e.config.apiKey,e.name)}function zs(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||ft(t)||o(t)||u();r[0];return at(r.slice(1).join("?"))}var qs=function(){function e(){xe(this,e),this._redirectPersistence=ao,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ou}return Ie(e,[{key:"_initialize",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ps(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Nn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ke(be().mark((function e(t,n,r,i){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),mu.clear(),e.next=10,this._originValidation(t);case 10:return o=Os(t,r,i),e.next=13,Ds(t,o);case 13:return e.next=15,_s(t,o,n);case 15:return u=e.sent,e.next=18,Is(u);case 18:return s=e.sent,e.abrupt("return",Es(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ts.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=bs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ls(e);case 2:t.onEvent(Ws());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ke(be().mark((function n(r){var i,a;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Ls(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Us(i,r.url)),t.onEvent(a||Ws());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");bs().handleOpenURL=function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Bs=qs;function Ws(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rn("no-auth-event")}}function Hs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return!("file:"!==Hs()&&"ionic:"!==Hs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gs(){return $e()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Qs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/Edge\/\d+/.test(e)}function $s(){try{var e=self.localStorage,t=so();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return Gs()||Qs(e)}()||Ye()}catch(n){return Ys()&&Ye()}return!1}function Ys(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Js(){return("http:"===Hs()||"https:"===Hs()||Ge()||Ks())&&!(Qe()||Ke())&&$s()&&!Ys()}function Xs(){return Ks()&&"undefined"!==typeof document}function Zs(){return ec.apply(this,arguments)}function ec(){return(ec=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tc={LOCAL:"local",NONE:"none",SESSION:"session"},nc=Ln,rc="persistence";function ic(e,t){nc(Object.values(tc).includes(t),e,"invalid-persistence-type"),Qe()?nc(t!==tc.SESSION,e,"unsupported-persistence-type"):Ke()?nc(t===tc.NONE,e,"unsupported-persistence-type"):Ys()?nc(t===tc.NONE||t===tc.LOCAL&&Ye(),e,"unsupported-persistence-type"):nc(t===tc.NONE||$s(),e,"unsupported-persistence-type")}function ac(e){return oc.apply(this,arguments)}function oc(){return oc=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=uc(),r=Pr(rc,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}function uc(){return"undefined"!==typeof window?window:null}var sc=Ln,cc=function(){function e(){xe(this,e),this.browserResolver=jn(ds),this.cordovaResolver=jn(Bs),this.underlyingResolver=null,this._redirectPersistence=ao,this._completeRedirectFn=Ou}return Ie(e,[{key:"_initialize",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ke(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ke(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Xs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return sc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function lc(e){return e.unwrap()}function fc(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new yc(e,function(e,t){var n,r=lt(e),i=t;return Ln(t.customData.operationType,r,"argument-error"),Ln(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ya._fromError(r,i)}(e,t));else if(r){var i=hc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function hc(e){var t=(e instanceof Je?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Je)&&"temporaryProof"in t&&"phoneNumber"in t)return nu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===yn)return null;switch(r){case vn:n=ji;break;case dn:n=Fi;break;case pn:n=Vi;break;case mn:n=Bi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?zi._create(r,u):Ii._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ui(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Je?n.credentialFromError(e):n.credentialFromResult(e)}function dc(e,t){return t.catch((function(t){throw t instanceof Je&&fc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,hc(t)),additionalUserInfo:Qa(e),user:mc.getOrCreate(r)}}))}function pc(e,t){return vc.apply(this,arguments)}function vc(){return(vc=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return dc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yc=function(){function e(t,n){xe(this,e),this.resolver=n,this.auth=t.wrapped()}return Ie(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return dc(lc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),mc=function(){function e(t){xe(this,e),this._delegate=t,this.multiFactor=function(e){var t=lt(e);return Za.has(t)||Za.set(t,Xa._fromUser(t)),Za.get(t)}(t)}return Ie(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dc(this.auth,la(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(this.auth,Yo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dc(this.auth,pu(this._delegate,t,cc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac(Qr(this.auth));case 2:return e.abrupt("return",Au(this._delegate,t,cc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dc(this.auth,ha(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return pc(this.auth,function(e,t,n){return Xo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return dc(this.auth,function(e,t,n){return du.apply(this,arguments)}(this._delegate,e,cc))}},{key:"reauthenticateWithRedirect",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac(Qr(this.auth));case 2:return e.abrupt("return",Su(this._delegate,t,cc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Da.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Va(lt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Va(lt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return tu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return Fa(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return La.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();mc.USER_MAP=new WeakMap;var gc=Ln,kc=function(){function e(t,n){if(xe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;gc(r,"invalid-api-key",{appName:t.name});var i=[Rr];if("undefined"!==typeof window){i=function(e,t){var n=uc();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=Pr(rc,e,t);switch(n.sessionStorage.getItem(r)){case tc.NONE:return[Rr];case tc.LOCAL:return[Ao,ao];case tc.SESSION:return[ao];default:return[]}}(r,t.name);for(var a=0,o=[Ao,ro,ao];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}gc(r,"invalid-api-key",{appName:t.name});var s="undefined"!==typeof window?cc:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(In),this.linkUnderlyingAuth()}return Ie(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?mc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Yr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return _a.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return xa(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ba.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dc(this._delegate,Ea(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Oa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Oi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gc(Js(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ru(this._delegate,cc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",dc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Qr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=wc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=wc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Aa.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return wa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ic(this._delegate,t),e.t0=t,e.next=e.t0===tc.SESSION?4:e.t0===tc.LOCAL?6:e.t0===tc.NONE?11:13;break;case 4:return n=ao,e.abrupt("break",14);case 6:return e.next=8,jn(Ao)._isAvailable();case 8:return r=e.sent,n=r?Ao:ro,e.abrupt("break",14);case 11:return n=Rr,e.abrupt("break",14);case 13:return e.abrupt("return",Nn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return dc(this._delegate,function(e){return Qi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return dc(this._delegate,sa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return dc(this._delegate,function(e,t){return ya.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return dc(this._delegate,Ca(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return dc(this._delegate,function(e,t,n){return Na.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return pc(this._delegate,function(e,t,n){return $o.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gc(Js(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",dc(this._delegate,fu(this._delegate,t,cc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gc(Js(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ac(this._delegate);case 3:return e.abrupt("return",Iu(this._delegate,t,cc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ia.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function wc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&mc.getOrCreate(e))},error:t,complete:n}}kc.Persistence=tc;var bc=function(){function e(){xe(this,e),this.providerId="phone",this._delegate=new nu(lc(sn.auth()))}return Ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return nu.credential(e,t)}}]),e}();bc.PHONE_SIGN_IN_METHOD=nu.PHONE_SIGN_IN_METHOD,bc.PROVIDER_ID=nu.PROVIDER_ID;var _c,xc=Ln,Tc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.app();xe(this,e),xc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ko(t,n,i.auth()),this.type=this._delegate.type}return Ie(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(_c=sn).INTERNAL.registerComponent(new dt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new kc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:gn,PASSWORD_RESET:kn,RECOVER_EMAIL:wn,REVERT_SECOND_FACTOR_ADDITION:bn,VERIFY_AND_CHANGE_EMAIL:_n,VERIFY_EMAIL:xn}},EmailAuthProvider:Di,FacebookAuthProvider:Fi,GithubAuthProvider:Vi,GoogleAuthProvider:ji,OAuthProvider:Ui,SAMLAuthProvider:qi,PhoneAuthProvider:bc,PhoneMultiFactorGenerator:vs,RecaptchaVerifier:Tc,TwitterAuthProvider:Bi,Auth:kc,AuthCredential:Zr,Error:Je}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_c.registerVersion("@firebase/auth-compat","0.2.4");var Ic,Ec="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Sc={},Cc=Cc||{},Ac=Ec||self;function Nc(){}function Rc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Pc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Oc="closure_uid_"+(1e9*Math.random()>>>0),Dc=0;function Lc(e,t,n){return e.call.apply(e.bind,arguments)}function Mc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Uc(e,t,n){return(Uc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lc:Mc).apply(null,arguments)}function Fc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function jc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Vc(){this.s=this.s,this.o=this.o}var zc={};Vc.prototype.s=!1,Vc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Oc)&&e[Oc]||(e[Oc]=++Dc)}(this);delete zc[e]}},Vc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var qc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Bc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Wc(e){return Array.prototype.concat.apply([],arguments)}function Hc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Kc(e){return/^[\s\xa0]*$/.test(e)}var Gc,Qc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function $c(e,t){return-1!=e.indexOf(t)}function Yc(e,t){return e<t?-1:e>t?1:0}e:{var Jc=Ac.navigator;if(Jc){var Xc=Jc.userAgent;if(Xc){Gc=Xc;break e}}Gc=""}function Zc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function el(e){var t={};for(var n in e)t[n]=e[n];return t}var tl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<tl.length;a++)n=tl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function rl(e){return rl[" "](e),e}rl[" "]=Nc;var il,al=$c(Gc,"Opera"),ol=$c(Gc,"Trident")||$c(Gc,"MSIE"),ul=$c(Gc,"Edge"),sl=ul||ol,cl=$c(Gc,"Gecko")&&!($c(Gc.toLowerCase(),"webkit")&&!$c(Gc,"Edge"))&&!($c(Gc,"Trident")||$c(Gc,"MSIE"))&&!$c(Gc,"Edge"),ll=$c(Gc.toLowerCase(),"webkit")&&!$c(Gc,"Edge");function fl(){var e=Ac.document;return e?e.documentMode:void 0}e:{var hl="",dl=function(){var e=Gc;return cl?/rv:([^\);]+)(\)|;)/.exec(e):ul?/Edge\/([\d\.]+)/.exec(e):ol?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ll?/WebKit\/(\S+)/.exec(e):al?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(dl&&(hl=dl?dl[1]:""),ol){var pl=fl();if(null!=pl&&pl>parseFloat(hl)){il=String(pl);break e}}il=hl}var vl,yl={};function ml(){return function(e){var t=yl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Qc(String(il)).split("."),n=Qc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Yc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Yc(0==a[2].length,0==o[2].length)||Yc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ac.document&&ol){var gl=fl();vl=gl||(parseInt(il,10)||void 0)}else vl=void 0;var kl=vl,wl=function(){if(!Ac.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ac.addEventListener("test",Nc,t),Ac.removeEventListener("test",Nc,t)}catch(n){}return e}();function bl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function _l(e,t){if(bl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(cl){e:{try{rl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:xl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_l.Z.h.call(this)}}bl.prototype.h=function(){this.defaultPrevented=!0},jc(_l,bl);var xl={2:"touch",3:"pen",4:"mouse"};_l.prototype.h=function(){_l.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Tl="closure_listenable_"+(1e6*Math.random()|0),Il=0;function El(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Il,this.ca=this.fa=!1}function Sl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Cl(e){this.src=e,this.g={},this.h=0}function Al(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=qc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Sl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Nl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Cl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Nl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new El(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Rl="closure_lm_"+(1e6*Math.random()|0),Pl={};function Ol(e,t,n,r,i){if(r&&r.once)return Ll(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ol(e,t[a],n,r,i);return null}return n=ql(n),e&&e[Tl]?e.N(t,n,Pc(r)?!!r.capture:!!r,i):Dl(e,t,n,!1,r,i)}function Dl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Pc(i)?!!i.capture:!!i,u=Vl(e);if(u||(e[Rl]=u=new Cl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=jl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Fl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ll(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ll(e,t[a],n,r,i);return null}return n=ql(n),e&&e[Tl]?e.O(t,n,Pc(r)?!!r.capture:!!r,i):Dl(e,t,n,!0,r,i)}function Ml(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ml(e,t[a],n,r,i);else r=Pc(r)?!!r.capture:!!r,n=ql(n),e&&e[Tl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Nl(a=e.g[t],n,r,i))&&(Sl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Vl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Nl(t,n,r,i)),(n=-1<e?t[e]:null)&&Ul(n))}function Ul(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Tl])Al(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Fl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Vl(t))?(Al(n,e),0==n.h&&(n.src=null,t[Rl]=null)):Sl(e)}}}function Fl(e){return e in Pl?Pl[e]:Pl[e]="on"+e}function jl(e,t){if(e.ca)e=!0;else{t=new _l(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ul(e),e=n.call(r,t)}return e}function Vl(e){return(e=e[Rl])instanceof Cl?e:null}var zl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ql(e){return"function"===typeof e?e:(e[zl]||(e[zl]=function(t){return e.handleEvent(t)}),e[zl])}function Bl(){Vc.call(this),this.i=new Cl(this),this.P=this,this.I=null}function Wl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new bl(t,e);else if(t instanceof bl)t.target=t.target||e;else{var i=t;nl(t=new bl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Hl(o,r,!0,t)&&i}if(i=Hl(o=t.g=e,r,!0,t)&&i,i=Hl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Hl(o=t.g=n[a],r,!1,t)&&i}function Hl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Al(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}jc(Bl,Vc),Bl.prototype[Tl]=!0,Bl.prototype.removeEventListener=function(e,t,n,r){Ml(this,e,t,n,r)},Bl.prototype.M=function(){if(Bl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Sl(n[r]);delete t.g[e],t.h--}}this.I=null},Bl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Bl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Kl=Ac.JSON.stringify;function Gl(){var e=tf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ql,$l=function(){function e(){xe(this,e),this.h=this.g=null}return Ie(e,[{key:"add",value:function(e,t){var n=Yl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Yl=new(function(){function e(t,n){xe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ie(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Jl}),(function(e){return e.reset()})),Jl=function(){function e(){xe(this,e),this.next=this.g=this.h=null}return Ie(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Xl(e){Ac.setTimeout((function(){throw e}),0)}function Zl(e,t){Ql||function(){var e=Ac.Promise.resolve(void 0);Ql=function(){e.then(nf)}}(),ef||(Ql(),ef=!0),tf.add(e,t)}var ef=!1,tf=new $l;function nf(){for(var e;e=Gl();){try{e.h.call(e.g)}catch(n){Xl(n)}var t=Yl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ef=!1}function rf(e,t){Bl.call(this),this.h=e||1,this.g=t||Ac,this.j=Uc(this.kb,this),this.l=Date.now()}function af(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function of(e,t,n){if("function"===typeof e)n&&(e=Uc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Uc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ac.setTimeout(e,t||0)}function uf(e){e.g=of((function(){e.g=null,e.i&&(e.i=!1,uf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}jc(rf,Bl),(Ic=rf.prototype).da=!1,Ic.S=null,Ic.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wl(this,"tick"),this.da&&(af(this),this.start()))}},Ic.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ic.M=function(){rf.Z.M.call(this),af(this),delete this.g};var sf=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ie(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:uf(this)}},{key:"M",value:function(){ln(Ae(n.prototype),"M",this).call(this),this.g&&(Ac.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Vc);function cf(e){Vc.call(this),this.h=e,this.g={}}jc(cf,Vc);var lf=[];function ff(e,t,n,r){Array.isArray(n)||(n&&(lf[0]=n.toString()),n=lf);for(var i=0;i<n.length;i++){var a=Ol(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function hf(e){Zc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ul(e)}),e),e.g={}}function df(){this.g=!0}function pf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Kl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}cf.prototype.M=function(){cf.Z.M.call(this),hf(this)},cf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},df.prototype.Aa=function(){this.g=!1},df.prototype.info=function(){};var vf={},yf=null;function mf(){return yf=yf||new Bl}function gf(e){bl.call(this,vf.Ma,e)}function kf(e){var t=mf();Wl(t,new gf(t,e))}function wf(e,t){bl.call(this,vf.STAT_EVENT,e),this.stat=t}function bf(e){var t=mf();Wl(t,new wf(t,e))}function _f(e,t){bl.call(this,vf.Na,e),this.size=t}function xf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ac.setTimeout((function(){e()}),t)}vf.Ma="serverreachability",jc(gf,bl),vf.STAT_EVENT="statevent",jc(wf,bl),vf.Na="timingevent",jc(_f,bl);var Tf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},If={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ef(){}function Sf(e){return e.h||(e.h=e.i())}function Cf(){}Ef.prototype.h=null;var Af,Nf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Rf(){bl.call(this,"d")}function Pf(){bl.call(this,"c")}function Of(){}function Df(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new cf(this),this.P=Mf,e=sl?125:void 0,this.W=new rf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Lf}function Lf(){this.i=null,this.g="",this.h=!1}jc(Rf,bl),jc(Pf,bl),jc(Of,Ef),Of.prototype.g=function(){return new XMLHttpRequest},Of.prototype.i=function(){return{}},Af=new Of;var Mf=45e3,Uf={},Ff={};function jf(e,t,n){e.K=1,e.v=sh(nh(t)),e.s=n,e.U=!0,Vf(e,null)}function Vf(e,t){e.F=Date.now(),Wf(e),e.A=nh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),bh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Lf,e.g=xd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new sf(Uc(e.Ia,e,e.g),e.O)),ff(e.V,e.g,"readystatechange",e.gb),t=e.H?el(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),kf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function zf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function qf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Bf(e,n))==Ff){4==t&&(e.o=4,bf(14),i=!1),pf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Uf){e.o=4,bf(15),pf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}pf(e.j,e.m,r,null),$f(e,r)}zf(e)&&r!=Ff&&r!=Uf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,bf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),vd(t),t.L=!0,bf(11))):(pf(e.j,e.m,n,"[Invalid Chunked Response]"),Qf(e),Gf(e))}function Bf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ff:(n=Number(t.substring(n,r)),isNaN(n)?Uf:(r+=1)+n>t.length?Ff:(t=t.substr(r,n),e.C=r+n,t))}function Wf(e){e.Y=Date.now()+e.P,Hf(e,e.P)}function Hf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xf(Uc(e.eb,e),t)}function Kf(e){e.B&&(Ac.clearTimeout(e.B),e.B=null)}function Gf(e){0==e.l.G||e.I||gd(e.l,e)}function Qf(e){Kf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,af(e.W),hf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function $f(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ah(n.i,e)))if(n.I=e.N,!e.J&&Ah(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;md(n),od(n)}pd(n),bf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=xf(Uc(n.ab,n),6e3));if(1>=Ch(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else wd(n,11)}else if((e.J||n.g==e)&&md(n),!Kc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&($c(l,"spdy")||$c(l,"quic")||$c(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Nh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,uh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=_d(r,r.H?r.la:null,r.W),d.J){Rh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Kf(p),Wf(p)),r.g=d}else dd(r);0<n.l.length&&cd(n)}else"stop"!=a[0]&&"close"!=a[0]||wd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?wd(n,7):ad(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}kf(4)}catch(a){}}function Yf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Rc(e)||"string"===typeof e)Bc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Rc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Rc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Jf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Jf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Xf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Zf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Zf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Zf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ic=Df.prototype).setTimeout=function(e){this.P=e},Ic.gb=function(e){e=e.target;var t=this.L;t&&3==ed(e)?t.l():this.Ia(e)},Ic.Ia=function(e){try{if(e==this.g)e:{var t=ed(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||sl||this.g&&(this.h.h||this.g.ga()||td(this.g)))){this.I||4!=t||7==n||kf(8==n||0>=r?3:2),Kf(this);var i=this.g.ba();this.N=i;t:if(zf(this)){var a=td(this.g);e="";var o=a.length,u=4==ed(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qf(this),Gf(this);var s="";break t}this.h.i=new Ac.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,bf(12),Qf(this),Gf(this);break e}pf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$f(this,i)}this.U?(qf(this,t,s),sl&&this.i&&3==t&&(ff(this.V,this.W,"tick",this.fb),this.W.start())):(pf(this.j,this.m,s,null),$f(this,s)),4==t&&Qf(this),this.i&&!this.I&&(4==t?gd(this.l,this):(this.i=!1,Wf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,bf(12)):(this.o=0,bf(13)),Qf(this),Gf(this)}}}catch(t){}},Ic.fb=function(){if(this.g){var e=ed(this.g),t=this.g.ga();this.C<t.length&&(Kf(this),qf(this,e,t),this.i&&4!=e&&Wf(this))}},Ic.cancel=function(){this.I=!0,Qf(this)},Ic.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(kf(3),bf(17)),Qf(this),this.o=2,Gf(this)):Hf(this,this.Y-e)},(Ic=Jf.prototype).R=function(){Xf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ic.T=function(){return Xf(this),this.g.concat()},Ic.get=function(e,t){return Zf(this.h,e)?this.h[e]:t},Ic.set=function(e,t){Zf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ic.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var eh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function th(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof th){this.g=void 0!==t?t:e.g,rh(this,e.j),this.s=e.s,ih(this,e.i),ah(this,e.m),this.l=e.l,t=e.h;var n=new mh;n.i=t.i,t.g&&(n.g=new Jf(t.g),n.h=t.h),oh(this,n),this.o=e.o}else e&&(n=String(e).match(eh))?(this.g=!!t,rh(this,n[1]||"",!0),this.s=ch(n[2]||""),ih(this,n[3]||"",!0),ah(this,n[4]),this.l=ch(n[5]||"",!0),oh(this,n[6]||"",!0),this.o=ch(n[7]||"")):(this.g=!!t,this.h=new mh(null,this.g))}function nh(e){return new th(e)}function rh(e,t,n){e.j=n?ch(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ih(e,t,n){e.i=n?ch(t,!0):t}function ah(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function oh(e,t,n){t instanceof mh?(e.h=t,function(e,t){t&&!e.j&&(gh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kh(this,t),bh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=lh(t,vh)),e.h=new mh(t,e.g))}function uh(e,t,n){e.h.set(t,n)}function sh(e){return uh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ch(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,fh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}th.prototype.toString=function(){var e=[],t=this.j;t&&e.push(lh(t,hh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(lh(t,hh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(lh(n,"/"==n.charAt(0)?ph:dh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",lh(n,yh)),e.join("")};var hh=/[#\/\?@]/g,dh=/[#\?:]/g,ph=/[#\?]/g,vh=/[#\?@]/g,yh=/#/g;function mh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function gh(e){e.g||(e.g=new Jf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kh(e,t){gh(e),t=_h(e,t),Zf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Zf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Xf(e)))}function wh(e,t){return gh(e),t=_h(e,t),Zf(e.g.h,t)}function bh(e,t,n){kh(e,t),0<n.length&&(e.i=null,e.g.set(_h(e,t),Hc(n)),e.h+=n.length)}function _h(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ic=mh.prototype).add=function(e,t){gh(this),this.i=null,e=_h(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ic.forEach=function(e,t){gh(this),this.g.forEach((function(n,r){Bc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ic.T=function(){gh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ic.R=function(e){gh(this);var t=[];if("string"===typeof e)wh(this,e)&&(t=Wc(t,this.g.get(_h(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Wc(t,e[n])}return t},Ic.set=function(e,t){return gh(this),this.i=null,wh(this,e=_h(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ic.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ic.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var xh=Ie((function e(t,n){xe(this,e),this.h=t,this.g=n}));function Th(e){this.l=e||Eh,Ac.PerformanceNavigationTiming?e=0<(e=Ac.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ac.g&&Ac.g.Ea&&Ac.g.Ea()&&Ac.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ih,Eh=10;function Sh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ch(e){return e.h?1:e.g?e.g.size:0}function Ah(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Nh(e,t){e.g?e.g.add(t):e.h=t}function Rh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ph(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ee(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Hc(e.i)}function Oh(){}function Dh(){this.g=new Oh}function Lh(e,t,n){var r=n||"";try{Yf(e,(function(e,n){var i=e;Pc(e)&&(i=Kl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Mh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Uh(e){this.l=e.$b||null,this.j=e.ib||!1}function Fh(e,t){Bl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=jh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Th.prototype.cancel=function(){if(this.i=Ph(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ee(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Oh.prototype.stringify=function(e){return Ac.JSON.stringify(e,void 0)},Oh.prototype.parse=function(e){return Ac.JSON.parse(e,void 0)},jc(Uh,Ef),Uh.prototype.g=function(){return new Fh(this.l,this.j)},Uh.prototype.i=(Ih={},function(){return Ih}),jc(Fh,Bl);var jh=0;function Vh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function zh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qh(e)}function qh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ic=Fh.prototype).open=function(e,t){if(this.readyState!=jh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qh(this)},Ic.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ac).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ic.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zh(this)),this.readyState=jh},Ic.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qh(this)),this.g&&(this.readyState=3,qh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ac.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ic.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zh(this):qh(this),3==this.readyState&&Vh(this)}},Ic.Ua=function(e){this.g&&(this.response=this.responseText=e,zh(this))},Ic.Ta=function(e){this.g&&(this.response=e,zh(this))},Ic.ha=function(){this.g&&zh(this)},Ic.setRequestHeader=function(e,t){this.v.append(e,t)},Ic.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ic.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Fh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Bh=Ac.JSON.parse;function Wh(e){Bl.call(this),this.headers=new Jf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hh,this.K=this.L=!1}jc(Wh,Bl);var Hh="",Kh=/^https?$/i,Gh=["POST","PUT"];function Qh(e){return"content-type"==e.toLowerCase()}function $h(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Yh(e),Xh(e)}function Yh(e){e.D||(e.D=!0,Wl(e,"complete"),Wl(e,"error"))}function Jh(e){if(e.h&&"undefined"!=typeof Cc&&(!e.C[1]||4!=ed(e)||2!=e.ba()))if(e.v&&4==ed(e))of(e.Fa,0,e);else if(Wl(e,"readystatechange"),4==ed(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(eh)[1]||null;if(!a&&Ac.self&&Ac.self.location){var o=Ac.self.location.protocol;a=o.substr(0,o.length-1)}i=!Kh.test(a?a.toLowerCase():"")}t=i}if(t)Wl(e,"complete"),Wl(e,"success");else{e.m=6;try{var u=2<ed(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Yh(e)}}finally{Xh(e)}}}function Xh(e,t){if(e.g){Zh(e);var n=e.g,r=e.C[0]?Nc:null;e.g=null,e.C=null,t||Wl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Zh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ac.clearTimeout(e.A),e.A=null)}function ed(e){return e.g?e.g.readyState:0}function td(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Hh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function nd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Zc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):uh(e,t,n))}function rd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function id(e){this.za=0,this.l=[],this.h=new df,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rd("baseRetryDelayMs",5e3,e),this.$a=rd("retryDelaySeedMs",1e4,e),this.Ya=rd("forwardChannelMaxRetries",2,e),this.ra=rd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Th(e&&e.concurrentRequestLimit),this.Ca=new Dh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ad(e){if(ud(e),3==e.G){var t=e.V++,n=nh(e.F);uh(n,"SID",e.J),uh(n,"RID",t),uh(n,"TYPE","terminate"),fd(e,n),(t=new Df(e,e.h,t,void 0)).K=2,t.v=sh(nh(n)),n=!1,Ac.navigator&&Ac.navigator.sendBeacon&&(n=Ac.navigator.sendBeacon(t.v.toString(),"")),!n&&Ac.Image&&((new Image).src=t.v,n=!0),n||(t.g=xd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Wf(t)}bd(e)}function od(e){e.g&&(vd(e),e.g.cancel(),e.g=null)}function ud(e){od(e),e.u&&(Ac.clearTimeout(e.u),e.u=null),md(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ac.clearTimeout(e.m),e.m=null)}function sd(e,t){e.l.push(new xh(e.Za++,t)),3==e.G&&cd(e)}function cd(e){Sh(e.i)||e.m||(e.m=!0,Zl(e.Ha,e),e.C=0)}function ld(e,t){var n;n=t?t.m:e.V++;var r=nh(e.F);uh(r,"SID",e.J),uh(r,"RID",n),uh(r,"AID",e.U),fd(e,r),e.o&&e.s&&nd(r,e.o,e.s),n=new Df(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=hd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Nh(e.i,n),jf(n,r,t)}function fd(e,t){e.j&&Yf({},(function(e,n){uh(t,n,e)}))}function hd(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Uc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Lh(l,o,"req"+c+"_")}catch(tp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function dd(e){e.g||e.u||(e.Y=1,Zl(e.Ga,e),e.A=0)}function pd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=xf(Uc(e.Ga,e),kd(e,e.A)),e.A++,!0)}function vd(e){null!=e.B&&(Ac.clearTimeout(e.B),e.B=null)}function yd(e){e.g=new Df(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=nh(e.oa);uh(t,"RID","rpc"),uh(t,"SID",e.J),uh(t,"CI",e.N?"0":"1"),uh(t,"AID",e.U),fd(e,t),uh(t,"TYPE","xmlhttp"),e.o&&e.s&&nd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=sh(nh(t)),n.s=null,n.U=!0,Vf(n,e)}function md(e){null!=e.v&&(Ac.clearTimeout(e.v),e.v=null)}function gd(e,t){var n=null;if(e.g==t){md(e),vd(e),e.g=null;var r=2}else{if(!Ah(e.i,t))return;n=t.D,Rh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Wl(r=mf(),new _f(r,n,t,i)),cd(e)}else dd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ch(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=xf(Uc(e.Ha,e,t),kd(e,e.C)),e.C++,!0))}(e,t)||2==r&&pd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:wd(e,5);break;case 4:wd(e,10);break;case 3:wd(e,6);break;default:wd(e,2)}}function kd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function wd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Uc(e.jb,e);n||(n=new th("//www.google.com/images/cleardot.gif"),Ac.location&&"http"==Ac.location.protocol||rh(n,"https"),sh(n)),function(e,t){var n=new df;if(Ac.Image){var r=new Image;r.onload=Fc(Mh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fc(Mh,n,r,"TestLoadImage: error",!1,t),r.onabort=Fc(Mh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fc(Mh,n,r,"TestLoadImage: timeout",!1,t),Ac.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else bf(2);e.G=0,e.j&&e.j.va(t),bd(e),ud(e)}function bd(e){e.G=0,e.I=-1,e.j&&(0==Ph(e.i).length&&0==e.l.length||(e.i.i.length=0,Hc(e.l),e.l.length=0),e.j.ua())}function _d(e,t,n){var r=function(e){return e instanceof th?nh(e):new th(e,void 0)}(n);if(""!=r.i)t&&ih(r,t+"."+r.i),ah(r,r.m);else{var i=Ac.location;r=function(e,t,n,r){var i=new th(null,void 0);return e&&rh(i,e),t&&ih(i,t),n&&ah(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Zc(e.aa,(function(e,t){uh(r,t,e)})),t=e.D,n=e.sa,t&&n&&uh(r,t,n),uh(r,"VER",e.ma),fd(e,r),r}function xd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Wh(new Uh({ib:!0})):new Wh(e.qa)).L=e.H,t}function Td(){}function Id(){if(ol&&!(10<=Number(kl)))throw Error("Environmental error: no available transport.")}function Ed(e,t){Bl.call(this),this.g=new id(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Kc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ad(this)}function Sd(e){Rf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cd(){Pf.call(this),this.status=1}function Ad(e){this.g=e}(Ic=Wh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Af.g(),this.C=this.u?Sf(this.u):Sf(Af),this.g.onreadystatechange=Uc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void $h(this,a)}e=n||"";var i=new Jf(this.headers);r&&Yf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Qh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ac.FormData&&e instanceof Ac.FormData,!(0<=qc(Gh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zh(this),0<this.B&&((this.K=function(e){return ol&&ml()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Uc(this.pa,this)):this.A=of(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){$h(this,a)}},Ic.pa=function(){"undefined"!=typeof Cc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wl(this,"timeout"),this.abort(8))},Ic.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Wl(this,"complete"),Wl(this,"abort"),Xh(this))},Ic.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xh(this,!0)),Wh.Z.M.call(this)},Ic.Fa=function(){this.s||(this.F||this.v||this.l?Jh(this):this.cb())},Ic.cb=function(){Jh(this)},Ic.ba=function(){try{return 2<ed(this)?this.g.status:-1}catch(Ih){return-1}},Ic.ga=function(){try{return this.g?this.g.responseText:""}catch(Ih){return""}},Ic.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Bh(t)}},Ic.Da=function(){return this.m},Ic.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ic=id.prototype).ma=8,Ic.G=1,Ic.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Ic.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Df(this,this.h,e,void 0),n=this.s;if(this.P&&(n?nl(n=el(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=hd(this,t,r),uh(i=nh(this.F),"RID",e),uh(i,"CVER",22),this.D&&uh(i,"X-HTTP-Session-Id",this.D),fd(this,i),this.o&&n&&nd(i,this.o,n),Nh(this.i,t),this.Ra&&uh(i,"TYPE","init"),this.ja?(uh(i,"$req",r),uh(i,"SID","null"),t.$=!0,jf(t,i,null)):jf(t,i,r),this.G=2}}else 3==this.G&&(e?ld(this,e):0==this.l.length||Sh(this.i)||ld(this))},Ic.Ga=function(){if(this.u=null,yd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=xf(Uc(this.bb,this),e)}},Ic.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,bf(10),od(this),yd(this))},Ic.ab=function(){null!=this.v&&(this.v=null,od(this),pd(this),bf(19))},Ic.jb=function(e){e?(this.h.info("Successfully pinged google.com"),bf(2)):(this.h.info("Failed to ping google.com"),bf(1))},(Ic=Td.prototype).xa=function(){},Ic.wa=function(){},Ic.va=function(){},Ic.ua=function(){},Ic.Oa=function(){},Id.prototype.g=function(e,t){return new Ed(e,t)},jc(Ed,Bl),Ed.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Zl(Uc(e.hb,e,t))),bf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=_d(e,null,e.W),cd(e)},Ed.prototype.close=function(){ad(this.g)},Ed.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,sd(this.g,t)}else this.v?((t={}).__data__=Kl(e),sd(this.g,t)):sd(this.g,e)},Ed.prototype.M=function(){this.g.j=null,delete this.j,ad(this.g),delete this.g,Ed.Z.M.call(this)},jc(Sd,Rf),jc(Cd,Pf),jc(Ad,Td),Ad.prototype.xa=function(){Wl(this.g,"a")},Ad.prototype.wa=function(e){Wl(this.g,new Sd(e))},Ad.prototype.va=function(e){Wl(this.g,new Cd(e))},Ad.prototype.ua=function(){Wl(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,Ed.prototype.send=Ed.prototype.u,Ed.prototype.open=Ed.prototype.m,Ed.prototype.close=Ed.prototype.close,Tf.NO_ERROR=0,Tf.TIMEOUT=8,Tf.HTTP_ERROR=6,If.COMPLETE="complete",Cf.EventType=Nf,Nf.OPEN="a",Nf.CLOSE="b",Nf.ERROR="c",Nf.MESSAGE="d",Bl.prototype.listen=Bl.prototype.N,Wh.prototype.listenOnce=Wh.prototype.O,Wh.prototype.getLastError=Wh.prototype.La,Wh.prototype.getLastErrorCode=Wh.prototype.Da,Wh.prototype.getStatus=Wh.prototype.ba,Wh.prototype.getResponseJson=Wh.prototype.Qa,Wh.prototype.getResponseText=Wh.prototype.ga,Wh.prototype.send=Wh.prototype.ea;var Nd=Sc.createWebChannelTransport=function(){return new Id},Rd=Sc.getStatEventTarget=function(){return mf()},Pd=Sc.ErrorCode=Tf,Od=Sc.EventType=If,Dd=Sc.Event=vf,Ld=Sc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Md=Sc.FetchXmlHttpFactory=Uh,Ud=Sc.WebChannel=Cf,Fd=Sc.XhrIo=Wh,jd="@firebase/firestore",Vd=function(){function e(t){xe(this,e),this.uid=t}return Ie(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Vd.UNAUTHENTICATED=new Vd(null),Vd.GOOGLE_CREDENTIALS=new Vd("google-credentials-uid"),Vd.FIRST_PARTY=new Vd("first-party-uid"),Vd.MOCK_USER=new Vd("mock-user");var zd="9.6.1",qd=new Et("@firebase/firestore");function Bd(){return qd.logLevel}function Wd(e){if(qd.logLevel<=mt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Gd);qd.debug.apply(qd,["Firestore (".concat(zd,"): ").concat(e)].concat(ht(i)))}}function Hd(e){if(qd.logLevel<=mt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Gd);qd.error.apply(qd,["Firestore (".concat(zd,"): ").concat(e)].concat(ht(i)))}}function Kd(e){if(qd.logLevel<=mt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Gd);qd.warn.apply(qd,["Firestore (".concat(zd,"): ").concat(e)].concat(ht(i)))}}function Gd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Qd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(zd,") INTERNAL ASSERTION FAILED: ")+e;throw Hd(t),new Error(t)}function $d(e,t){e||Qd()}function Yd(e,t){return e}var Jd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xd=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ie(n)}(Le(Error)),Zd=Ie((function e(){var t=this;xe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ep=Ie((function e(t,n){xe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),tp=function(){function e(){xe(this,e)}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Vd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),np=function(){function e(t){xe(this,e),this.token=t,this.changeListener=null}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),rp=function(){function e(t){xe(this,e),this.t=t,this.currentUser=Vd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ie(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Zd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Zd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Wd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Wd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Zd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Wd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?($d("string"==typeof n.accessToken),new ep(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return $d(null===e||"string"==typeof e),new Vd(e)}}]),e}(),ip=Ie((function e(t,n,r){xe(this,e),this.type="FirstParty",this.user=Vd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),ap=function(){function e(t,n,r){xe(this,e),this.h=t,this.l=n,this.m=r}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(new ip(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Vd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),op=Ie((function e(t){xe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),up=function(){function e(t){xe(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return Ie(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&Wd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){Wd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Wd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?($d("string"==typeof e.token),new op(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),sp=function(){function e(t,n){var r=this;xe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Ie(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function cp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}sp.I=-1;var lp=function(){function e(){xe(this,e)}return Ie(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=cp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function fp(e,t){return e<t?-1:e>t?1:0}function hp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function dp(e){return e+"\0"}var pp=function(){function e(t,n){if(xe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Xd(Jd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xd(Jd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Xd(Jd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xd(Jd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ie(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fp(this.nanoseconds,e.nanoseconds):fp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),vp=function(){function e(t){xe(this,e),this.timestamp=t}return Ie(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new pp(0,0))}}]),e}();function yp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var kp=function(){function e(t,n,r){xe(this,e),void 0===n?n=0:n>t.length&&Qd(),void 0===r?r=t.length-n:r>t.length-n&&Qd(),this.segments=t,this.offset=n,this.len=r}return Ie(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),wp=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ht(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kp),bp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_p=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return bp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Xd(Jd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Xd(Jd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Xd(Jd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kp),xp=function(){function e(t){xe(this,e),this.fields=t,t.sort(_p.comparator)}return Ie(e,[{key:"covers",value:function(e){var t,n=Ee(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return hp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Tp=function(){function e(t){xe(this,e),this.binaryString=t}return Ie(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();Tp.EMPTY_BYTE_STRING=new Tp("");var Ip=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ep(e){if($d(!!e),"string"==typeof e){var t=0,n=Ip.exec(e);if($d(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Sp(e.seconds),nanos:Sp(e.nanos)}}function Sp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cp(e){return"string"==typeof e?Tp.fromBase64String(e):Tp.fromUint8Array(e)}function Ap(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Np(e){var t=e.mapValue.fields.__previous_value__;return Ap(t)?Np(t):t}function Rp(e){var t=Ep(e.mapValue.fields.__local_write_time__.timestampValue);return new pp(t.seconds,t.nanos)}function Pp(e){return null==e}function Op(e){return 0===e&&1/e==-1/0}function Dp(e){return"number"==typeof e&&Number.isInteger(e)&&!Op(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Lp=function(){function e(t){xe(this,e),this.path=t}return Ie(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===wp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(wp.fromString(t))}},{key:"fromName",value:function(t){return new e(wp.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return wp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new wp(t.slice()))}}]),e}();function Mp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ap(e)?4:10:Qd()}function Up(e,t){var n=Mp(e);if(n!==Mp(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rp(e).isEqual(Rp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ep(e.timestampValue),r=Ep(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cp(e.bytesValue).isEqual(Cp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sp(e.geoPointValue.latitude)===Sp(t.geoPointValue.latitude)&&Sp(e.geoPointValue.longitude)===Sp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sp(e.integerValue)===Sp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Sp(e.doubleValue),r=Sp(t.doubleValue);return n===r?Op(n)===Op(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hp(e.arrayValue.values||[],t.arrayValue.values||[],Up);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yp(n)!==yp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Up(n[i],r[i])))return!1;return!0}(e,t);default:return Qd()}}function Fp(e,t){return void 0!==(e.values||[]).find((function(e){return Up(e,t)}))}function jp(e,t){var n=Mp(e),r=Mp(t);if(n!==r)return fp(n,r);switch(n){case 0:return 0;case 1:return fp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Sp(e.integerValue||e.doubleValue),r=Sp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vp(e.timestampValue,t.timestampValue);case 4:return Vp(Rp(e),Rp(t));case 5:return fp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Cp(e),r=Cp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fp(n[i],r[i]);if(0!==a)return a}return fp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fp(Sp(e.latitude),Sp(t.latitude));return 0!==n?n:fp(Sp(e.longitude),Sp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=jp(n[i],r[i]);if(a)return a}return fp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=fp(r[o],a[o]);if(0!==u)return u;var s=jp(n[r[o]],i[a[o]]);if(0!==s)return s}return fp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Qd()}}function Vp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fp(e,t);var n=Ep(e),r=Ep(t),i=fp(n.seconds,r.seconds);return 0!==i?i:fp(n.nanos,r.nanos)}function zp(e){return qp(e)}function qp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ep(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Cp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Lp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Ee(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=qp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Ee(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(qp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Qd();var t,n}function Bp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Wp(e){return!!e&&"integerValue"in e}function Hp(e){return!!e&&"arrayValue"in e}function Kp(e){return!!e&&"nullValue"in e}function Gp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qp(e){return!!e&&"mapValue"in e}function $p(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=$p(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$p(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Yp=function(){function e(t){xe(this,e),this.value=t}return Ie(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(t)}},{key:"setAll",value:function(e){var t=this,n=_p.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=$p(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Qp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Up(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){mp(t,(function(t,n){return e[t]=n}));var r,i=Ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e($p(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Jp(e){var t=[];return mp(e.fields,(function(e,n){var r=new _p([e]);if(Qp(n)){var i=Jp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Ee(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new xp(t)}var Xp=function(){function e(t,n,r,i,a){xe(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return Ie(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Yp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Yp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,vp.min(),Yp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Yp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Yp.empty(),2)}}]),e}(),Zp=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;xe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.R=null}));function ev(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zp(e,t,n,r,i,a,o)}function tv(e){var t=Yd(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+zp(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Pp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=pv(t.startAt)),t.endAt&&(n+="|ub:",n+=pv(t.endAt)),t.R=n}return t.R}function nv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!yv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Up(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gv(e.startAt,t.startAt)&&gv(e.endAt,t.endAt)}function rv(e){return Lp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var iv=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(jp(t,this.value)):null!==t&&Mp(this.value)===Mp(t)&&this.v(jp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qd()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new av(e,t,r):"array-contains"===t?new cv(e,r):"in"===t?new lv(e,r):"not-in"===t?new fv(e,r):"array-contains-any"===t?new hv(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new ov(e,n):new uv(e,n)}}]),n}(function(){return Ie((function e(){xe(this,e)}))}());var av=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,e,r,i)).key=Lp.fromName(i.referenceValue),a}return Ie(n,[{key:"matches",value:function(e){var t=Lp.comparator(e.key,this.key);return this.v(t)}}]),n}(iv),ov=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,"in",r)).keys=sv("in",r),i}return Ie(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(iv),uv=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,"not-in",r)).keys=sv("not-in",r),i}return Ie(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(iv);function sv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Lp.fromName(e.referenceValue)}))}var cv=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"array-contains",r)}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Hp(t)&&Fp(t.arrayValue,this.value)}}]),n}(iv),lv=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"in",r)}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Fp(this.value.arrayValue,t)}}]),n}(iv),fv=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"not-in",r)}return Ie(n,[{key:"matches",value:function(e){if(Fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Fp(this.value.arrayValue,t)}}]),n}(iv),hv=function(e){Ce(n,e);var t=Oe(n);function n(e,r){return xe(this,n),t.call(this,e,"array-contains-any",r)}return Ie(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Fp(t.value.arrayValue,e)}))}}]),n}(iv),dv=Ie((function e(t,n){xe(this,e),this.position=t,this.before=n}));function pv(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return zp(e)})).join(","))}var vv=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";xe(this,e),this.field=t,this.dir=n}));function yv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function mv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Lp.comparator(Lp.fromName(o.referenceValue),n.key):jp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function gv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Up(e.position[n],t.position[n]))return!1;return!0}var kv=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;xe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.S=null,this.D=null,this.startAt,this.endAt}));function wv(e,t,n,r,i,a,o,u){return new kv(e,t,n,r,i,a,o,u)}function bv(e){return new kv(e)}function _v(e){return!Pp(e.limit)&&"F"===e.limitType}function xv(e){return!Pp(e.limit)&&"L"===e.limitType}function Tv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Iv(e){var t,n=Ee(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ev(e){return null!==e.collectionGroup}function Sv(e){var t=Yd(e);if(null===t.S){t.S=[];var n=Iv(t),r=Tv(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new vv(n)),t.S.push(new vv(_p.keyField(),"asc"));else{var i,a=!1,o=Ee(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new vv(_p.keyField(),s))}}}return t.S}function Cv(e){var t=Yd(e);if(!t.D)if("F"===t.limitType)t.D=ev(t.path,t.collectionGroup,Sv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Ee(Sv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new dv(t.endAt.position,!t.endAt.before):null,s=t.startAt?new dv(t.startAt.position,!t.startAt.before):null;t.D=ev(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.D}function Av(e,t,n){return new kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nv(e,t){return nv(Cv(e),Cv(t))&&e.limitType===t.limitType}function Rv(e){return"".concat(tv(Cv(e)),"|lt:").concat(e.limitType)}function Pv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(zp(t.value));var t})).join(", "),"]")),Pp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+pv(e.startAt)),e.endAt&&(t+=", endAt: "+pv(e.endAt)),"Target(".concat(t,")")}(Cv(e)),"; limitType=").concat(e.limitType,")")}function Ov(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Lp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ee(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ee(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!mv(e.startAt,Sv(e),t))&&(!e.endAt||!mv(e.endAt,Sv(e),t))}(e,t)}function Dv(e){return function(t,n){var r,i=!1,a=Ee(Sv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Lv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Lv(e,t,n){var r=e.field.isKeyField()?Lp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jp(r,i):Qd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qd()}}function Mv(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Op(t)?"-0":t}}function Uv(e){return{integerValue:""+e}}function Fv(e,t){return Dp(t)?Uv(t):Mv(e,t)}var jv=Ie((function e(){xe(this,e),this._=void 0}));function Vv(e,t,n){return e instanceof Bv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wv?Hv(e,t):e instanceof Kv?Gv(e,t):function(e,t){var n=qv(e,t),r=$v(n)+$v(e.N);return Wp(n)&&Wp(e.N)?Uv(r):Mv(e.k,r)}(e,t)}function zv(e,t,n){return e instanceof Wv?Hv(e,t):e instanceof Kv?Gv(e,t):n}function qv(e,t){return e instanceof Qv?Wp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Bv=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n)}(jv),Wv=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).elements=e,r}return Ie(n)}(jv);function Hv(e,t){var n,r=Yv(t),i=Ee(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Up(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Kv=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).elements=e,r}return Ie(n)}(jv);function Gv(e,t){var n,r=Yv(t),i=Ee(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Up(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Qv=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).k=e,i.N=r,i}return Ie(n)}(jv);function $v(e){return Sp(e.integerValue||e.doubleValue)}function Yv(e){return Hp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Jv=Ie((function e(t,n){xe(this,e),this.field=t,this.transform=n}));var Xv=Ie((function e(t,n){xe(this,e),this.version=t,this.transformResults=n})),Zv=function(){function e(t,n){xe(this,e),this.updateTime=t,this.exists=n}return Ie(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ey(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ty=Ie((function e(){xe(this,e)}));function ny(e,t,n){e instanceof uy?function(e,t,n){var r=e.value.clone(),i=ly(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof sy?function(e,t,n){if(ey(e.precondition,t)){var r=ly(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(cy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ry(e,t,n){e instanceof uy?function(e,t,n){if(ey(e.precondition,t)){var r=e.value.clone(),i=fy(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(oy(t),r).setHasLocalMutations()}}(e,t,n):e instanceof sy?function(e,t,n){if(ey(e.precondition,t)){var r=fy(e.fieldTransforms,n,t),i=t.data;i.setAll(cy(e)),i.setAll(r),t.convertToFoundDocument(oy(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){ey(e.precondition,t)&&t.convertToNoDocument(vp.min())}(e,t)}function iy(e,t){var n,r=null,i=Ee(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=qv(a.transform,o||null);null!=u&&(null==r&&(r=Yp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ay(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wv&&t instanceof Wv||e instanceof Kv&&t instanceof Kv?hp(e.elements,t.elements,Up):e instanceof Qv&&t instanceof Qv?Up(e.N,t.N):e instanceof Bv&&t instanceof Bv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function oy(e){return e.isFoundDocument()?e.version:vp.min()}var uy=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return xe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ie(n)}(ty),sy=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return xe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ie(n)}(ty);function cy(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ly(e,t,n){var r=new Map;$d(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,zv(o,u,n[i]))}return r}function fy(e,t,n){var r,i=new Map,a=Ee(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Vv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var hy,dy,py=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ie(n)}(ty),vy=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ie(n)}(ty),yy=Ie((function e(t){xe(this,e),this.count=t}));function my(e){switch(e){default:return Qd();case Jd.CANCELLED:case Jd.UNKNOWN:case Jd.DEADLINE_EXCEEDED:case Jd.RESOURCE_EXHAUSTED:case Jd.INTERNAL:case Jd.UNAVAILABLE:case Jd.UNAUTHENTICATED:return!1;case Jd.INVALID_ARGUMENT:case Jd.NOT_FOUND:case Jd.ALREADY_EXISTS:case Jd.PERMISSION_DENIED:case Jd.FAILED_PRECONDITION:case Jd.ABORTED:case Jd.OUT_OF_RANGE:case Jd.UNIMPLEMENTED:case Jd.DATA_LOSS:return!0}}function gy(e){if(void 0===e)return Hd("GRPC error has no .code"),Jd.UNKNOWN;switch(e){case hy.OK:return Jd.OK;case hy.CANCELLED:return Jd.CANCELLED;case hy.UNKNOWN:return Jd.UNKNOWN;case hy.DEADLINE_EXCEEDED:return Jd.DEADLINE_EXCEEDED;case hy.RESOURCE_EXHAUSTED:return Jd.RESOURCE_EXHAUSTED;case hy.INTERNAL:return Jd.INTERNAL;case hy.UNAVAILABLE:return Jd.UNAVAILABLE;case hy.UNAUTHENTICATED:return Jd.UNAUTHENTICATED;case hy.INVALID_ARGUMENT:return Jd.INVALID_ARGUMENT;case hy.NOT_FOUND:return Jd.NOT_FOUND;case hy.ALREADY_EXISTS:return Jd.ALREADY_EXISTS;case hy.PERMISSION_DENIED:return Jd.PERMISSION_DENIED;case hy.FAILED_PRECONDITION:return Jd.FAILED_PRECONDITION;case hy.ABORTED:return Jd.ABORTED;case hy.OUT_OF_RANGE:return Jd.OUT_OF_RANGE;case hy.UNIMPLEMENTED:return Jd.UNIMPLEMENTED;case hy.DATA_LOSS:return Jd.DATA_LOSS;default:return Qd()}}(dy=hy||(hy={}))[dy.OK=0]="OK",dy[dy.CANCELLED=1]="CANCELLED",dy[dy.UNKNOWN=2]="UNKNOWN",dy[dy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dy[dy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dy[dy.NOT_FOUND=5]="NOT_FOUND",dy[dy.ALREADY_EXISTS=6]="ALREADY_EXISTS",dy[dy.PERMISSION_DENIED=7]="PERMISSION_DENIED",dy[dy.UNAUTHENTICATED=16]="UNAUTHENTICATED",dy[dy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dy[dy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dy[dy.ABORTED=10]="ABORTED",dy[dy.OUT_OF_RANGE=11]="OUT_OF_RANGE",dy[dy.UNIMPLEMENTED=12]="UNIMPLEMENTED",dy[dy.INTERNAL=13]="INTERNAL",dy[dy.UNAVAILABLE=14]="UNAVAILABLE",dy[dy.DATA_LOSS=15]="DATA_LOSS";var ky=function(){function e(t,n){xe(this,e),this.comparator=t,this.root=n||by.EMPTY}return Ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,by.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,by.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new wy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new wy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new wy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new wy(this.root,e,this.comparator,!0)}}]),e}(),wy=function(){function e(t,n,r,i){xe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ie(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),by=function(){function e(t,n,r,i,a){xe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Qd();if(this.right.isRed())throw Qd();var e=this.left.check();if(e!==this.right.check())throw Qd();return e+(this.isRed()?0:1)}}]),e}();by.EMPTY=null,by.RED=!0,by.BLACK=!1,by.EMPTY=new(function(){function e(){xe(this,e),this.size=0}return Ie(e,[{key:"key",get:function(){throw Qd()}},{key:"value",get:function(){throw Qd()}},{key:"color",get:function(){throw Qd()}},{key:"left",get:function(){throw Qd()}},{key:"right",get:function(){throw Qd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new by(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var _y=function(){function e(t){xe(this,e),this.comparator=t,this.data=new ky(this.comparator)}return Ie(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new xy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new xy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),xy=function(){function e(t){xe(this,e),this.iter=t}return Ie(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Ty=new ky(Lp.comparator);function Iy(){return Ty}var Ey=new ky(Lp.comparator);function Sy(){return Ey}var Cy=new ky(Lp.comparator);function Ay(){return Cy}var Ny=new _y(Lp.comparator);function Ry(){for(var e=Ny,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Py=new _y(fp);function Oy(){return Py}var Dy=function(){function e(t,n,r,i,a){xe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ie(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ly.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(vp.min(),r,Oy(),Iy(),Ry())}}]),e}(),Ly=function(){function e(t,n,r,i,a){xe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ie(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Tp.EMPTY_BYTE_STRING,n,Ry(),Ry(),Ry())}}]),e}(),My=Ie((function e(t,n,r,i){xe(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i})),Uy=Ie((function e(t,n){xe(this,e),this.targetId=t,this.O=n})),Fy=Ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;xe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),jy=function(){function e(){xe(this,e),this.M=0,this.L=qy(),this.B=Tp.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return Ie(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=Ry(),t=Ry(),n=Ry();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qd()}})),new Ly(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=qy()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),Vy=function(){function e(t){xe(this,e),this.et=t,this.nt=new Map,this.st=Iy(),this.it=zy(),this.rt=new _y(fp)}return Ie(e,[{key:"ot",value:function(e){var t,n=Ee(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ee(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:Qd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(rv(i))if(0===n){var a=new Lp(i.path);this.ct(t,a,Xp.newNoDocument(a,vp.min()))}else $d(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&rv(a.target)){var o=new Lp(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,Xp.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=Ry();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Dy(e,n,this.rt,this.st,r);return this.st=Iy(),this.it=zy(),this.rt=new _y(fp),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new jy,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new _y(fp),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Wd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new jy),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function zy(){return new ky(Lp.comparator)}function qy(){return new ky(Lp.comparator)}var By={asc:"ASCENDING",desc:"DESCENDING"},Wy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hy=Ie((function e(t,n){xe(this,e),this.databaseId=t,this.C=n}));function Ky(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gy(e,t){return e.C?t.toBase64():t.toUint8Array()}function Qy(e,t){return Ky(e,t.toTimestamp())}function $y(e){return $d(!!e),vp.fromTimestamp(function(e){var t=Ep(e);return new pp(t.seconds,t.nanos)}(e))}function Yy(e,t){return function(e){return new wp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jy(e){var t=wp.fromString(e);return $d(_m(t)),t}function Xy(e,t){return Yy(e.databaseId,t.path)}function Zy(e,t){var n=Jy(t);if(n.get(1)!==e.databaseId.projectId)throw new Xd(Jd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xd(Jd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lp(rm(n))}function em(e,t){return Yy(e.databaseId,t)}function tm(e){var t=Jy(e);return 4===t.length?wp.emptyPath():rm(t)}function nm(e){return new wp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rm(e){return $d(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function im(e,t,n){return{name:Xy(e,t),fields:n.value.mapValue.fields}}function am(e,t,n){var r=Zy(e,t.name),i=$y(t.updateTime),a=new Yp({mapValue:{fields:t.fields}}),o=Xp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function om(e,t){return"found"in t?function(e,t){$d(!!t.found),t.found.name,t.found.updateTime;var n=Zy(e,t.found.name),r=$y(t.found.updateTime),i=new Yp({mapValue:{fields:t.found.fields}});return Xp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){$d(!!t.missing),$d(!!t.readTime);var n=Zy(e,t.missing),r=$y(t.readTime);return Xp.newNoDocument(n,r)}(e,t):Qd()}function um(e,t){var n;if(t instanceof uy)n={update:im(e,t.key,t.value)};else if(t instanceof py)n={delete:Xy(e,t.key)};else if(t instanceof sy)n={update:im(e,t.key,t.data),updateMask:bm(t.fieldMask)};else{if(!(t instanceof vy))return Qd();n={verify:Xy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Bv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qv)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Qd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qd()}(e,t.precondition)),n}function sm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Zv.updateTime($y(e.updateTime)):void 0!==e.exists?Zv.exists(e.exists):Zv.none()}(t.currentDocument):Zv.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)$d("REQUEST_TIME"===t.setToServerValue),n=new Bv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Wv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Kv(i)}else"increment"in t?n=new Qv(e,t.increment):Qd();var a=_p.fromServerFormat(t.fieldPath);return new Jv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Zy(e,t.update.name),a=new Yp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new xp(t.map((function(e){return _p.fromServerFormat(e)})))}(t.updateMask);return new sy(i,a,o,n,r)}return new uy(i,a,n,r)}if(t.delete){var u=Zy(e,t.delete);return new py(u,n)}if(t.verify){var s=Zy(e,t.verify);return new vy(s,n)}return Qd()}function cm(e,t){return{documents:[em(e,t.path)]}}function lm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=em(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=em(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Gp(e.value))return{unaryFilter:{field:mm(e.field),op:"IS_NAN"}};if(Kp(e.value))return{unaryFilter:{field:mm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gp(e.value))return{unaryFilter:{field:mm(e.field),op:"IS_NOT_NAN"}};if(Kp(e.value))return{unaryFilter:{field:mm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mm(e.field),op:ym(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:mm(e.field),direction:vm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||Pp(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=dm(t.startAt)),t.endAt&&(n.structuredQuery.endAt=dm(t.endAt)),n}function fm(e){var t=tm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$d(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=hm(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new vv(gm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Pp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=pm(n.startAt));var l=null;return n.endAt&&(l=pm(n.endAt)),wv(t,i,u,o,s,"F",c,l)}function hm(e){return e?void 0!==e.unaryFilter?[wm(e)]:void 0!==e.fieldFilter?[km(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return hm(e)})).reduce((function(e,t){return e.concat(t)})):Qd():[]}function dm(e){return{before:e.before,values:e.position}}function pm(e){var t=!!e.before,n=e.values||[];return new dv(n,t)}function vm(e){return By[e]}function ym(e){return Wy[e]}function mm(e){return{fieldPath:e.canonicalString()}}function gm(e){return _p.fromServerFormat(e.fieldPath)}function km(e){return iv.create(gm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qd()}}(e.fieldFilter.op),e.fieldFilter.value)}function wm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=gm(e.unaryFilter.field);return iv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=gm(e.unaryFilter.field);return iv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gm(e.unaryFilter.field);return iv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gm(e.unaryFilter.field);return iv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qd()}}function bm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function _m(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function xm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Im(t)),t=Tm(e.get(n),t);return Im(t)}function Tm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Im(e){return e+"\x01\x01"}function Em(e){var t=e.length;if($d(t>=2),2===t)return $d("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),wp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Qd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Qd()}a=o+2}return new wp(r)}var Sm=Ie((function e(t,n){xe(this,e),this.seconds=t,this.nanoseconds=n})),Cm=Ie((function e(t,n,r){xe(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));Cm.store="owner",Cm.key="owner";var Am=Ie((function e(t,n,r){xe(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Am.store="mutationQueues",Am.keyPath="userId";var Nm=Ie((function e(t,n,r,i,a){xe(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Nm.store="mutations",Nm.keyPath="batchId",Nm.userMutationsIndex="userMutationsIndex",Nm.userMutationsKeyPath=["userId","batchId"];var Rm=function(){function e(){xe(this,e)}return Ie(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,xm(t)]}},{key:"key",value:function(e,t,n){return[e,xm(t),n]}}]),e}();Rm.store="documentMutations",Rm.PLACEHOLDER=new Rm;var Pm=Ie((function e(t,n){xe(this,e),this.path=t,this.readTime=n})),Om=Ie((function e(t,n){xe(this,e),this.path=t,this.version=n})),Dm=Ie((function e(t,n,r,i,a,o){xe(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));Dm.store="remoteDocuments",Dm.readTimeIndex="readTimeIndex",Dm.readTimeIndexPath="readTime",Dm.collectionReadTimeIndex="collectionReadTimeIndex",Dm.collectionReadTimeIndexPath=["parentPath","readTime"];var Lm=Ie((function e(t){xe(this,e),this.byteSize=t}));Lm.store="remoteDocumentGlobal",Lm.key="remoteDocumentGlobalKey";var Mm=Ie((function e(t,n,r,i,a,o,u){xe(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));Mm.store="targets",Mm.keyPath="targetId",Mm.queryTargetsIndexName="queryTargetsIndex",Mm.queryTargetsKeyPath=["canonicalId","targetId"];var Um=Ie((function e(t,n,r){xe(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));Um.store="targetDocuments",Um.keyPath=["targetId","path"],Um.documentTargetsIndex="documentTargetsIndex",Um.documentTargetsKeyPath=["path","targetId"];var Fm=Ie((function e(t,n,r,i){xe(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Fm.key="targetGlobalKey",Fm.store="targetGlobal";var jm=Ie((function e(t,n){xe(this,e),this.collectionId=t,this.parent=n}));jm.store="collectionParents",jm.keyPath=["collectionId","parent"];var Vm=Ie((function e(t,n,r,i){xe(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));Vm.store="clientMetadata",Vm.keyPath="clientId";var zm=Ie((function e(t,n,r){xe(this,e),this.bundleId=t,this.createTime=n,this.version=r}));zm.store="bundles",zm.keyPath="bundleId";var qm=Ie((function e(t,n,r){xe(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));qm.store="namedQueries",qm.keyPath="name";var Bm=[Am.store,Nm.store,Rm.store,Dm.store,Mm.store,Cm.store,Fm.store,Um.store].concat([Vm.store]).concat([Lm.store]).concat([jm.store]).concat([zm.store,qm.store]),Wm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hm=function(){function e(){xe(this,e),this.onCommittedListeners=[]}return Ie(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Km=function(){function e(t){var n=this;xe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ie(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Qd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Ee(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Gm=function(){function e(t,n){var r=this;xe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new Zd,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new Ym(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=tg(e.target.error);r.It.reject(new Ym(t,n))}}return Ie(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Wd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Xm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ym(n,t)}}}]),e}(),Qm=function(){function e(t,n,r){xe(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(We())&&Hd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ie(e,[{key:"Ct",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Wd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ym(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Xd(Jd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Xd(Jd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ym(t,n))},i.onupgradeneeded=function(e){Wd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){Wd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ke(be().mark((function e(t,n,r,i){var a,o,u,s,c=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(be().mark((function e(){var n,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=Gm.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),Km.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Wd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Wd("SimpleDb","Removing database:",e),Zm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!Ye())return!1;if(e.vt())return!0;var t=We(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nweeter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDhVQCN8VeReTWWpnXv9GEv_kz_F0lKsXQ",REACT_APP_AUTH_DOMAIN:"nwitter-6afcc.firebaseapp.com",REACT_APP_PROJECT_ID:"nwitter-6afcc",REACT_APP_STORAGE_BUCKET:"nwitter-6afcc.appspot.com",REACT_APP_MESSAGING_ID:"229439035332",REACT_APP_APP_ID:"1:229439035332:web:a40b65fbde74b87765f691"})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$m=function(){function e(t){xe(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return Ie(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return Zm(this.$t.delete())}}]),e}(),Ym=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,Jd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ie(n)}(Xd);function Jm(e){return"IndexedDbTransactionError"===e.name}var Xm=function(){function e(t){xe(this,e),this.store=t}return Ie(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Wd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Wd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zm(n)}},{key:"add",value:function(e){return Wd("SimpleDb","ADD",this.store.name,e,e),Zm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Zm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Wd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Wd("SimpleDb","DELETE",this.store.name,e),Zm(this.store.delete(e))}},{key:"count",value:function(){return Wd("SimpleDb","COUNT",this.store.name),Zm(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){Wd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new Km((function(n,r){t.onerror=function(e){var t=tg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new Km((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $m(i),o=t(i.primaryKey,i.value,a);if(o instanceof Km){var u=o.catch((function(e){return a.done(),Km.reject(e)}));n.push(u)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return Km.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Zm(e){return new Km((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tg(e.target.error);n(t)}}))}var eg=!1;function tg(e){var t=Qm.Pt(We());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Xd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return eg||(eg=!0,setTimeout((function(){throw r}),0)),r}}return e}var ng=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return Ie(n)}(Hm);function rg(e,t){var n=Yd(e);return Qm.Dt(n.Wt,t)}var ig=function(){function e(t,n,r,i){xe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ie(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ny(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Ee(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ry(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ee(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&ry(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vp.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ry())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&hp(this.mutations,e.mutations,(function(e,t){return ay(e,t)}))&&hp(this.baseMutations,e.baseMutations,(function(e,t){return ay(e,t)}))}}]),e}(),ag=function(){function e(t,n,r,i){xe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ie(e,null,[{key:"from",value:function(t,n,r){$d(t.mutations.length===r.length);for(var i=Ay(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),og=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tp.EMPTY_BYTE_STRING;xe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ie(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ug=Ie((function e(t){xe(this,e),this.Gt=t}));function sg(e,t){if(t.document)return am(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Lp.fromSegments(t.noDocument.path),r=dg(t.noDocument.readTime),i=Xp.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Lp.fromSegments(t.unknownDocument.path),o=dg(t.unknownDocument.version);return Xp.newUnknownDocument(a,o)}return Qd()}function cg(e,t,n){var r=lg(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Xy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ky(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new Dm(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=hg(t.version),c=t.hasCommittedMutations;return new Dm(null,new Pm(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=hg(t.version);return new Dm(new Om(l,f),null,null,!0,r,i)}return Qd()}function lg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fg(e){var t=new pp(e[0],e[1]);return vp.fromTimestamp(t)}function hg(e){var t=e.toTimestamp();return new Sm(t.seconds,t.nanoseconds)}function dg(e){var t=new pp(e.seconds,e.nanoseconds);return vp.fromTimestamp(t)}function pg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sm(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return sm(e.Gt,t)})),u=pp.fromMillis(t.localWriteTimeMs);return new ig(t.batchId,u,n,o)}function vg(e){var t,n,r=dg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dg(e.lastLimboFreeSnapshotVersion):vp.min();return void 0!==e.query.documents?($d(1===(n=e.query).documents.length),t=Cv(bv(tm(n.documents[0])))):t=function(e){return Cv(fm(e))}(e.query),new og(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Tp.fromBase64String(e.resumeToken))}function yg(e,t){var n,r=hg(t.snapshotVersion),i=hg(t.lastLimboFreeSnapshotVersion);n=rv(t.target)?cm(e.Gt,t.target):lm(e.Gt,t.target);var a=t.resumeToken.toBase64();return new Mm(t.targetId,tv(t.target),r,a,t.sequenceNumber,i,n)}function mg(e){var t=fm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Av(t,t.limit,"L"):t}var gg=function(){function e(){xe(this,e)}return Ie(e,[{key:"getBundleMetadata",value:function(e,t){return kg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return kg(e).put({bundleId:(n=t).id,createTime:hg($y(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return wg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:mg(t.bundledQuery),readTime:dg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return wg(e).put(function(e){return{name:e.name,readTime:hg($y(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function kg(e){return rg(e,zm.store)}function wg(e){return rg(e,qm.store)}var bg=function(){function e(){xe(this,e),this.zt=new _g}return Ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),Km.resolve()}},{key:"getCollectionParents",value:function(e,t){return Km.resolve(this.zt.getEntries(t))}}]),e}(),_g=function(){function e(){xe(this,e),this.index={}}return Ie(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new _y(wp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new _y(wp.comparator)).toArray()}}]),e}(),xg=function(){function e(){xe(this,e),this.Ht=new _g}return Ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:xm(i)};return Tg(e).put(a)}return Km.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[dp(t),""],!1,!0);return Tg(e).Bt(r).next((function(e){var r,i=Ee(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Em(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Tg(e){return rg(e,jm.store)}var Ig={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Eg=function(){function e(t,n,r){xe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ie(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Sg(e,t,n){var r=e.store(Nm.store),i=e.store(Rm.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.jt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){$d(1===u)})));var c,l=[],f=Ee(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Rm.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Km.waitFor(a).next((function(){return l}))}function Cg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qd();t=e.noDocument}return JSON.stringify(t).length}Eg.DEFAULT_COLLECTION_PERCENTILE=10,Eg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eg.DEFAULT=new Eg(41943040,Eg.DEFAULT_COLLECTION_PERCENTILE,Eg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eg.DISABLED=new Eg(-1,0,0);var Ag=function(){function e(t,n,r,i){xe(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return Ie(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rg(e).jt({index:Nm.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Pg(e),o=Rg(e);return o.add({}).next((function(u){$d("number"==typeof u);var s,c=new ig(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return um(e.Gt,t)})),i=n.mutations.map((function(t){return um(e.Gt,t)}));return new Nm(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new _y((function(e,t){return fp(e.canonicalString(),t.canonicalString())})),d=Ee(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Rm.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Rm.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[u]=c.keys()})),Km.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Rg(e).get(t).next((function(e){return e?($d(e.userId===n.userId),pg(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?Km.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Rg(e).jt({index:Nm.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&($d(t.batchId>=r),a=pg(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rg(e).jt({index:Nm.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rg(e).Bt(Nm.userMutationsIndex,n).next((function(e){return e.map((function(e){return pg(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Rm.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Pg(e).jt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Em(l);if(c===n.userId&&t.path.isEqual(h))return Rg(e).get(f).next((function(e){if(!e)throw Qd();$d(e.userId===n.userId),a.push(pg(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new _y(fp),i=[];return t.forEach((function(t){var a=Rm.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Pg(e).jt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Em(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Km.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Rm.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new _y(fp);return Pg(e).jt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Em(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.te(e,u)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Rg(e).get(t).next((function(e){if(null===e)throw Qd();$d(e.userId===n.userId),r.push(pg(n.k,e))})))})),Km.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Sg(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),Km.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Km.resolve();var r=IDBKeyRange.lowerBound(Rm.prefixForUser(t.userId)),i=[];return Pg(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Em(e[1]);i.push(a)}else r.done()})).next((function(){$d(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ng(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Og(e).get(this.userId).next((function(e){return e||new Am(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return $d(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ng(e,t,n){var r=Rm.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Pg(e).jt({range:a,Kt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Rg(e){return rg(e,Nm.store)}function Pg(e){return rg(e,Rm.store)}function Og(e){return rg(e,Am.store)}var Dg=function(){function e(t){xe(this,e),this.se=t}return Ie(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Lg=function(){function e(t,n){xe(this,e),this.referenceDelegate=t,this.k=n}return Ie(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new Dg(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return vp.fromTimestamp(new pp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Mg(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return $d(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Mg(e).jt((function(o,u){var s=vg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Km.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Mg(e).jt((function(e,n){var r=vg(n);t(r)}))}},{key:"oe",value:function(e){return Ug(e).get(Fm.key).next((function(e){return $d(null!==e),e}))}},{key:"ae",value:function(e,t){return Ug(e).put(Fm.key,t)}},{key:"ce",value:function(e,t){return Mg(e).put(yg(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Mg(e).jt({range:r,index:Mm.queryTargetsIndexName},(function(e,n,r){var a=vg(n);nv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fg(e);return t.forEach((function(t){var o=xm(t.path);i.push(a.put(new Um(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Km.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fg(e);return Km.forEach(t,(function(t){var a=xm(t.path);return Km.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fg(e),i=Ry();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=Em(e[1]),a=new Lp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=xm(t.path),r=IDBKeyRange.bound([n],[dp(n)],!1,!0),i=0;return Fg(e).jt({index:Um.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Mg(e).get(t).next((function(e){return e?vg(e):null}))}}]),e}();function Mg(e){return rg(e,Mm.store)}function Ug(e){return rg(e,Fm.store)}function Fg(e){return rg(e,Um.store)}function jg(e){return Vg.apply(this,arguments)}function Vg(){return Vg=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Jd.FAILED_PRECONDITION&&t.message===Wm){e.next=2;break}throw t;case 2:Wd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Vg.apply(this,arguments)}function zg(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=fp(r,o);return 0===c?fp(i,u):c}var qg=function(){function e(t){xe(this,e),this.he=t,this.buffer=new _y(zg),this.le=0}return Ie(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();zg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Bg=function(){function e(t,n){xe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return Ie(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Wd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Jm(n.t0)){n.next=12;break}Wd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,jg(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Wg=function(){function e(t,n){xe(this,e),this.ge=t,this.params=n}return Ie(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Km.resolve(sp.I);var r=new qg(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Wd("LruGarbageCollector","Garbage collection skipped; disabled"),Km.resolve(Ig)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Wd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ig):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Wd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Bd()<=mt.DEBUG&&Wd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Km.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Hg=function(){function e(t,n){xe(this,e),this.db=t,this.garbageCollector=function(e,t){return new Wg(e,t)}(this,n)}return Ie(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Kg(e,n)}},{key:"removeReference",value:function(e,t,n){return Kg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Kg(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return Og(e).Qt((function(r){return Ng(e,r,t).next((function(e){return e&&(n=!0),Km.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,u){if(u<=t){var s=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Fg(e).delete([0,xm(o.path)])}))}));i.push(s)}})).next((function(){return Km.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Kg(e,t)}},{key:"Ie",value:function(e,t){var n,r=Fg(e),i=sp.I;return r.jt({index:Um.documentTargetsIndex},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==sp.I&&t(new Lp(Em(n)),i),i=c,n=u):i=sp.I})).next((function(){i!==sp.I&&t(new Lp(Em(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Kg(e,t){return Fg(e).put(function(e,t){return new Um(0,xm(e.path),t)}(t,e.currentSequenceNumber))}var Gg=function(){function e(t,n){xe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Ie(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Ee(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){mp(this.inner,(function(t,n){var r,i=Ee(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return gp(this.inner)}}]),e}(),Qg=function(){function e(){xe(this,e),this.changes=new Gg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ie(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:vp.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Xp.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Km.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),$g=function(){function e(t,n){xe(this,e),this.k=t,this.Jt=n}return Ie(e,[{key:"addEntry",value:function(e,t,n){return Xg(e).put(Zg(t),n)}},{key:"removeEntry",value:function(e,t){var n=Xg(e),r=Zg(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Xg(e).get(Zg(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Xg(e).get(Zg(t)).next((function(e){return{document:n.Pe(t,e),size:Cg(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Iy();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Iy(),i=new ky(Lp.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,Cg(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return Km.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Xg(e).jt({range:r},(function(e,t,r){for(var o=Lp.fromSegments(e);a&&Lp.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Iy(),a=t.path.length+1,o={};if(n.isEqual(vp.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=lg(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=Dm.collectionReadTimeIndex}return Xg(e).jt(o,(function(e,n,o){if(e.length===a){var u=sg(r.k,n);t.path.isPrefixOf(u.key.path)?Ov(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Yg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Jg(e).get(Lm.key).next((function(e){return $d(!!e),e}))}},{key:"Re",value:function(e,t){return Jg(e).put(Lm.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=sg(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(vp.min()))return n}return Xp.newInvalidDocument(e)}}]),e}(),Yg=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new Gg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new _y((function(e,t){return fp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Ce.get(a);if(o.document.isValidDocument()){var s=cg(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=Cg(s);r+=c-u,n.push(t.De.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=cg(t.De.k,Xp.newNoDocument(a,vp.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),Km.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(Qg);function Jg(e){return rg(e,Lm.store)}function Xg(e){return rg(e,Dm.store)}function Zg(e){return e.path.toArray()}var ek=function(){function e(t){xe(this,e),this.k=t}return Ie(e,[{key:"Nt",value:function(e,t,n,r){var i=this;$d(n<r&&n>=0&&r<=11);var a=new Gm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Cm.store)}(e),function(e){e.createObjectStore(Am.store,{keyPath:Am.keyPath}),e.createObjectStore(Nm.store,{keyPath:Nm.keyPath,autoIncrement:!0}).createIndex(Nm.userMutationsIndex,Nm.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Rm.store)}(e),tk(e),function(e){e.createObjectStore(Dm.store)}(e));var o=Km.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Um.store),e.deleteObjectStore(Mm.store),e.deleteObjectStore(Fm.store)}(e),tk(e)),o=o.next((function(){return function(e){var t=e.store(Fm.store),n=new Fm(0,0,vp.min().toTimestamp(),0);return t.put(Fm.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Nm.store).Bt().next((function(n){e.deleteObjectStore(Nm.store),e.createObjectStore(Nm.store,{keyPath:Nm.keyPath,autoIncrement:!0}).createIndex(Nm.userMutationsIndex,Nm.userMutationsKeyPath,{unique:!0});var r=t.store(Nm.store),i=n.map((function(e){return r.put(e)}));return Km.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Vm.store,{keyPath:Vm.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Lm.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Dm.store);t.createIndex(Dm.readTimeIndex,Dm.readTimeIndexPath,{unique:!1}),t.createIndex(Dm.collectionReadTimeIndex,Dm.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(zm.store,{keyPath:zm.keyPath})}(e),function(e){e.createObjectStore(qm.store,{keyPath:qm.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(Dm.store).jt((function(e,n){t+=Cg(n)})).next((function(){var n=new Lm(t);return e.store(Lm.store).put(Lm.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(Am.store),r=e.store(Nm.store);return n.Bt().next((function(n){return Km.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(Nm.userMutationsIndex,i).next((function(r){return Km.forEach(r,(function(r){$d(r.userId===n.userId);var i=pg(t.k,r);return Sg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(Um.store),n=e.store(Dm.store);return e.store(Fm.store).get(Fm.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new wp(n),o=function(e){return[0,xm(e)]}(a);r.push(t.get(o).next((function(n){return n?Km.resolve():function(n){return t.put(new Um(0,xm(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Km.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(jm.store,{keyPath:jm.keyPath});var n=t.store(jm.store),r=new _g,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:xm(i)})}};return t.store(Dm.store).jt({Kt:!0},(function(e,t){var n=new wp(e);return i(n.popLast())})).next((function(){return t.store(Rm.store).jt({Kt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Em(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(Mm.store);return n.jt((function(e,r){var i=vg(r),a=yg(t.k,i);return n.put(a)}))}}]),e}();function tk(e){e.createObjectStore(Um.store,{keyPath:Um.keyPath}).createIndex(Um.documentTargetsIndex,Um.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Mm.store,{keyPath:Mm.keyPath}).createIndex(Mm.queryTargetsIndexName,Mm.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Fm.store)}var nk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rk=function(){function e(t,n,r,i,a,o,u,s,c,l){if(xe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new Xd(Jd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hg(this,i),this.Ge=n+"main",this.k=new ug(s),this.ze=new Qm(this.Ge,11,new ek(this.k)),this.He=new Lg(this.referenceDelegate,this.k),this.Jt=new xg,this.Je=function(e,t){return new $g(e,t)}(this.k,this.Jt),this.Ye=new gg,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&Hd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ie(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Xd(Jd.FAILED_PRECONDITION,nk);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new sp(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=ke(be().mark((function n(r){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=ke(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ak(t).put(new Vm(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if(Jm(t))return Wd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Wd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return ik(e).get(Cm.key).next((function(e){return Km.resolve(t.un(e))}))}},{key:"hn",value:function(e){return ak(e).delete(this.clientId)}},{key:"ln",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=rg(e,Vm.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Km.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=Ee(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?Km.resolve(!0):ik(e).get(Cm.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new Xd(Jd.FAILED_PRECONDITION,nk);return!1}}return!(!t.networkEnabled||!t.inForeground)||ak(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Wd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ke(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[Cm.store,Vm.store],(function(e){var n=new ng(e,sp.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ak(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Ag.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Wd("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,Bm,(function(a){return i=new ng(a,r.Be?r.Be.next():sp.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw Hd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new Xd(Jd.FAILED_PRECONDITION,Wm);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return ik(e).get(Cm.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Xd(Jd.FAILED_PRECONDITION,nk)}))}},{key:"cn",value:function(e){var t=new Cm(this.clientId,this.allowTabSynchronization,Date.now());return ik(e).put(Cm.key,t)}},{key:"an",value:function(e){var t=this,n=ik(e);return n.get(Cm.key).next((function(e){return t.un(e)?(Wd("IndexedDbPersistence","Releasing primary lease."),n.delete(Cm.key)):Km.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Hd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Wd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Hd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(jc){Hd("Failed to set zombie client id.",jc)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(jc){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return Qm.bt()}}]),e}();function ik(e){return rg(e,Cm.store)}function ak(e){return rg(e,Vm.store)}function ok(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var uk=Ie((function e(t,n){xe(this,e),this.progress=t,this.In=n})),sk=function(){function e(t,n,r){xe(this,e),this.Je=t,this.An=n,this.Jt=r}return Ie(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=Ee(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=Ee(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Lp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Ev(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Lp(t)).next((function(e){var t=Sy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Sy();return this.Jt.getCollectionParents(e,i).next((function(o){return Km.forEach(o,(function(o){var u=function(e,t){return new kv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=Ee(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=Ee(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=Xp.newInvalidDocument(c),r=r.insert(c,l)),ry(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){Ov(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=Ry(),a=Ee(t);try{for(a.s();!(r=a.n()).done;){var o,u=Ee(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof sy&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),ck=function(){function e(t,n,r,i){xe(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return Ie(e,null,[{key:"$n",value:function(t,n){var r,i=Ry(),a=Ry(),o=Ee(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),lk=function(){function e(){xe(this,e)}return Ie(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(vp.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(_v(t)||xv(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):(Bd()<=mt.DEBUG&&Wd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Pv(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new _y(Dv(e));return t.forEach((function(t,r){Ov(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return Bd()<=mt.DEBUG&&Wd("QueryEngine","Using full collection scan to execute query:",Pv(t)),this.On.getDocumentsMatchingQuery(e,t,vp.min())}}]),e}(),fk=function(){function e(t,n,r,i){xe(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new ky(fp),this.Kn=new Gg((function(e){return tv(e)}),nv),this.jn=vp.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new sk(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return Ie(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function hk(e,t,n,r){return new fk(e,t,n,r)}function dk(e,t){return pk.apply(this,arguments)}function pk(){return pk=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new sk(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=Ry(),s=Ee(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=Ee(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Ee(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Ee(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,u).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),pk.apply(this,arguments)}function vk(e,t){var n=Yd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Km.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);$d(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function yk(e){var t=Yd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function mk(e,t){var n=Yd(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var u=i.get(a);if(u){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return $d(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var u=Iy();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(gk(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(vp.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Km.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,u)})).next((function(){return u}))})).then((function(e){return n.qn=i,e}))}function gk(e,t,n,r,i){var a=Ry();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Iy();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(vp.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):Wd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function kk(e,t){var n=Yd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function wk(e,t){var n=Yd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,Km.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new og(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function bk(e,t,n){return _k.apply(this,arguments)}function _k(){return _k=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Yd(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jm(e.t1)){e.next=12;break}throw e.t1;case 12:Wd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),_k.apply(this,arguments)}function xk(e,t,n){var r=Yd(e),i=vp.min(),a=Ry();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Yd(e),i=r.Kn.get(n);return void 0!==i?Km.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Cv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:vp.min(),n?a:Ry())})).next((function(e){return{documents:e,zn:a}}))}))}function Tk(e,t){var n=Yd(e),r=Yd(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Ik(e){var t=Yd(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Yd(e),i=Iy(),a=lg(n),o=Xg(t),u=IDBKeyRange.lowerBound(a,!0);return o.jt({index:Dm.readTimeIndex,range:u},(function(e,t){var n=sg(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:fg(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function Ek(e){return Sk.apply(this,arguments)}function Sk(){return Sk=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yd(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Xg(e),n=vp.min();return t.jt({index:Dm.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=fg(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),Sk.apply(this,arguments)}function Ck(e,t,n,r){return Ak.apply(this,arguments)}function Ak(){return Ak=ke(be().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Yd(t),o=Ry(),u=Iy(),s=Ay(),c=Ee(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Jn(f)),s=s.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,wk(a,function(e){return Cv(bv(wp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return gk(e,d,u,vp.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ak.apply(this,arguments)}function Nk(e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=ke(be().mark((function e(t,n){var r,i,a,o=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ry(),e.next=3,wk(t,Cv(mg(n.bundledQuery)));case 3:return i=e.sent,a=Yd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=$y(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(Tp.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Rk.apply(this,arguments)}var Pk=function(){function e(t){xe(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return Ie(e,[{key:"getBundleMetadata",value:function(e,t){return Km.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:$y(n.createTime)}),Km.resolve()}},{key:"getNamedQuery",value:function(e,t){return Km.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:mg(e.bundledQuery),readTime:$y(e.readTime)}}(t)),Km.resolve()}}]),e}(),Ok=function(){function e(){xe(this,e),this.ts=new _y(Dk.es),this.ns=new _y(Dk.ss)}return Ie(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Dk(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new Dk(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Lp(new wp([])),r=new Dk(n,e),i=new Dk(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Lp(new wp([])),n=new Dk(t,e),r=new Dk(t,e+1),i=Ry();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Dk(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Dk=function(){function e(t,n){xe(this,e),this.key=t,this.fs=n}return Ie(e,null,[{key:"es",value:function(e,t){return Lp.comparator(e.key,t.key)||fp(e.fs,t.fs)}},{key:"ss",value:function(e,t){return fp(e.fs,t.fs)||Lp.comparator(e.key,t.key)}}]),e}(),Lk=function(){function e(t,n){xe(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new _y(Dk.es)}return Ie(e,[{key:"checkEmpty",value:function(e){return Km.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new ig(i,t,n,r);this.An.push(a);var o,u=Ee(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ws=this.ws.add(new Dk(s.key,i)),this.Jt.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Km.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Km.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return Km.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Km.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return Km.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Dk(t,0),i=new Dk(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),Km.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new _y(fp);return t.forEach((function(e){var t=new Dk(e,0),i=new Dk(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),Km.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Lp.isDocumentKey(i)||(i=i.child(""));var a=new Dk(new Lp(i),0),o=new _y(fp);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),Km.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;$d(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return Km.forEach(t.mutations,(function(i){var a=new Dk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Dk(t,0),r=this.ws.firstAfterOrEqual(n);return Km.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,Km.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),Mk=function(){function e(t,n){xe(this,e),this.Jt=t,this.Ts=n,this.docs=new ky(Lp.comparator),this.size=0}return Ie(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Km.resolve(n?n.document.clone():Xp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Iy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Xp.newInvalidDocument(e))})),Km.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Iy(),i=new Lp(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||Ov(t,c)&&(r=r.insert(c.key,c.clone()))}return Km.resolve(r)}},{key:"Es",value:function(e,t){return Km.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Uk(this)}},{key:"getSize",value:function(e){return Km.resolve(this.size)}}]),e}(),Uk=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).De=e,r}return Ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),Km.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(Qg),Fk=function(){function e(t){xe(this,e),this.persistence=t,this.Is=new Gg((function(e){return tv(e)}),nv),this.lastRemoteSnapshotVersion=vp.min(),this.highestTargetId=0,this.As=0,this.Rs=new Ok,this.targetCount=0,this.Ps=Dg.ie()}return Ie(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),Km.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Km.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Km.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),Km.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Km.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new Dg(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,Km.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),Km.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Km.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Km.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Km.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return Km.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),Km.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Km.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),Km.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return Km.resolve(n)}},{key:"containsKey",value:function(e,t){return Km.resolve(this.Rs.containsKey(t))}}]),e}(),jk=function(){function e(t,n){var r=this;xe(this,e),this.bs={},this.Be=new sp(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Fk(this),this.Jt=new bg,this.Je=function(e,t){return new Mk(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new ug(n),this.Ye=new Pk(this.k)}return Ie(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Lk(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Wd("MemoryPersistence","Starting transaction:",e);var i=new Vk(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return Km.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Vk=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ie(n)}(Hm),zk=function(){function e(t){xe(this,e),this.persistence=t,this.Cs=new Ok,this.Ns=null}return Ie(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw Qd()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Km.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Km.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),Km.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Km.forEach(this.xs,(function(r){var i=Lp.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Km.or([function(){return Km.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function qk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Bk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Wk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Hk=function(){function e(t,n,r,i){xe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ie(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Xd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Hd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Kk=function(){function e(t,n,r){xe(this,e),this.targetId=t,this.state=n,this.error=r}return Ie(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xd(i.error.code,i.error.message))),a?new e(t,i.state,r):(Hd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Gk=function(){function e(t,n){xe(this,e),this.clientId=t,this.activeTargetIds=n}return Ie(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Oy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Dp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Hd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Qk=function(){function e(t,n){xe(this,e),this.clientId=t,this.onlineState=n}return Ie(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Hd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),$k=function(){function e(){xe(this,e),this.activeTargetIds=Oy()}return Ie(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Yk=function(){function e(t,n,r,i,a){xe(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new ky(fp),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=qk(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new $k),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return Ie(e,[{key:"start",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=Ee(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(qk(this.persistenceKey,i)))&&(o=Gk.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(u=this.storage.getItem(this.Js))&&(s=this.Zs(u))&&this.ti(s),c=Ee(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Wk(this.persistenceKey,e));if(n){var r=Kk.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Wk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Wd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Wd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Wd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Wd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Hd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(ke(be().mark((function e(){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}s=function(e){var t=sp.I;if(null!=e)try{var n=JSON.parse(e);$d("number"==typeof n),t=n}catch(e){Hd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==sp.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new Hk(this.currentUser,e,t,n),i=Bk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=Bk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=Wk(this.persistenceKey,e),i=new Kk(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return Gk.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hk.Fs(new Vd(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return Kk.Fs(r,t)}},{key:"Zs",value:function(e){return Qk.Fs(e)}},{key:"fi",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:Wd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.yi(o,u).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=Oy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Jk=function(){function e(){xe(this,e),this.pi=new $k,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ie(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new $k,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Xk=function(){function e(){xe(this,e)}return Ie(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zk=function(){function e(){var t=this;xe(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return Ie(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Wd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ee(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){Wd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ee(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ew={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},tw=function(){function e(t){xe(this,e),this.Vi=t.Vi,this.Si=t.Si}return Ie(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),nw=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ie(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Fd;o.listenOnce(Od.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Pd.NO_ERROR:var t=o.getResponseJson();Wd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Pd.TIMEOUT:Wd("Connection",'RPC "'+e+'" timed out'),a(new Xd(Jd.DEADLINE_EXCEEDED,"Request time out"));break;case Pd.HTTP_ERROR:var n=o.getStatus();if(Wd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jd).indexOf(t)>=0?t:Jd.UNKNOWN}(r.status);a(new Xd(u,r.message))}else a(new Xd(Jd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Xd(Jd.UNAVAILABLE,"Connection failed."));break;default:Qd()}}finally{Wd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Nd(),a=Rd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Md({})),this.qi(o.initMessageHeaders,t,n),He()||Qe()||We().indexOf("Electron/")>=0||$e()||We().indexOf("MSAppHost/")>=0||Ge()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Wd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new tw({Vi:function(e){l?Wd("Connection","Not sending because WebChannel is closed:",e):(c||(Wd("Connection","Opening WebChannel transport."),s.open(),c=!0),Wd("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ud.EventType.OPEN,(function(){l||Wd("Connection","WebChannel transport opened.")})),h(s,Ud.EventType.CLOSE,(function(){l||(l=!0,Wd("Connection","WebChannel transport closed"),f.Fi())})),h(s,Ud.EventType.ERROR,(function(e){l||(l=!0,Kd("Connection","WebChannel transport errored:",e),f.Fi(new Xd(Jd.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ud.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];$d(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Wd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=hy[e];if(void 0!==t)return gy(t)}(a),u=i.message;void 0===o&&(o=Jd.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new Xd(o,u)),s.close()}else Wd("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,Dd.STAT_EVENT,(function(e){e.stat===Ld.PROXY?Wd("Connection","Detected buffering proxy"):e.stat===Ld.NOPROXY&&Wd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){xe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ie(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);Wd("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return Wd("RestConnection","Received: ",e),e}),(function(t){throw Kd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=ew[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function rw(){return"undefined"!=typeof window?window:null}function iw(){return"undefined"!=typeof document?document:null}function aw(e){return new Hy(e,!0)}var ow=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;xe(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return Ie(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Wd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),uw=function(){function e(t,n,r,i,a,o,u,s){xe(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new ow(t,n)}return Ie(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===Jd.RESOURCE_EXHAUSTED?(Hd(n.toString()),Hd("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===Jd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new Xd(Jd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return Wd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(Wd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),sw=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a,o,u){var s;return xe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).k=o,s}return Ie(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?($d(void 0===t||"string"==typeof t),Tp.fromBase64String(t||"")):($d(void 0===t||t instanceof Uint8Array),Tp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Jd.UNKNOWN:gy(e.code);return new Xd(t,e.message||"")}(o);n=new Fy(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Zy(e,s.document.name),l=$y(s.document.updateTime),f=new Yp({mapValue:{fields:s.document.fields}}),h=Xp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new My(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Zy(e,v.document),m=v.readTime?$y(v.readTime):vp.min(),g=Xp.newNoDocument(y,m),k=v.removedTargetIds||[];n=new My([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Zy(e,w.document),_=w.removedTargetIds||[];n=new My([],_,b,null)}else{if(!("filter"in t))return Qd();t.filter;var x=t.filter;x.targetId;var T=x.count||0,I=new yy(T),E=x.targetId;n=new Uy(E,I)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return vp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vp.min():t.readTime?$y(t.readTime):vp.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=nm(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=rv(r)?{documents:cm(e,r)}:{query:lm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Gy(e,t.resumeToken):t.snapshotVersion.compareTo(vp.min())>0&&(n.readTime=Ky(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=nm(this.k),t.removeTarget=e,this.gr(t)}}]),n}(uw),cw=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a,o,u){var s;return xe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).k=o,s.Vr=!1,s}return Ie(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,ln(Ae(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if($d(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?($d(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?$y(e.updateTime):$y(t);return n.isEqual(vp.min())&&(n=$y(t)),new Xv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=$y(e.commitTime);return this.listener.Cr(n,t)}return $d(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=nm(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return um(t.k,e)}))};this.gr(n)}}]),n}(uw),lw=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a){var o;return xe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return Ie(n,[{key:"Fr",value:function(){if(this.$r)throw new Xd(Jd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.ir.Bi(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Jd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Xd(Jd.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.ir.ji(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Jd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Xd(Jd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return Ie((function e(){xe(this,e)}))}()),fw=function(){function e(t,n){xe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return Ie(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(Hd(t),this.Lr=!1):Wd("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),hw=Ie((function e(t,n,r,i,a){var o=this;xe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xw(o),!e.t0){e.next=5;break}return Wd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Yd(t)).Gr.add(4),e.next=4,vw(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,dw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new fw(r,i)}));function dw(e){return pw.apply(this,arguments)}function pw(){return pw=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xw(t)){e.next=18;break}n=Ee(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),pw.apply(this,arguments)}function vw(e){return yw.apply(this,arguments)}function yw(){return yw=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ee(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),yw.apply(this,arguments)}function mw(e,t){var n=Yd(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),_w(n)?bw(n):Yw(n).lr()&&kw(n,t))}function gw(e,t){var n=Yd(e),r=Yw(n);n.Wr.delete(t),r.lr()&&ww(n,t),0===n.Wr.size&&(r.lr()?r._r():xw(n)&&n.Jr.set("Unknown"))}function kw(e,t){e.Yr.X(t.targetId),Yw(e).br(t)}function ww(e,t){e.Yr.X(t),Yw(e).vr(t)}function bw(e){e.Yr=new Vy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),Yw(e).start(),e.Jr.Br()}function _w(e){return xw(e)&&!Yw(e).hr()&&e.Wr.size>0}function xw(e){return 0===Yd(e).Gr.size}function Tw(e){e.Yr=void 0}function Iw(e){return Ew.apply(this,arguments)}function Ew(){return Ew=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){kw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function Sw(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tw(t),_w(t)?(t.Jr.Kr(n),bw(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Aw(e,t,n){return Nw.apply(this,arguments)}function Nw(){return Nw=ke(be().mark((function e(t,n,r){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Fy&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Ee(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Wd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Rw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof My?t.Yr.ot(n):n instanceof Uy?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(vp.min())){e.next=29;break}return e.prev=14,e.next=17,yk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(Tp.EMPTY_BYTE_STRING,n.snapshotVersion)),ww(e,t);var r=new og(n.target,t,1,n.sequenceNumber);kw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Wd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Rw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Nw.apply(this,arguments)}function Rw(e,t,n){return Pw.apply(this,arguments)}function Pw(){return Pw=ke(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jm(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,vw(t);case 5:t.Jr.set("Offline"),r||(r=function(){return yk(t.localStore)}),t.asyncQueue.enqueueRetryable(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,dw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Ow(e,t){return t().catch((function(n){return Rw(e,n,t)}))}function Dw(e){return Lw.apply(this,arguments)}function Lw(){return Lw=ke(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Yd(t),r=Jw(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!Mw(n)){e.next=19;break}return e.prev=3,e.next=6,kk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,Uw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Rw(n,e.t0);case 17:e.next=2;break;case 19:Fw(n)&&jw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Lw.apply(this,arguments)}function Mw(e){return xw(e)&&e.Qr.length<10}function Uw(e,t){e.Qr.push(t);var n=Jw(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Fw(e){return xw(e)&&!Jw(e).hr()&&e.Qr.length>0}function jw(e){Jw(e).start()}function Vw(e){return zw.apply(this,arguments)}function zw(){return zw=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jw(t).kr();case 1:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function qw(e){return Bw.apply(this,arguments)}function Bw(){return Bw=ke(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jw(t),r=Ee(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function Ww(e,t,n){return Hw.apply(this,arguments)}function Hw(){return Hw=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=ag.from(i,n,r),e.next=3,Ow(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Dw(t);case 5:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Kw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Jw(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!my(i=n.code)||i===Jd.ABORTED){e.next=7;break}return r=t.Qr.shift(),Jw(t).wr(),e.next=5,Ow(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Dw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fw(t)&&jw(t);case 5:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Qw(e,t){return $w.apply(this,arguments)}function $w(){return $w=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yd(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,dw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,vw(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Yw(e){return e.Xr||(e.Xr=function(e,t,n){var r=Yd(e);return r.Fr(),new sw(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Iw.bind(null,e),Ni:Sw.bind(null,e),Pr:Aw.bind(null,e)}),e.zr.push(function(){var t=ke(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),_w(e)?bw(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:Tw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function Jw(e){return e.Zr||(e.Zr=function(e,t,n){var r=Yd(e);return r.Fr(),new cw(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Vw.bind(null,e),Ni:Kw.bind(null,e),Nr:qw.bind(null,e),Cr:Ww.bind(null,e)}),e.zr.push(function(){var t=ke(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,Dw(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Wd("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var Xw=function(){function e(t,n,r,i,a){xe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Zd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ie(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xd(Jd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Zw(e,t){if(Hd("AsyncQueue","".concat(t,": ").concat(e)),Jm(e))return new Xd(Jd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var eb=function(){function e(t){xe(this,e),this.comparator=t?function(e,n){return t(e,n)||Lp.comparator(e.key,n.key)}:function(e,t){return Lp.comparator(e.key,t.key)},this.keyedMap=Sy(),this.sortedSet=new ky(this.comparator)}return Ie(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),tb=function(){function e(){xe(this,e),this.eo=new ky(Lp.comparator)}return Ie(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Qd():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),nb=function(){function e(t,n,r,i,a,o,u,s){xe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ie(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,eb.emptySet(n),a,r,i,!0,!1)}}]),e}(),rb=Ie((function e(){xe(this,e),this.so=void 0,this.listeners=[]})),ib=Ie((function e(){xe(this,e),this.queries=new Gg((function(e){return Rv(e)}),Nv),this.onlineState="Unknown",this.io=new Set}));function ab(e,t){return ob.apply(this,arguments)}function ob(){return ob=ke(be().mark((function e(t,n){var r,i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new rb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Zw(e.t0,"Initialization of query '".concat(Pv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&fb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ob.apply(this,arguments)}function ub(e,t){return sb.apply(this,arguments)}function sb(){return sb=ke(be().mark((function e(t,n){var r,i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function cb(e,t){var n,r=Yd(e),i=!1,a=Ee(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Ee(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&fb(r)}function lb(e,t,n){var r=Yd(e),i=r.queries.get(t);if(i){var a,o=Ee(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function fb(e){e.io.forEach((function(e){e.next()}))}var hb=function(){function e(t,n,r){xe(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return Ie(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ee(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new nb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=nb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),db=function(){function e(t,n){xe(this,e),this.payload=t,this.byteLength=n}return Ie(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),pb=function(){function e(t){xe(this,e),this.k=t}return Ie(e,[{key:"Hn",value:function(e){return Zy(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?am(this.k,e.document,!1):Xp.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return $y(e)}}]),e}(),vb=function(){function e(t,n,r){xe(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=yb(t)}return Ie(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new pb(this.k),i=Ee(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hn(a.metadata.name),s=Ee(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Ry()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ck(this.localStore,new pb(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=Ee(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Nk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new uk(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function yb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var mb=Ie((function e(t){xe(this,e),this.key=t})),gb=Ie((function e(t){xe(this,e),this.key=t})),kb=function(){function e(t,n){xe(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=Ry(),this.mutatedKeys=Ry(),this.Ao=Dv(t),this.Ro=new eb(this.Ao)}return Ie(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new tb,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=_v(this.query)&&i.size===this.query.limit?i.last():null,c=xv(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ov(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ao(f,s)>0||c&&n.Ao(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),_v(this.query)||xv(this.query))for(;o.size>this.query.limit;){var l=_v(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:u,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qd()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==a.length||s?{snapshot:new nb(this.query,e.Ro,i,a,e.mutatedKeys,0===u,s,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new tb,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=Ry(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new gb(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new mb(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=Ry();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return nb.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),wb=Ie((function e(t,n,r){xe(this,e),this.query=t,this.targetId=n,this.view=r})),bb=Ie((function e(t){xe(this,e),this.key=t,this.$o=!1})),_b=function(){function e(t,n,r,i,a,o){xe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new Gg((function(e){return Rv(e)}),Nv),this.Mo=new Map,this.Lo=new Set,this.Bo=new ky(Lp.comparator),this.Uo=new Map,this.qo=new Ok,this.Ko={},this.jo=new Map,this.Qo=Dg.re(),this.onlineState="Unknown",this.Wo=void 0}return Ie(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function xb(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=ke(be().mark((function e(t,n){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y_(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,wk(r.localStore,Cv(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Ib(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&mw(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Ib(e,t,n,r){return Eb.apply(this,arguments)}function Eb(){return Eb=ke(be().mark((function e(t,n,r,i){var a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=ke(be().mark((function e(t,n,r,i){var a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,xk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Kb(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,xk(t.localStore,n,!0);case 3:return a=e.sent,o=new kb(n,a.zn),u=o.bo(a.documents),s=Ly.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Kb(t,r,c.Co),l=new wb(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e,t){return Cb.apply(this,arguments)}function Cb(){return Cb=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yd(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!Nv(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,bk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),gw(r.remoteStore,i.targetId),Wb(r,i.targetId)})).catch(jg);case 9:e.next=14;break;case 11:return Wb(r,i.targetId),e.next=14,bk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Ab(e,t,n){return Nb.apply(this,arguments)}function Nb(){return Nb=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m_(t),e.prev=1,e.next=4,function(e,t){var n,r=Yd(e),i=pp.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Ry());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,u=[],s=Ee(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=iy(c,n.get(c.key));null!=l&&u.push(new sy(c.key,l,Jp(l.value.mapValue),Zv.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.An.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new ky(fp)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,$b(i,a.changes);case 9:return e.next=11,Dw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Zw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Nb.apply(this,arguments)}function Rb(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),e.prev=1,e.next=4,mk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&($d(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?$d(n.$o):e.removedDocuments.size>0&&($d(n.$o),n.$o=!1))})),e.next=8,$b(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,jg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Pb.apply(this,arguments)}function Ob(e,t,n){var r=Yd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Yd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Ee(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&fb(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Db(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Yd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ky(Lp.comparator)).insert(o,Xp.newNoDocument(o,vp.min())),s=Ry().add(o),c=new Dy(vp.min(),new Map,new _y(fp),u,s),e.next=9,Rb(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),Qb(i),e.next=16;break;case 14:return e.next=16,bk(i.localStore,n,!1).then((function(){return Wb(i,n,r)})).catch(jg);case 16:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),i=n.batch.batchId,e.prev=1,e.next=4,vk(r.localStore,n);case 4:return a=e.sent,Bb(r,i,null),qb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,$b(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,jg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ub.apply(this,arguments)}function Fb(e,t,n){return jb.apply(this,arguments)}function jb(){return jb=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yd(t),e.prev=1,e.next=4,function(e,t){var n=Yd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return $d(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Bb(i,n,r),qb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,$b(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,jg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jb.apply(this,arguments)}function Vb(e,t){return zb.apply(this,arguments)}function zb(){return zb=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xw((r=Yd(t)).remoteStore)||Wd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Yd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Zw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),zb.apply(this,arguments)}function qb(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function Bb(e,t,n){var r=Yd(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Wb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Ee(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||Hb(e,t)}))}function Hb(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(gw(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Qb(e))}function Kb(e,t,n){var r,i=Ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof mb?(e.qo.addReference(a.key,t),Gb(e,a)):a instanceof gb?(Wd("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||Hb(e,a.key)):Qd()}}catch(o){i.e(o)}finally{i.f()}}function Gb(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Wd("SyncEngine","New document in limbo: "+n),e.Lo.add(r),Qb(e))}function Qb(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Lp(wp.fromString(t)),r=e.Qo.next();e.Uo.set(r,new bb(n)),e.Bo=e.Bo.insert(n,r),mw(e.remoteStore,new og(Cv(bv(n.path)),r,2,sp.I))}}function $b(e,t,n){return Yb.apply(this,arguments)}function Yb(){return Yb=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Yd(t),a=[],o=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ck.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(a),e.next=9,function(){var e=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Km.forEach(n,(function(t){return Km.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Km.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jm(e.t0)){e.next=10;break}throw e.t0;case 10:Wd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Ee(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qn.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Yb.apply(this,arguments)}function Jb(e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Yd(t)).currentUser.isEqual(n)){e.next=11;break}return Wd("SyncEngine","User change. New user:",n.toKey()),e.next=5,dk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new Xd(Jd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,$b(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Zb(e,t){var n=Yd(e),r=n.Uo.get(t);if(r&&r.$o)return Ry().add(r.key);var i=Ry(),a=n.Mo.get(t);if(!a)return i;var o,u=Ee(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Oo.get(s);i=i.unionWith(c.view.Po)}}catch(l){u.e(l)}finally{u.f()}return i}function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),e.next=3,xk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&Kb(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e){return r_.apply(this,arguments)}function r_(){return r_=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yd(t),e.abrupt("return",Ik(n.localStore).then((function(e){return $b(n,e)})));case 2:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t,n,r){return a_.apply(this,arguments)}function a_(){return a_=ke(be().mark((function e(t,n,r,i){var a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Yd(t),e.next=3,function(e,t){var n=Yd(e),r=Yd(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):Km.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Dw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Bb(a,n,i||null),qb(a,n),function(e,t){Yd(Yd(e).An).ee(t)}(a.localStore,n)):Qd();case 11:return e.next=13,$b(a,o);case 13:e.next=16;break;case 15:Wd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function o_(e,t){return u_.apply(this,arguments)}function u_(){return u_=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y_(r=Yd(t)),m_(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,s_(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,Qw(r.remoteStore,!0);case 9:o=Ee(a);try{for(o.s();!(u=o.n()).done;)s=u.value,mw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Wb(r,t),bk(r.localStore,t,!0)})),gw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,s_(r,c);case 21:return function(e){var t=Yd(e);t.Uo.forEach((function(e,n){gw(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new ky(Lp.comparator)}(r),r.Wo=!1,e.next=25,Qw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t,n){return c_.apply(this,arguments)}function c_(){return c_=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Yd(t),a=[],o=[],u=Ee(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,wk(i.localStore,Cv(f[0]));case 11:l=e.sent,h=Ee(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Oo.get(p),e.next=20,e_(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Tk(i.localStore,c);case 36:return m=e.sent,e.next=39,wk(i.localStore,m);case 39:return l=e.sent,e.next=42,Ib(i,l_(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),c_.apply(this,arguments)}function l_(e){return wv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function f_(e){var t=Yd(e);return Yd(Yd(t.localStore).persistence).Tn()}function h_(e,t,n,r){return d_.apply(this,arguments)}function d_(){return d_=ke(be().mark((function e(t,n,r,i){var a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Yd(t)).Wo){e.next=5;break}Wd("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Ik(a.localStore);case 11:return o=e.sent,u=Dy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,$b(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,bk(a.localStore,n,!0);case 18:return Wb(a,n,i),e.abrupt("break",21);case 20:Qd();case 21:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t,n){return v_.apply(this,arguments)}function v_(){return v_=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=y_(t)).Wo){e.next=45;break}a=Ee(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Mo.has(u)){e.next=10;break}return Wd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Tk(i.localStore,u);case 12:return s=e.sent,e.next=15,wk(i.localStore,s);case 15:return c=e.sent,e.next=18,Ib(i,l_(s),c.targetId,!1);case 18:mw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Ee(r),e.prev=30,h=be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,bk(i.localStore,t,!1).then((function(){gw(i.remoteStore,t),Wb(i,t)})).catch(jg);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),v_.apply(this,arguments)}function y_(e){var t=Yd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Db.bind(null,t),t.Fo.Pr=cb.bind(null,t.eventManager),t.Fo.zo=lb.bind(null,t.eventManager),t}function m_(e){var t=Yd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fb.bind(null,t),t}function g_(e,t,n){var r=Yd(e);(function(){var e=ke(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Yd(e),r=$y(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(yb(i)),a=new vb(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,$b(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=Yd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Kd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var k_=function(){function e(){xe(this,e),this.synchronizeTabs=!1}return Ie(e,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=aw(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return hk(this.persistence,new lk,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new jk(zk.ks,this.k)}},{key:"Jo",value:function(e){return new Jk}},{key:"terminate",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),w_=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ie(n,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(Ae(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Ek(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,m_(this.ta.syncEngine);case 8:return e.next=10,Dw(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return hk(this.persistence,new lk,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Bg(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=ok(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Eg.withCacheSize(this.cacheSizeBytes):Eg.DEFAULT;return new rk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,rw(),iw(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new Jk}}]),n}(k_),b_=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ie(n,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t){var r,i=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(Ae(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof Yk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:i_.bind(null,r),gi:h_.bind(null,r),yi:p_.bind(null,r),Tn:f_.bind(null,r),_i:n_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o_(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=rw();if(!Yk.bt(t))throw new Xd(Jd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ok(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(w_),__=function(){function e(){xe(this,e)}return Ie(e,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t,n){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ob(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jb.bind(null,this.syncEngine),e.next=12,Qw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ib}},{key:"createDatastore",value:function(e){var t,n=aw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new nw(t));return function(e,t,n,r){return new lw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ob(o.syncEngine,e,0)},a=Zk.bt()?new Zk:new Xk,new hw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new _b(e,t,n,r,i,a);return o&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yd(t),Wd("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,vw(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function x_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ke(be().mark((function r(){var i;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var T_=function(){function e(t){xe(this,e),this.observer=t,this.muted=!1}return Ie(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),I_=function(){function e(t,n){var r=this;xe(this,e),this.sa=t,this.k=n,this.metadata=new Zd,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ie(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=ke(be().mark((function e(){var t,n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new db(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E_=function(){function e(t){xe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ie(e,[{key:"lookup",value:function(){var e=ke(be().mark((function e(t){var n,r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Xd(Jd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ke(be().mark((function e(t,n){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),i=nm(r.k)+"/documents",a={documents:n.map((function(e){return Xy(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=om(r.k,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());$d(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new py(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ke(be().mark((function e(){var t,n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Lp.fromPath(t);n.mutations.push(new vy(r,n.precondition(r)))})),e.next=7,function(){var e=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yd(t),i=nm(r.k)+"/documents",a={writes:n.map((function(e){return um(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qd();t=vp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xd(Jd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zv.updateTime(t):Zv.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vp.min()))throw new Xd(Jd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zv.updateTime(t)}return Zv.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),S_=function(){function e(t,n,r,i){xe(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new ow(this.asyncQueue,"transaction_retry")}return Ie(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(ke(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new E_(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!Pp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!my(t)}return!1}}]),e}(),C_=function(){function e(t,n,r,i){var a=this;xe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vd.UNAUTHENTICATED,this.clientId=lp.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return Ie(e,[{key:"getConfiguration",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Xd(Jd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Zd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ke(be().mark((function n(){var r;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Zw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function A_(e,t){return N_.apply(this,arguments)}function N_(){return N_=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Wd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,dk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),N_.apply(this,arguments)}function R_(e,t){return P_.apply(this,arguments)}function P_(){return P_=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,O_(t);case 3:return r=e.sent,Wd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Yd(t)).asyncQueue.verifyOperationInProgress(),Wd("RemoteStore","RemoteStore received new credentials"),i=xw(r),r.Gr.add(3),e.next=6,vw(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,dw(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function O_(e){return D_.apply(this,arguments)}function D_(){return D_=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Wd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,A_(t,new k_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function L_(e){return M_.apply(this,arguments)}function M_(){return M_=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Wd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,R_(t,new __);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function U_(e){return O_(e).then((function(e){return e.persistence}))}function F_(e){return O_(e).then((function(e){return e.localStore}))}function j_(e){return L_(e).then((function(e){return e.remoteStore}))}function V_(e){return L_(e).then((function(e){return e.syncEngine}))}function z_(e){return q_.apply(this,arguments)}function q_(){return q_=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=xb.bind(null,n.syncEngine),r.onUnlisten=Sb.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function B_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new T_({next:function(a){t.enqueueAndForget((function(){return ub(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Xd(Jd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Xd(Jd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new hb(bv(n.path),a,{includeMetadataChanges:!0,wo:!0});return ab(e,o)},i.next=3,z_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function W_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new T_({next:function(n){t.enqueueAndForget((function(){return ub(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Xd(Jd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new hb(n,a,{includeMetadataChanges:!0,wo:!0});return ab(e,o)},i.next=3,z_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var H_=Ie((function e(t,n,r,i,a,o,u,s){xe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),K_=function(){function e(t,n){xe(this,e),this.projectId=t,this.database=n||"(default)"}return Ie(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),G_=new Map;function Q_(e,t,n){if(!n)throw new Xd(Jd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function $_(e,t,n,r){if(!0===t&&!0===r)throw new Xd(Jd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Y_(e){if(!Lp.isDocumentKey(e))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function J_(e){if(Lp.isDocumentKey(e))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function X_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Qd()}function Z_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xd(Jd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=X_(e);throw new Xd(Jd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ex(e,t){if(t<=0)throw new Xd(Jd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var tx=function(){function e(t){var n;if(xe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Xd(Jd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xd(Jd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ie(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),nx=function(){function e(t,n,r){xe(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tx({}),this._settingsFrozen=!1,t instanceof K_?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xd(Jd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new K_(e.options.projectId)}(t))}return Ie(e,[{key:"app",get:function(){if(!this._app)throw new Xd(Jd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Xd(Jd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tp;switch(e.type){case"gapi":var t=e.client;return $d(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ap(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Xd(Jd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=G_.get(e);t&&(Wd("ComponentProvider","Removing Datastore"),G_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function rx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Z_(e,nx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Kd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Vd.MOCK_USER;else{o=Be(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Xd(Jd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Vd(s)}e._authCredentials=new np(new ep(o,u))}}var ix=function(){function e(t,n,r){xe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ie(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ox(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ax=function(){function e(t,n,r){xe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ie(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ox=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,e,r,bv(i)))._path=i,a.type="collection",a}return Ie(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ix(this.firestore,null,new Lp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ax);function ux(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=lt(e),Q_("collection","path",t),e instanceof nx){var a=wp.fromString.apply(wp,[t].concat(r));return J_(a),new ox(e,null,a)}if(!(e instanceof ix||e instanceof ox))throw new Xd(Jd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wp.fromString.apply(wp,[t].concat(r)));return J_(o),new ox(e.firestore,null,o)}function sx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=lt(e),1===arguments.length&&(t=lp.A()),Q_("doc","path",t),e instanceof nx){var a=wp.fromString.apply(wp,[t].concat(r));return Y_(a),new ix(e,null,new Lp(a))}if(!(e instanceof ix||e instanceof ox))throw new Xd(Jd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wp.fromString.apply(wp,[t].concat(r)));return Y_(o),new ix(e.firestore,e instanceof ox?e.converter:null,new Lp(o))}function cx(e,t){return e=lt(e),t=lt(t),(e instanceof ix||e instanceof ox)&&(t instanceof ix||t instanceof ox)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function lx(e,t){return e=lt(e),t=lt(t),e instanceof ax&&t instanceof ax&&e.firestore===t.firestore&&Nv(e._query,t._query)&&e.converter===t.converter}var fx=function(){function e(){var t=this;xe(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new ow(this,"async_queue_retry"),this.Ra=function(){var e=iw();e&&Wd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=iw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return Ie(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=iw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new Zd;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=ke(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jm(e.t0)){e.next=12;break}throw e.t0;case 12:Wd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Hd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=Xw.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&Qd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=Ee(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ee(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function hx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Ee(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var dx=function(){function e(){xe(this,e),this._progressObserver={},this._taskCompletionResolver=new Zd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ie(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),px=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new fx,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ie(n,[{key:"_terminate",value:function(){return this._firestoreClient||yx(this),this._firestoreClient.terminate()}}]),n}(nx);function vx(e){return e._firestoreClient||yx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new H_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new C_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function mx(e,t,n){var r=new Zd;return e.asyncQueue.enqueue(ke(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,A_(e,n);case 3:return i.next=5,R_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Jd.FAILED_PRECONDITION||e.code===Jd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function gx(e){return function(e){return e.asyncQueue.enqueue(ke(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U_(e);case 2:return n=t.sent,t.next=5,j_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Yd(e);return t.Gr.delete(0),dw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(vx(e=Z_(e,px)))}function kx(e){return function(e){return e.asyncQueue.enqueue(ke(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U_(e);case 2:return n=t.sent,t.next=5,j_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Yd(t)).Gr.add(0),e.next=4,vw(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(vx(e=Z_(e,px)))}function wx(e,t){var n=vx(e=Z_(e,px)),r=new dx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new I_(e,t)}(function(e,t){if(e instanceof Uint8Array)return x_(e,t);if(e instanceof ArrayBuffer)return x_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,aw(t));e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g_,t.next=3,V_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function bx(e,t){return function(e,t){return e.asyncQueue.enqueue(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Yd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,F_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(vx(e=Z_(e,px)),t).then((function(t){return t?new ax(e,null,t.query):null}))}function _x(e){if(e._initialized||e._terminated)throw new Xd(Jd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xx=function(){function e(){xe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _p(n)}return Ie(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Tx=function(){function e(t){xe(this,e),this._byteString=t}return Ie(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Tp.fromBase64String(t))}catch(t){throw new Xd(Jd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Tp.fromUint8Array(t))}}]),e}(),Ix=Ie((function e(t){xe(this,e),this._methodName=t})),Ex=function(){function e(t,n){if(xe(this,e),!isFinite(t)||t<-90||t>90)throw new Xd(Jd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Xd(Jd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ie(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fp(this._lat,e._lat)||fp(this._long,e._long)}}]),e}(),Sx=/^__.*__$/,Cx=function(){function e(t,n,r){xe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ie(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new sy(e,this.data,this.fieldMask,t,this.fieldTransforms):new uy(e,this.data,t,this.fieldTransforms)}}]),e}(),Ax=function(){function e(t,n,r){xe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ie(e,[{key:"toMutation",value:function(e,t){return new sy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Nx(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qd()}}var Rx=function(){function e(t,n,r,i,a,o){xe(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ie(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return Jx(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Nx(this.xa)&&Sx.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),Px=function(){function e(t,n,r){xe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||aw(t)}return Ie(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Rx({xa:e,methodName:t,Ka:n,path:_p.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function Ox(e){var t=e._freezeSettings(),n=aw(e._databaseId);return new Px(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dx(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);Gx("Data must be an object, but it was:",o,r);var u,s,c=Hx(r,o);if(a.merge)u=new xp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Ee(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Qx(t,d,n);if(!o.contains(p))throw new Xd(Jd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Xx(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new xp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Cx(new Yp(c),u,s)}var Lx=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ix);function Mx(e,t,n){return new Rx({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var Ux=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"_toFieldTransform",value:function(e){return new Jv(e.path,new Bv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ix),Fx=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e)).Qa=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=Mx(this,e,!0),n=this.Qa.map((function(e){return Wx(e,t)})),r=new Wv(n);return new Jv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ix),jx=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e)).Qa=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=Mx(this,e,!0),n=this.Qa.map((function(e){return Wx(e,t)})),r=new Kv(n);return new Jv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ix),Vx=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e)).Wa=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=new Qv(e.k,Fv(e.k,this.Wa));return new Jv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ix);function zx(e,t,n,r){var i=e.ja(1,t,n);Gx("Data must be an object, but it was:",i,r);var a=[],o=Yp.empty();mp(r,(function(e,r){var u=Yx(t,e,n);r=lt(r);var s=i.La(u);if(r instanceof Lx)a.push(u);else{var c=Wx(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new xp(a);return new Ax(o,u,i.fieldTransforms)}function qx(e,t,n,r,i,a){var o=e.ja(1,t,n),u=[Qx(t,r,n)],s=[i];if(a.length%2!=0)throw new Xd(Jd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Qx(t,a[c])),s.push(a[c+1]);for(var l=[],f=Yp.empty(),h=u.length-1;h>=0;--h)if(!Xx(l,u[h])){var d=u[h],p=s[h];p=lt(p);var v=o.La(d);if(p instanceof Lx)l.push(d);else{var y=Wx(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new xp(l);return new Ax(f,m,o.fieldTransforms)}function Bx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Wx(n,e.ja(r?4:3,t))}function Wx(e,t){if(Kx(e=lt(e)))return Gx("Unsupported field value:",t,e),Hx(e,t);if(e instanceof Ix)return function(e,t){if(!Nx(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Ee(e);try{for(a.s();!(n=a.n()).done;){var o=Wx(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=lt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fv(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=pp.fromDate(e);return{timestampValue:Ky(t.k,n)}}if(e instanceof pp){var r=new pp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ky(t.k,r)}}if(e instanceof Ex)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tx)return{bytesValue:Gy(t.k,e._byteString)};if(e instanceof ix){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(X_(e)))}(e,t)}function Hx(e,t){var n={};return gp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mp(e,(function(e,r){var i=Wx(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Kx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof pp||e instanceof Ex||e instanceof Tx||e instanceof ix||e instanceof Ix)}function Gx(e,t,n){if(!Kx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=X_(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function Qx(e,t,n){if((t=lt(t))instanceof xx)return t._internalPath;if("string"==typeof t)return Yx(e,t);throw Jx("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var $x=new RegExp("[~\\*/\\[\\]]");function Yx(e,t,n){if(t.search($x)>=0)throw Jx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return De(xx,ht(t.split(".")))._internalPath}catch(r){throw Jx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jx(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Xd(Jd.INVALID_ARGUMENT,u+e+s)}function Xx(e,t){return e.some((function(e){return e.isEqual(t)}))}var Zx=function(){function e(t,n,r,i,a){xe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ie(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ix(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new eT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),eT=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(){return ln(Ae(n.prototype),"data",this).call(this)}}]),n}(Zx);function tT(e,t){return"string"==typeof t?Yx(e,t):t instanceof xx?t._internalPath:t._delegate._internalPath}var nT=function(){function e(t,n){xe(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ie(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),rT=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i,a,o,u){var s;return xe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ie(n,[{key:"exists",value:function(){return ln(Ae(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new iT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Zx),iT=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ln(Ae(n.prototype),"data",this).call(this,e)}}]),n}(rT),aT=function(){function e(t,n,r,i){xe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new nT(i.hasPendingWrites,i.fromCache),this.query=r}return Ie(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new iT(n._firestore,n._userDataWriter,r.key,r,new nT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xd(Jd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new iT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new iT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:oT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function oT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qd()}}function uT(e,t){return e instanceof rT&&t instanceof rT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof aT&&t instanceof aT&&e._firestore===t._firestore&&lx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function sT(e){if(xv(e)&&0===e.explicitOrderBy.length)throw new Xd(Jd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cT=Ie((function e(){xe(this,e)}));function lT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var fT=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return Ie(n,[{key:"_apply",value:function(e){var t=Ox(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){TT(o,a);var s,c=[],l=Ee(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(xT(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=xT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||TT(o,a),u=Bx(n,"where",o,"in"===a||"not-in"===a);var h=iv.create(i,a,u);return function(e,t){if(t.V()){var n=Iv(e);if(null!==n&&!n.isEqual(t.field))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Tv(e);null!==r&&IT(e,t.field,r)}var i=function(e,t){var n,r=Ee(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Xd(Jd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xd(Jd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new ax(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(cT);function hT(e,t,n){var r=t,i=tT("where",e);return new fT(i,r,n)}var dT=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return Ie(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vv(t,n);return function(e,t){if(null===Tv(e)){var n=Iv(e);null!==n&&IT(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new ax(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new kv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(cT);function pT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=tT("orderBy",e);return new dT(r,n)}var vT=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return Ie(n,[{key:"_apply",value:function(e){return new ax(e.firestore,e.converter,Av(e._query,this.Ya,this.Xa))}}]),n}(cT);var yT=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return Ie(n,[{key:"_apply",value:function(e){var t=_T(e,this.type,this.Za,this.tc);return new ax(e.firestore,e.converter,function(e,t){return new kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(cT);function mT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yT("startAt",t,!0)}function gT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yT("startAfter",t,!1)}var kT=function(e){Ce(n,e);var t=Oe(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return Ie(n,[{key:"_apply",value:function(e){var t=_T(e,this.type,this.Za,this.tc);return new ax(e.firestore,e.converter,function(e,t){return new kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(cT);function wT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kT("endBefore",t,!0)}function bT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kT("endAt",t,!1)}function _T(e,t,n,r){if(n[0]=lt(n[0]),n[0]instanceof Zx)return function(e,t,n,r,i){if(!r)throw new Xd(Jd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Ee(Sv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Bp(t,r.key));else{var c=r.data.field(s.field);if(Ap(c))throw new Xd(Jd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new dv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ox(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Xd(Jd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ev(e)&&-1!==c.indexOf("/"))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(wp.fromString(c));if(!Lp.isDocumentKey(l))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Lp(l);u.push(Bp(t,f))}else{var h=Bx(n,r,c);u.push(h)}}return new dv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function xT(e,t,n){if("string"==typeof(n=lt(n))){if(""===n)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ev(t)&&-1!==n.indexOf("/"))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(wp.fromString(n));if(!Lp.isDocumentKey(r))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bp(e,new Lp(r))}if(n instanceof ix)return Bp(e,n._key);throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(X_(n),"."))}function TT(e,t){if(!Array.isArray(e)||0===e.length)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function IT(e,t,n){if(!n.isEqual(t))throw new Xd(Jd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var ET=function(){function e(){xe(this,e)}return Ie(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return mp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Ex(Sp(e.latitude),Sp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Np(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ep(e);return new pp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=wp.fromString(e);$d(_m(n));var r=new K_(n.get(1),n.get(3)),i=new Lp(n.popFirst(5));return r.isEqual(t)||Hd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ST(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var CT=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new Tx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ix(this.firestore,null,t)}}]),n}(ET),AT=function(){function e(t,n){xe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ox(t)}return Ie(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=NT(e,this._firestore),i=ST(r.converter,t,n),a=Dx(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Zv.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=NT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=lt(t))||t instanceof xx?qx(this._dataReader,"WriteBatch.update",i._key,t,n,o):zx(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Zv.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=NT(e,this._firestore);return this._mutations=this._mutations.concat(new py(t._key,Zv.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Xd(Jd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function NT(e,t){if((e=lt(e)).firestore!==t)throw new Xd(Jd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var RT=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new Tx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ix(this.firestore,null,t)}}]),n}(ET);function PT(e){e=Z_(e,ix);var t=Z_(e.firestore,px),n=vx(t),r=new RT(t);return function(e,t){var n=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Yd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Xd(Jd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Zw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,F_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new rT(t,r,e._key,n,new nT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function OT(e){e=Z_(e,ax);var t=Z_(e.firestore,px),n=vx(t),r=new RT(t);return sT(e._query),W_(n,e._query).then((function(n){return new aT(t,r,e,n)}))}function DT(e){e=Z_(e,ax);var t=Z_(e.firestore,px),n=vx(t),r=new RT(t);return function(e,t){var n=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ke(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xk(t,n,!0);case 3:i=e.sent,a=new kb(n,i.zn),o=a.bo(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Zw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,F_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new aT(t,r,e,n)}))}function LT(e,t,n){e=Z_(e,ix);var r=Z_(e.firestore,px),i=ST(e.converter,t,n);return zT(r,[Dx(Ox(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zv.none())])}function MT(e,t,n){e=Z_(e,ix);for(var r=Z_(e.firestore,px),i=Ox(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return zT(r,[("string"==typeof(t=lt(t))||t instanceof xx?qx(i,"updateDoc",e._key,t,n,o):zx(i,"updateDoc",e._key,t)).toMutation(e._key,Zv.exists(!0))])}function UT(e){return zT(Z_(e.firestore,px),[new py(e._key,Zv.none())])}function FT(e,t){var n=Z_(e.firestore,px),r=sx(e),i=ST(e.converter,t);return zT(n,[Dx(Ox(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zv.exists(!1))]).then((function(){return r}))}function jT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=lt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||hx(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(hx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ix)l=Z_(e.firestore,px),f=bv(e._key.path),c={next:function(t){n[s]&&n[s](qT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Z_(e,ax);l=Z_(p.firestore,px),f=p._query;var v=new RT(l);c={next:function(e){n[s]&&n[s](new aT(l,v,p,e))},error:n[s+1],complete:n[s+2]},sT(e._query)}return function(e,t,n,r){var i=new T_(r),a=new hb(t,i,n);return e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ab,t.next=3,z_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ub,t.next=3,z_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vx(l),f,h,c)}function VT(e,t){return function(e,t){var n=new T_(t);return e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Yd(e).io.add(t),t.next()},t.next=3,z_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Yd(e).io.delete(t)},t.next=3,z_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vx(e=Z_(e,px)),hx(t)?t:{next:t})}function zT(e,t){return function(e,t){var n=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ab,r.next=3,V_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(vx(e),t)}function qT(e,t,n){var r=n.docs.get(t._key),i=new RT(e);return new rT(e,i,t._key,r,new nT(n.hasPendingWrites,n.fromCache),t.converter)}var BT=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ie(n,[{key:"get",value:function(e){var t=this,r=NT(e,this._firestore),i=new RT(this._firestore);return ln(Ae(n.prototype),"get",this).call(this,e).then((function(e){return new rT(t._firestore,i,r._key,e._document,new nT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){xe(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ox(t)}return Ie(e,[{key:"get",value:function(e){var t=this,n=NT(e,this._firestore),r=new CT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Qd();var i=e[0];if(i.isFoundDocument())return new Zx(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Zx(t._firestore,r,n._key,null,n.converter);throw Qd()}))}},{key:"set",value:function(e,t,n){var r=NT(e,this._firestore),i=ST(r.converter,t,n),a=Dx(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=NT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=lt(t))||t instanceof xx?qx(this._dataReader,"Transaction.update",i._key,t,n,o):zx(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=NT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function WT(e,t){return function(e,t){var n=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){var i;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return L_(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new S_(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(vx(e=Z_(e,px)),(function(n){return t(new BT(e,n))}))}function HT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fx("arrayUnion",t)}function KT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jx("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zd=e}(Kt),Ut(new dt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new px(i,new rp(e.getProvider("auth-internal")),new up(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Xt(jd,"3.4.1",e),Xt(jd,"3.4.1","esm2017")}();function GT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function QT(){if("undefined"===typeof Uint8Array)throw new Xd("unimplemented","Uint8Arrays are not available in this environment.")}function $T(){if("undefined"==typeof atob)throw new Xd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var YT=function(){function e(t){xe(this,e),this._delegate=t}return Ie(e,[{key:"toBase64",value:function(){return $T(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return QT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return $T(),new e(Tx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return QT(),new e(Tx.fromUint8Array(t))}}]),e}();function JT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Ee(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var XT=function(){function e(){xe(this,e)}return Ie(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_x(e=Z_(e,px));var n=vx(e),r=e._freezeSettings(),i=new __;return mx(n,i,new w_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_x(e=Z_(e,px));var t=vx(e),n=e._freezeSettings(),r=new __;return mx(t,r,new b_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Xd(Jd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Zd;return e._queue.enqueueAndForgetEvenWhileRestricted(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qm.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Qm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ok(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ZT=function(){function e(t,n,r){var i=this;xe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof K_||(this._appCompat=t)}return Ie(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Kd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return gx(this._delegate)}},{key:"disableNetwork",value:function(){return kx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&$_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Zd;return e.asyncQueue.enqueueAndForget(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Vb,n.next=3,V_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(vx(e=Z_(e,px)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return VT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Xd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new dI(this,ux(this._delegate,e))}catch(t){throw aI(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new iI(this,sx(this._delegate,e))}catch(t){throw aI(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new lI(this,function(e,t){if(e=Z_(e,nx),Q_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xd(Jd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ax(e,null,function(e){return new kv(wp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw aI(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return WT(this._delegate,(function(n){return e(new tI(t,n))}))}},{key:"batch",value:function(){var e=this;return vx(this._delegate),new nI(new AT(this._delegate,(function(t){return zT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return wx(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return bx(this._delegate,e).then((function(e){return e?new lI(t,e):null}))}}]),e}(),eI=function(e){Ce(n,e);var t=Oe(n);function n(e){var r;return xe(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new YT(new Tx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return iI.forKey(t,this.firestore,null)}}]),n}(ET);var tI=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new eI(t)}return Ie(e,[{key:"get",value:function(e){var t=this,n=pI(e);return this._delegate.get(n).then((function(e){return new sI(t._firestore,new rT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=pI(e);return n?(GT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pI(e);return this._delegate.delete(t),this}}]),e}(),nI=function(){function e(t){xe(this,e),this._delegate=t}return Ie(e,[{key:"set",value:function(e,t,n){var r=pI(e);return n?(GT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),rI=function(){function e(t,n,r){xe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ie(e,[{key:"fromFirestore",value:function(e,t){var n=new iT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cI(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new eI(t),n),i.set(n,a)),a}}]),e}();rI.INSTANCES=new WeakMap;var iI=function(){function e(t,n){xe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eI(t)}return Ie(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new dI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new dI(this.firestore,ux(this._delegate,e))}catch(t){throw aI(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=lt(e))instanceof ix&&cx(this._delegate,e)}},{key:"set",value:function(e,t){t=GT("DocumentReference.set",t);try{return t?LT(this._delegate,e,t):LT(this._delegate,e)}catch(n){throw aI(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?MT(this._delegate,e):MT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw aI(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return UT(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oI(n),a=uI(n,(function(t){return new sI(e.firestore,new rT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return jT(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?PT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Z_(e,ix);var t=Z_(e.firestore,px);return B_(vx(t),e._key,{source:"server"}).then((function(n){return qT(t,e,n)}))}(this._delegate):function(e){e=Z_(e,ix);var t=Z_(e.firestore,px);return B_(vx(t),e._key).then((function(n){return qT(t,e,n)}))}(this._delegate),t.then((function(e){return new sI(n.firestore,new rT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Xd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ix(n._delegate,r,new Lp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ix(n._delegate,r,t))}}]),e}();function aI(e,t,n){return e.message=e.message.replace(t,n),e}function oI(e){var t,n=Ee(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function uI(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JT(e[0])?e[0]:JT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sI=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"ref",get:function(){return new iI(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return uT(this._delegate,e._delegate)}}]),e}(),cI=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Qd()}(void 0!==t),t}}]),n}(sI),lI=function(){function e(t,n){xe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eI(t)}return Ie(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,lT(this._delegate,hT(t,n,r)))}catch(i){throw aI(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,lT(this._delegate,pT(t,n)))}catch(r){throw aI(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,lT(this._delegate,function(e){return ex("limit",e),new vT("limit",e,"F")}(t)))}catch(n){throw aI(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,lT(this._delegate,function(e){return ex("limitToLast",e),new vT("limitToLast",e,"L")}(t)))}catch(n){throw aI(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,lT(this._delegate,mT.apply(void 0,arguments)))}catch(t){throw aI(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,lT(this._delegate,gT.apply(void 0,arguments)))}catch(t){throw aI(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,lT(this._delegate,wT.apply(void 0,arguments)))}catch(t){throw aI(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,lT(this._delegate,bT.apply(void 0,arguments)))}catch(t){throw aI(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return lx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?DT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Z_(e,ax);var t=Z_(e.firestore,px),n=vx(t),r=new RT(t);return W_(n,e._query,{source:"server"}).then((function(n){return new aT(t,r,e,n)}))}(this._delegate):OT(this._delegate),t.then((function(e){return new hI(n.firestore,new aT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oI(n),a=uI(n,(function(t){return new hI(e.firestore,new aT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return jT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),fI=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new cI(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),hI=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"query",get:function(){return new lI(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new cI(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new fI(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new cI(n._firestore,r))}))}},{key:"isEqual",value:function(e){return uT(this._delegate,e._delegate)}}]),e}(),dI=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ie(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new iI(this.firestore,e):null}},{key:"doc",value:function(e){try{return new iI(this.firestore,void 0===e?sx(this._delegate):sx(this._delegate,e))}catch(t){throw aI(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return FT(this._delegate,e).then((function(e){return new iI(t.firestore,e)}))}},{key:"isEqual",value:function(e){return cx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(rI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(lI);function pI(e){return Z_(e,ix)}var vI=function(){function e(){xe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=De(xx,n)}return Ie(e,[{key:"isEqual",value:function(e){return(e=lt(e))instanceof xx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(_p.keyField().canonicalString())}}]),e}(),yI=function(){function e(t){xe(this,e),this._delegate=t}return Ie(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ux("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Lx("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=HT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=KT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Vx("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),mI={Firestore:ZT,GeoPoint:Ex,Timestamp:pp,Blob:YT,Transaction:tI,WriteBatch:nI,DocumentReference:iI,DocumentSnapshot:sI,Query:lI,QueryDocumentSnapshot:cI,QuerySnapshot:hI,CollectionReference:dI,FieldPath:vI,FieldValue:yI,setLogLevel:function(e){!function(e){qd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new dt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mI)))}(e,(function(e,t){return new ZT(e,t,new XT)})),e.registerVersion("@firebase/firestore-compat","0.1.10")}(sn);var gI="firebasestorage.googleapis.com",kI=function(e){Ce(n,e);var t=Oe(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,wI(e),"Firebase Storage: ".concat(r," (").concat(wI(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Se(i),n.prototype),i}return Ie(n,[{key:"_codeEquals",value:function(e){return wI(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Je);function wI(e){return"storage/"+e}function bI(){return new kI("unknown","An unknown error occurred, please check the error payload for server response.")}function _I(){return new kI("canceled","User canceled the upload/download.")}function xI(){return new kI("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function TI(e){return new kI("invalid-argument",e)}function II(){return new kI("app-deleted","The Firebase app was deleted.")}function EI(e){return new kI("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function SI(e,t){return new kI("invalid-format","String does not match format '"+e+"': "+t)}function CI(e){throw new kI("internal-error","Internal error: "+e)}var AI,NI=function(){function e(t,n){xe(this,e),this.bucket=t,this.path_=n}return Ie(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new kI("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===gI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new kI("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),RI=function(){function e(t){xe(this,e),this.promise_=Promise.reject(t)}return Ie(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function PI(e){return"string"===typeof e||e instanceof String}function OI(e){return DI()&&e instanceof Blob}function DI(){return"undefined"!==typeof Blob}function LI(e,t,n,r){if(r<t)throw TI("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw TI("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function MI(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function UI(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(AI||(AI={}));var FI=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;xe(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ie(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=bI();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?II():_I());else i(new kI("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new jI(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new jI(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===AI.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new jI(o,r))}else{var u=r.getErrorCode()===AI.ABORT;t(!1,new jI(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),jI=Ie((function e(t,n,r){xe(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function VI(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zI(){for(var e=VI(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(DI())return new Blob(n);throw new kI("unsupported-environment","This browser doesn't seem to support creating Blobs")}var qI={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},BI=Ie((function e(t,n){xe(this,e),this.data=t,this.contentType=n||null}));function WI(e,t){switch(e){case qI.RAW:return new BI(HI(t));case qI.BASE64:case qI.BASE64URL:return new BI(KI(e,t));case qI.DATA_URL:return new BI(function(e){var t=new GI(e);return t.base64?KI(qI.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw SI(qI.DATA_URL,"Malformed data URL.")}return HI(t)}(t.rest)}(t),new GI(t).contentType)}throw bI()}function HI(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function KI(e,t){switch(e){case qI.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw SI(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qI.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw SI(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw SI(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var GI=Ie((function e(t){xe(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw SI(qI.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var QI=function(){function e(t,n){xe(this,e);var r=0,i="";OI(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ie(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(OI(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(DI()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(zI.apply(null,i))}var a=n.map((function(e){return PI(e)?WI(qI.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function $I(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function YI(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function JI(e,t){return t}var XI=Ie((function e(t,n,r,i){xe(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||JI})),ZI=null;function eE(){if(ZI)return ZI;var e=[];e.push(new XI("bucket")),e.push(new XI("generation")),e.push(new XI("metageneration")),e.push(new XI("name","fullPath",!0));var t=new XI("name");t.xform=function(e,t){return function(e){return!PI(e)||e.length<2?e:YI(e)}(t)},e.push(t);var n=new XI("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new XI("timeCreated")),e.push(new XI("updated")),e.push(new XI("md5Hash",null,!0)),e.push(new XI("cacheControl",null,!0)),e.push(new XI("contentDisposition",null,!0)),e.push(new XI("contentEncoding",null,!0)),e.push(new XI("contentLanguage",null,!0)),e.push(new XI("contentType",null,!0)),e.push(new XI("metadata","customMetadata",!0)),ZI=e}function tE(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new NI(n,r);return t._makeStorageReference(i)}})}(r,e),r}function nE(e,t,n){var r=$I(t);return null===r?null:tE(e,r,n)}function rE(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function iE(e,t,n){var r=$I(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Ee(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new NI(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=Ee(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new NI(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var aE=Ie((function e(t,n,r,i){xe(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function oE(e){if(!e)throw bI()}function uE(e,t){return function(n,r){var i=nE(e,r,t);return oE(null!==i),i}}function sE(e,t){return function(n,r){var i=nE(e,r,t);return oE(null!==i),function(e,t,n,r){var i=$I(t);if(null===i)return null;if(!PI(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return MI("/b/"+o(i)+"/o/"+o(a),n,r)+UI({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function cE(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new kI("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new kI("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new kI("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new kI("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function lE(e){var t=cE(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new kI("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function fE(e,t,n){var r=MI(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new aE(r,"GET",uE(e,n),i);return a.errorHandler=lE(t),a}function hE(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=MI(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new aE(o,"GET",function(e,t){return function(n,r){var i=iE(e,t,r);return oE(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=cE(t),s}function dE(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function pE(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=dE(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+rE(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=QI.getBlob(c,r,l);if(null===f)throw xI();var h={name:s.fullPath},d=MI(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new aE(d,"POST",uE(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=cE(t),v}var vE=Ie((function e(t,n,r,i){xe(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function yE(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){oE(!1)}return oE(!!n&&-1!==(t||["active"]).indexOf(n)),n}var mE=262144;function gE(e,t,n,r,i,a,o,u){var s=new vE(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new kI("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw xI();var v=t.maxUploadRetryTime,y=new aE(n,"POST",(function(e,n){var i,o=yE(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?uE(t,a)(e,n):null,new vE(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=cE(e),y}var kE={STATE_CHANGED:"state_changed"},wE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bE(e){switch(e){case"running":case"pausing":case"canceling":return wE.RUNNING;case"paused":return wE.PAUSED;case"success":return wE.SUCCESS;case"canceled":return wE.CANCELED;default:return wE.ERROR}}var _E=Ie((function e(t,n,r){xe(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function xE(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var TE=function(){function e(){var t=this;xe(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=AI.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=AI.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=AI.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ie(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw CI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw CI("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw CI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw CI("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw CI("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),IE=function(e){Ce(n,e);var t=Oe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ie(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(TE);function EE(){return new IE}var SE=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;xe(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=eE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ie(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=dE(t,r,i),u={name:o.fullPath},s=MI(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=rE(o,n),f=e.maxUploadRetryTime,h=new aE(s,"POST",(function(e){var t;yE(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){oE(!1)}return oE(PI(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=cE(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,EE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new aE(n,"POST",(function(e){var t=yE(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){oE(!1)}n||oE(!1);var i=Number(n);return oE(!isNaN(i)),new vE(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=cE(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,EE,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=mE*this._chunkMultiplier,n=new vE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=gE(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,EE,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){mE*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=fE(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,EE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=pE(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,EE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=_I(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=bE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new _E(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(bE(this._state)){case wE.SUCCESS:xE(this._resolve.bind(null,this.snapshot))();break;case wE.CANCELED:case wE.ERROR:xE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(bE(this._state)){case wE.RUNNING:case wE.PAUSED:e.next&&xE(e.next.bind(e,this.snapshot))();break;case wE.SUCCESS:e.complete&&xE(e.complete.bind(e))();break;default:e.error&&xE(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),CE=function(){function e(t,n){xe(this,e),this._service=t,this._location=n instanceof NI?n:NI.makeFromUrl(n,t.host)}return Ie(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new NI(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return YI(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new NI(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw EI(e)}}]),e}();function AE(e,t,n){e._throwIfRoot("uploadBytes");var r=pE(e.storage,e._location,eE(),new QI(t,!0),n);return e.storage.makeRequestWithTokens(r,EE).then((function(t){return{metadata:t,ref:e}}))}function NE(e,t,n){return RE.apply(this,arguments)}function RE(){return(RE=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,PE(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,ht(u.prefixes)),(a=n.items).push.apply(a,ht(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,NE(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PE(e,t){null!=t&&"number"===typeof t.maxResults&&LI("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=hE(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,EE)}function OE(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=MI(t.fullServerUrl(),e.host,e._protocol),a=rE(n,r),o=e.maxOperationRetryTime,u=new aE(i,"PATCH",uE(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=lE(t),u}(e.storage,e._location,t,eE());return e.storage.makeRequestWithTokens(n,EE)}function DE(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=MI(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new aE(r,"GET",sE(e,n),i);return a.errorHandler=lE(t),a}(e.storage,e._location,eE());return e.storage.makeRequestWithTokens(t,EE).then((function(e){if(null===e)throw new kI("no-download-url","The given file does not have any download URLs.");return e}))}function LE(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=MI(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new aE(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=lE(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,EE)}function ME(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new NI(e._location.bucket,n);return new CE(e.storage,r)}function UE(e,t){if(e instanceof zE){var n=e;if(null==n._bucket)throw new kI("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new CE(n,n._bucket);return null!=t?UE(r,t):r}return void 0!==t?ME(e,t):e}function FE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof zE)return new CE(e,t);throw TI("To use ref(service, url), the first argument must be a Storage instance.")}return UE(e,t)}function jE(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:NI.makeFromBucketSpec(n,e)}function VE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Be(i,e.app.options.projectId))}var zE=function(){function e(t,n,r,i,a){xe(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=gI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?NI.makeFromBucketSpec(i,this._host):jE(this._host,this.app.options)}return Ie(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=NI.makeFromBucketSpec(this._url,e):this._bucket=jE(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){LI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){LI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new CE(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new RI(II());var a=function(e,t,n,r,i,a){var o=UI(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new FI(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),qE="@firebase/storage",BE="0.9.0",WE="storage";function HE(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qI.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=WI(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),AE(e,i.data,a)}(e=lt(e),t,n,r)}function KE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new SE(e,new QI(t),n)}(e=lt(e),t,n)}function GE(e){return function(e){e._throwIfRoot("getMetadata");var t=fE(e.storage,e._location,eE());return e.storage.makeRequestWithTokens(t,EE)}(e=lt(e))}function QE(e){return function(e){var t={prefixes:[],items:[]};return NE(e,t).then((function(){return t}))}(e=lt(e))}function $E(e){return DE(e=lt(e))}function YE(e){return LE(e=lt(e))}function JE(e,t){return FE(e=lt(e),t)}function XE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};VE(e,t,n,r)}function ZE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new zE(r,i,a,n,Kt)}Ut(new dt(WE,ZE,"PUBLIC").setMultipleInstances(!0)),Xt(qE,BE,""),Xt(qE,BE,"esm2017");var eS=function(){function e(t,n,r){xe(this,e),this._delegate=t,this.task=n,this.ref=r}return Ie(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),tS=function(){function e(t,n){xe(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ie(e,[{key:"snapshot",get:function(){return new eS(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new eS(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new eS(e,i,i._ref))}:{next:t.next?function(e){return t.next(new eS(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),nS=function(){function e(t,n){xe(this,e),this._delegate=t,this._service=n}return Ie(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new rS(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new rS(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),rS=function(){function e(t,n){xe(this,e),this._delegate=t,this.storage=n}return Ie(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return ME(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new tS(KE(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qI.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=WI(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new tS(new SE(this._delegate,new QI(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return QE(this._delegate).then((function(t){return new nS(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return PE(e=lt(e),t)}(this._delegate,e||void 0).then((function(e){return new nS(e,t.storage)}))}},{key:"getMetadata",value:function(){return GE(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return OE(e=lt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return $E(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),YE(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw EI(e)}}]),e}(),iS=function(){function e(t,n){xe(this,e),this.app=t,this._delegate=n}return Ie(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(aS(e))throw TI("ref() expected a child path but got a URL, use refFromURL instead.");return new rS(JE(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!aS(e))throw TI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{NI.makeFromUrl(e,this._delegate.host)}catch(t){throw TI("refFromUrl() expected a valid full URL but got an invalid one.")}return new rS(JE(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};XE(this._delegate,e,t,n)}}]),e}();function aS(e){return/^[A-Za-z]+:\/\//.test(e)}function oS(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new iS(r,i)}!function(e){var t={TaskState:wE,TaskEvent:kE,StringFormat:qI,Storage:iS,Reference:rS};e.INTERNAL.registerComponent(new dt("storage-compat",oS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.8")}(sn);Xt("firebase","9.6.1","app");var uS=Gt({apiKey:"AIzaSyDhVQCN8VeReTWWpnXv9GEv_kz_F0lKsXQ",authDomain:"nwitter-6afcc.firebaseapp.com",projectId:"nwitter-6afcc",storageBucket:"nwitter-6afcc.appspot.com",messagingSenderId:"229439035332",appId:"1:229439035332:web:a40b65fbde74b87765f691"}),sS=ws(uS),cS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt();return Ft(e,"firestore").getImmediate()}(),lS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt(),t=arguments.length>1?arguments[1]:void 0,n=Ft(e=lt(e),WE),r=n.getImmediate({identifier:t});return r}(),fS=uS,hS=n(184),dS=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(!0),2),c=u[0],l=(u[1],s((0,t.useState)(""),2)),f=l[0],h=l[1],d=function(e){var t=e.target,n=t.name,i=t.value;"email"===n?r(i):"password"===n&&o(i)},p=function(){var e=ke(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(n,a),e.prev=2,!c){e.next=9;break}return e.next=6,Ea(sS,n,a);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,Ca(sS,n,a);case 11:r=e.sent;case 12:console.log(r),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),h(e.t0.message.replace("Firebase: ",""));case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,hS.jsx)("div",{children:(0,hS.jsxs)("form",{onSubmit:p,children:[(0,hS.jsx)("input",{name:"email",type:"email",placeholder:"email",value:n,onChange:d,required:!0}),(0,hS.jsx)("input",{name:"password",type:"password",placeholder:"password",value:a,onChange:d,required:!0}),(0,hS.jsx)("input",{type:"submit",value:c?"make new account":"log in"}),(0,hS.jsx)("span",{children:f})]})})},pS=function(){var e=s((0,t.useState)(!0),2),n=e[0],r=e[1],i=function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.name,n=new ji,e.next=4,fu(sS,n);case 4:r=e.sent,console.log(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,hS.jsxs)("div",{children:[(0,hS.jsx)(dS,{}),(0,hS.jsxs)("div",{children:[(0,hS.jsx)("button",{children:"Go with Email"}),(0,hS.jsx)("button",{onClick:i,name:"google",children:"Go with Google"}),(0,hS.jsx)("span",{onClick:function(){r((function(e){return!e}))},children:n?"SignIn":"New Account"})]})]})};function vS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yS,mS=function(e){var n=e.nweetObj,r=e.isOwner,i=sx(cS,"nweets","".concat(n.id)),a=function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Really Delete?")){e.next=7;break}return e.next=4,void UT(i);case 4:return t=JE(lS,n.attatchmentUrl),e.next=7,YE(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=s((0,t.useState)(!1),2),u=o[0],c=o[1],l=s((0,t.useState)(n.text),2),f=l[0],h=l[1],d=function(){return c((function(e){return!e}))},p=function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MT(i,{text:f});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,hS.jsx)("div",{children:u?(0,hS.jsx)(hS.Fragment,{children:r&&(0,hS.jsxs)(hS.Fragment,{children:[(0,hS.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(),d()},children:[(0,hS.jsx)("input",{type:"text",required:!0,placeholder:"editing!",value:f,onChange:function(e){var t=e.target.value;h(t)}}),(0,hS.jsx)("input",{type:"submit",value:"Edit Complete"})]}),(0,hS.jsx)("button",{onClick:d,children:"Cancle"})]})}):(0,hS.jsx)(hS.Fragment,{children:(0,hS.jsxs)("div",{children:[n.attatchmentUrl&&(0,hS.jsx)("img",{src:n.attatchmentUrl,width:"50px",height:"50px"}),(0,hS.jsx)("h4",{children:n.text}),r&&(0,hS.jsxs)(hS.Fragment,{children:[(0,hS.jsx)("button",{onClick:a,children:"Delete Nweet"}),(0,hS.jsx)("button",{onClick:d,children:"Edit Nweet"})]})]},n.id)})})},gS=new Uint8Array(16);function kS(){if(!yS&&!(yS="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yS(gS)}var wS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var bS=function(e){return"string"===typeof e&&wS.test(e)},_S=[],xS=0;xS<256;++xS)_S.push((xS+256).toString(16).substr(1));var TS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(_S[e[t+0]]+_S[e[t+1]]+_S[e[t+2]]+_S[e[t+3]]+"-"+_S[e[t+4]]+_S[e[t+5]]+"-"+_S[e[t+6]]+_S[e[t+7]]+"-"+_S[e[t+8]]+_S[e[t+9]]+"-"+_S[e[t+10]]+_S[e[t+11]]+_S[e[t+12]]+_S[e[t+13]]+_S[e[t+14]]+_S[e[t+15]]).toLowerCase();if(!bS(n))throw TypeError("Stringified UUID is invalid");return n};var IS=function(e,t,n){var r=(e=e||{}).random||(e.rng||kS)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return TS(r)},ES=function(e){var n=e.userObj,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=function(){var e=ke(be().mark((function e(t){var r,o,s,l,f;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r="",""===u){e.next=11;break}return o=JE(lS,"".concat(n.uid,"/").concat(IS())),e.next=6,HE(o,u,"data_url");case 6:return s=e.sent,console.log(s.ref),e.next=10,$E(s.ref);case 10:r=e.sent;case 11:return l={text:i,createdAt:Date.now(),createdId:n.uid,attatchmentUrl:r},e.prev=12,e.next=15,FT(ux(cS,"nweets"),l);case 15:f=e.sent,console.log("Document written with ID: ",f.id),a(""),c(""),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(12),console.error("error is : ",e.t0);case 24:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(t){return e.apply(this,arguments)}}();return(0,hS.jsxs)("form",{onSubmit:l,children:[(0,hS.jsx)("input",{type:"text",placeholder:"\ub313\uae00~~",maxLength:120,value:i,onChange:function(e){var t=e.target.value;a(t)}}),(0,hS.jsx)("input",{type:"file",accept:"image/*",onInput:function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){var t=e.target.result;c(t)}}}),(0,hS.jsx)("input",{type:"submit",value:"Nweet"}),u&&(0,hS.jsxs)("div",{children:[(0,hS.jsx)("img",{src:u,width:"50px",height:"50px"}),(0,hS.jsx)("button",{onClick:function(){c(null)},children:"Clear"})]})]})},SS=function(e){var n=e.userObj,r=s((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){jT(lT(ux(cS,"nweets"),pT("createdAt","desc")),(function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vS(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}))}),[]),(0,hS.jsxs)("div",{children:[(0,hS.jsx)(ES,{userObj:n}),(0,hS.jsx)("div",{children:i.map((function(e){return(0,hS.jsx)(mS,{nweetObj:e,isOwner:e.createdId===n.uid},e.id)}))})]})},CS=function(e){var t=e.userObj;return(0,hS.jsxs)("ul",{children:[(0,hS.jsx)("li",{children:(0,hS.jsx)(ve,{to:"/",children:"Home"})}),(0,hS.jsx)("li",{children:(0,hS.jsx)(ve,{to:"/profile",children:t.displayName?t.displayName:"Profile"})})]})},AS=function(e){var n=e.userObj,r=e.refreshUser,i=s((0,t.useState)(n.displayName),2),a=i[0],o=i[1],u=s((0,t.useState)([]),2),c=(u[0],u[1]),l=se($),f=function(){var e=ke(be().mark((function e(){var t,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=lT(ux(cS,"nweets"),hT("createdId","==","".concat(n.uid))),e.next=3,OT(t);case 3:(r=e.sent).forEach((function(e){c((function(t){return[e.data()].concat(ht(t))}))})),c(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){f()}),[]);var h=function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.displayName===a){e.next=5;break}return e.next=4,Fa(sS.currentUser,{displayName:a});case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,hS.jsxs)(hS.Fragment,{children:[(0,hS.jsxs)("form",{onSubmit:h,children:[(0,hS.jsx)("input",{type:"text",placeholder:"",value:a,onChange:function(e){var t=e.target.value;o(t)}}),(0,hS.jsx)("input",{type:"submit",value:"update profile"})]}),(0,hS.jsx)("button",{onClick:function(){sS.signOut(),l.push("/")},children:"Log Out"}),(0,hS.jsx)("div",{})]})},NS=function(e){var t=e.refreshUser,n=e.checkLogin,r=e.userObj;return console.log("checklogin : ",n),(0,hS.jsxs)(ce,{children:[n&&(0,hS.jsx)(CS,{userObj:r}),(0,hS.jsx)(ue,{children:n?(0,hS.jsxs)(hS.Fragment,{children:[(0,hS.jsx)(te,{exact:!0,path:"/",children:(0,hS.jsx)(SS,{userObj:r})}),(0,hS.jsx)(te,{exact:!0,path:"/profile",children:(0,hS.jsx)(AS,{userObj:r,refreshUser:t})})]}):(0,hS.jsx)(te,{exact:!0,path:"/",children:(0,hS.jsx)(pS,{})})})]})};var RS=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(null),2),c=u[0],l=u[1];return(0,t.useEffect)((function(){!function(e,t,n,r){lt(e).onAuthStateChanged(t,n,r)}(ws(),(function(e){e?(r(!0),l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Fa(e,{displayName:e.displayName})}})):r(!1),o(!0)}))}),[]),(0,hS.jsx)(hS.Fragment,{children:a?(0,hS.jsx)(NS,{refreshUser:function(){var e=sS.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},checkLogin:n,userObj:c}):(0,hS.jsx)("div",{children:"initializing..."})})};console.log(fS),r.render((0,hS.jsx)(t.StrictMode,{children:(0,hS.jsx)(RS,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.5b018551.js.map